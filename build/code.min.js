'use strict';var view,demos,user,UIL,exports,define,module,performance,CodeMirror,getComputedStyle,require,requirejs,esprima,global;(function(s,I){"object"===typeof exports&&"undefined"!==typeof module?I(exports):"function"===typeof define&&define.amd?define(["exports"],I):I(s.UIL=s.UIL||{})})(this,function(s){function I(a,d){this.x=a||0;this.y=d||0}function w(a){a=a||{};this.css=q.css;this.colors=q.colors;this.defaultBorderColor=this.colors.border;this.svgs=q.svgs;this.zone={x:0,y:0,w:0,h:0};this.local=(new I).neg();this.isCanvasOnly=!1;this.main=a.main||null;this.isUI=a.isUI||!1;this.parentGroup=null;this.p=void 0!==a.p?a.p:
q.size.p;this.w=this.isUI?this.main.size.w:q.size.w;void 0!==a.w&&(this.w=a.w);this.h=this.isUI?this.main.size.h:q.size.h;void 0!==a.h&&(this.h=a.h);this.h=11>this.h?11:this.h;this.autoWidth=a.auto||!0;this.isOpen=!1;this.radius=a.radius||0;this.isEdit=this.mono=this.isNumber=!1;if(this.simple=a.simple||!1)this.sa=0;this.setSize(this.w);void 0!==a.sa&&(this.sa=a.sa);void 0!==a.sb&&(this.sb=a.sb);this.simple&&(this.sb=this.w-this.sa);this.sc=void 0===a.sc?47:a.sc;this.objectLink=null;this.isSend=!1;
this.val=null;this.bg=this.isUI?this.main.bg:q.colors.background;this.bgOver=q.colors.backgroundOver;void 0!==a.bg&&(this.bgOver=this.bg=a.bg);void 0!==a.bgOver&&(this.bgOver=a.bgOver);this.titleColor=a.titleColor||q.colors.text;this.fontColor=a.fontColor||q.colors.text;void 0!==a.color&&("n"===a.color&&(a.color="#ff0000"),"no"!==a.color&&(isNaN(a.color)?this.fontColor=a.color:this.fontColor=q.hexToHtml(a.color),this.titleColor=this.fontColor));this.colorPlus=q.ColorLuma(this.fontColor,0.3);this.txt=
a.name||"Proto";this.rename=a.rename||"";this.target=a.target||null;this.callback=void 0===a.callback?null:a.callback;this.endCallback=null;null===this.callback&&this.isUI&&null!==this.main.callback&&(this.callback=this.main.callback);this.c=[];this.s=[];this.c[0]=q.dom("div",q.css.basic+"position:relative; height:20px; float:left; overflow:hidden;");this.s[0]=this.c[0].style;this.isUI&&(this.s[0].marginBottom="1px");this.simple||(this.c[1]=q.dom("div",q.css.txt),this.s[1]=this.c[1].style,this.c[1].textContent=
""===this.rename?this.txt:this.rename,this.s[1].color=this.titleColor);if(a.pos){this.s[0].position="absolute";for(var d in a.pos)this.s[0][d]=a.pos[d];this.mono=!0}a.css&&(this.s[0].cssText=a.css)}function x(a){w.call(this,a);this.value=a.value||!1;this.buttonColor=a.bColor||this.colors.button;this.inh=a.inh||this.h;a=Math.floor(0.5*this.h)-0.5*(this.inh-2);this.c[2]=this.dom("div",this.css.basic+"background:"+this.colors.boolbg+"; height:"+(this.inh-2)+"px; width:36px; top:"+a+"px; border-radius:10px; border:2px solid "+
this.boolbg);this.c[3]=this.dom("div",this.css.basic+"height:"+(this.inh-6)+"px; width:16px; top:"+(a+2)+"px; border-radius:10px; background:"+this.buttonColor+";");this.init();this.update()}function ba(a){w.call(this,a);this.value=!1;this.values=a.value||[this.txt];this.isDown=!1;this.buttonColor=a.bColor||this.colors.button;this.isLoadButton=a.loader||!1;if(this.isDragButton=a.drag||!1)this.isLoadButton=!0;this.lng=this.values.length;this.tmp=[];this.stat=[];for(a=0;a<this.lng;a++)this.c[a+2]=this.dom("div",
this.css.txt+"text-align:center; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+this.radius+"px; line-height:"+(this.h-4)+"px;"),this.c[a+2].style.color=this.fontColor,this.c[a+2].innerHTML=this.values[a],this.stat[a]=1;void 0!==this.c[1]&&(this.c[1].textContent="");this.isLoadButton&&this.initLoader();this.isDragButton&&(this.lng++,this.initDrager());this.init()}function ca(a){w.call(this,a);this.autoWidth=!1;this.buttonColor=this.colors.button;this.setTypeNumber(a);
this.radius=0.5*this.w;this.twoPi=2*Math.PI;this.pi90=0.5*Math.PI;this.offset=new I;this.h=a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.cmode=this.percent=0;this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[3]=this.getCircular();this.setSvg(this.c[3],"d",this.makePath(),1);this.setSvg(this.c[3],
"stroke",this.fontColor,1);this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w);this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top});this.init();this.update()}function Z(a){w.call(this,a);this.ctype=a.ctype||"array";this.wfixe=256<this.sb?256:this.sb;this.side=a.side||"down";this.up="down"===this.side?0:1;this.baseH=this.h;this.offset=new I;this.decal=new I;this.pi90=0.5*Math.PI;this.c[2]=this.dom("div",this.css.txt+"height:"+(this.h-4)+"px;border-radius:"+this.radius+"px; line-height:"+
(this.h-8)+"px;");this.s[2]=this.c[2].style;this.up&&(this.s[2].top="auto",this.s[2].bottom="2px");this.c[3]=this.getColorRing();this.c[3].style.visibility="hidden";this.hsl=null;this.value="#ffffff";void 0!==a.value&&(a.value instanceof Array?this.value=q.rgbToHex(a.value):isNaN(a.value)?this.value=a.value:this.value=q.hexToHtml(a.value));this.bcolor=null;this.isDown=!1;this.setColor(this.value);this.init();void 0!==a.open&&this.open()}function da(a){w.call(this,a);this.round=Math.round;this.autoHeight=
!0;this.baseH=this.h;this.hplus=50;this.res=a.res||40;this.l=1;this.pa1=[];this.pa2=[];this.pa3=[];for(var d=this.res+1;d--;)this.pa1.push(50),this.pa2.push(50),this.pa3.push(50);d=Math.floor(0.5*this.h)-6;this.c[1].textContent="FPS";this.c[0].style.cursor="pointer";this.c[0].style.pointerEvents="auto";this.c[2]=this.dom("path",this.css.basic+("display:none; left:10px; top:"+this.h+"px; height:"+(this.hplus-8)+"px; background: rgba(0, 0, 0, 0.2);border:1px solid rgba(255, 255, 255, 0.2); "),{fill:"rgba(200,200,200,0.3)",
"stroke-width":1,stroke:this.fontColor,"vector-effect":"non-scaling-stroke"});this.c[2].setAttribute("viewBox","0 0 "+this.res+" 42");this.c[2].setAttribute("height","100%");this.c[2].setAttribute("width","100%");this.c[2].setAttribute("preserveAspectRatio","none");this.dom("path",null,{fill:"rgba(255,255,0,0.3)","stroke-width":1,stroke:"#FF0","vector-effect":"non-scaling-stroke"},this.c[2]);this.dom("path",null,{fill:"rgba(0,255,255,0.3)","stroke-width":1,stroke:"#0FF","vector-effect":"non-scaling-stroke"},
this.c[2]);this.c[3]=this.dom("div",this.css.basic+"width:100%; bottom:0px; height:1px; background: rgba(255, 255, 255, 0.2);");this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+d+"px;",{d:"M 3 8 L 8 5 3 2 3 8 Z",fill:this.fontColor,stroke:"none"});this.isShow=a.show||!1;this.c[1].style.marginLeft="10px";this.now=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now;this.prevTime=this.startTime=this.now();this.frames=
0;this.isMem=!1;this.mm=this.mem=this.fps=this.ms=0;self.performance&&self.performance.memory&&(this.isMem=!0);this.init()}function pa(a){w.call(this,a);this.value=void 0!==a.value?a.value:[0,0,0];this.lng=this.value.length;this.precision=void 0!==a.precision?a.precision:2;this.multiplicator=a.multiplicator||1;this.neg=a.neg||!1;this.autoWidth=void 0!==a.autoWidth?a.autoWidth:!0;this.isDown=this.isNumber=!1;this.h=a.h||138;this.rh=this.h-10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&
(this.c[1].style.width=this.w+"px",this.top=10,this.h+=10);this.gh=this.rh-28;this.gw=this.w-28;this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[2].textContent=this.value;a=this.dom("svg",this.css.basic,{viewBox:"0 0 "+this.w+" "+this.rh,width:this.w,height:this.rh,preserveAspectRatio:"none"});this.setCss(a,{width:this.w,height:this.rh,left:0,top:this.top});this.dom("path","",{d:"",stroke:this.colors.text,"stroke-width":2,
fill:"none","stroke-linecap":"butt"},a);this.dom("rect","",{x:10,y:10,width:this.gw+8,height:this.gh+8,stroke:"rgba(0,0,0,0.3)","stroke-width":1,fill:"none"},a);this.iw=(this.gw-4*(this.lng-1))/this.lng;var d=[];this.cMode=[];this.v=[];for(var u=0;u<this.lng;u++)d[u]=[14+u*this.iw+4*u,this.iw],d[u][2]=d[u][0]+d[u][1],this.cMode[u]=0,this.v[u]=this.neg?0.5*(1+this.value[u]/this.multiplicator):this.value[u]/this.multiplicator,this.dom("rect","",{x:d[u][0],y:14,width:d[u][1],height:1,fill:this.fontColor,
"fill-opacity":0.3},a);this.tmp=d;this.c[3]=a;console.log(this.w);this.init();void 0!==this.c[1]&&(this.c[1].style.top="0px",this.c[1].style.height="20px",this.s[1].lineHeight="15px");this.update(!1)}function fa(a){w.call(this,a);this.uis=[];this.autoHeight=!0;this.current=-1;this.target=null;this.decal=0;this.baseH=this.h;var d=Math.floor(0.5*this.h)-6;this.isLine=void 0!==a.line?a.line:!1;this.c[2]=this.dom("div",this.css.basic+"width:100%; left:0; height:auto; overflow:hidden; top:"+this.h+"px");
this.c[3]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:0; top:"+d+"px;",{d:this.svgs.group,fill:this.fontColor,stroke:"none"});this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; left:4px; top:"+d+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"});this.isLine&&(this.c[5]=this.dom("div",this.css.basic+"background:rgba(255, 255, 255, 0.2); width:100%; left:0; height:1px; bottom:0px"));d=this.s;d[0].height=this.h+"px";d[1].height=
this.h+"px";this.c[1].name="group";this.s[1].marginLeft="10px";this.s[1].lineHeight=this.h-4;this.s[1].color=this.fontColor;this.s[1].fontWeight="bold";this.init();void 0!==a.bg&&this.setBG(a.bg);void 0!==a.open&&this.open()}function l(a){w.call(this,a);this.autoWidth=!1;this.value=[0,0];this.joyType="analogique";this.model=void 0!==a.mode?a.mode:0;this.precision=a.precision||2;this.multiplicator=a.multiplicator||1;this.pos=new I;this.tmp=new I;this.interval=null;this.radius=0.5*this.w;this.distance=
0.25*this.radius;this.h=a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.c[2]=this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[2].textContent=this.value;this.c[3]=this.getJoystick(this.model);this.setSvg(this.c[3],"viewBox","0 0 "+this.w+" "+this.w);this.setCss(this.c[3],{width:this.w,height:this.w,
left:0,top:this.top});this.ratio=128/this.w;this.init();this.update(!1)}function e(a){w.call(this,a);this.autoWidth=!1;this.buttonColor=this.colors.button;this.setTypeNumber(a);this.mPI=0.8*Math.PI;this.toDeg=180/Math.PI;this.cirRange=2*this.mPI;this.offset=new I;this.radius=0.5*this.w;this.h=a.h||this.w+10;this.top=0;this.c[0].style.width=this.w+"px";void 0!==this.c[1]&&(this.c[1].style.width=this.w+"px",this.c[1].style.textAlign="center",this.top=10,this.h+=10);this.cmode=this.percent=0;this.c[2]=
this.dom("div",this.css.txt+"text-align:center; top:"+(this.h-20)+"px; width:"+this.w+"px; color:"+this.fontColor);this.c[3]=this.getKnob();this.setSvg(this.c[3],"stroke",this.fontColor,1);this.setSvg(this.c[3],"stroke",this.fontColor,3);this.setSvg(this.c[3],"d",this.makeGrad(),3);this.setSvg(this.c[3],"viewBox","0 0 "+this.ww+" "+this.ww);this.setCss(this.c[3],{width:this.w,height:this.w,left:0,top:this.top});this.r=0;this.init();this.update()}function J(a){w.call(this,a);this.path=a.path||"";this.format=
a.format||"";this.imageSize=a.imageSize||[20,20];this.isWithImage=""!==this.path?!0:!1;this.preLoadComplete=!1;this.tmpImage={};this.tmpUrl=[];this.autoHeight=!1;var d=a.align||"center";this.tMode=this.sMode=0;this.buttonColor=a.bColor||this.colors.button;var u=Math.floor(0.5*this.h)-5;this.c[2]=this.dom("div",this.css.basic+"top:0; display:none;");this.c[3]=this.dom("div",this.css.txt+"text-align:"+d+"; line-height:"+(this.h-4)+"px; top:1px; background:"+this.buttonColor+"; height:"+(this.h-2)+"px; border-radius:"+
this.radius+"px;");this.c[4]=this.dom("path",this.css.basic+"position:absolute; width:10px; height:10px; top:"+u+"px;",{d:this.svgs.arrow,fill:this.fontColor,stroke:"none"});this.scroller=this.dom("div",this.css.basic+"right:5px;  width:10px; background:#666; display:none;");this.c[3].style.color=this.fontColor;this.list=a.list||[];this.items=[];this.prevName="";this.baseH=this.h;this.itemHeight=a.itemHeight||this.h-3;this.full=a.full||!1;this.py=0;this.ww=this.sb;this.isDown=this.scroll=!1;this.current=
null;this.side=a.side||"down";(this.up="down"===this.side?0:1)?(this.c[2].style.top="auto",this.c[3].style.top="auto",this.c[4].style.top="auto",this.c[2].style.bottom=this.h-2+"px",this.c[3].style.bottom="1px",this.c[4].style.bottom=u+"px"):this.c[2].style.top=this.baseH+"px";this.listIn=this.dom("div",this.css.basic+"left:0; top:0; width:100%; background:rgba(0,0,0,0.2);");this.listIn.name="list";this.topList=0;this.c[2].appendChild(this.listIn);this.c[2].appendChild(this.scroller);void 0!==a.value?
isNaN(a.value)?this.value=a.value:this.value=this.list[a.value]:this.value=this.list[0];this.isOpenOnStart=a.open||!1;this.isWithImage&&this.preloadImage();this.setList(this.list);this.init();this.isOpenOnStart&&this.open()}function W(a){w.call(this,a);this.setTypeNumber(a);this.isDown=!1;this.value=[0];this.toRad=1;this.isNumber=!0;this.isVector=this.isAngle=!1;void 0!==a.value&&(isNaN(a.value)?a.value instanceof Array?(this.value=a.value,this.isNumber=!1):a.value instanceof Object&&(this.value=
[],a.value.x&&(this.value[0]=a.value.x),a.value.y&&(this.value[1]=a.value.y),a.value.z&&(this.value[2]=a.value.z),a.value.w&&(this.value[3]=a.value.w),this.isVector=!0):this.value=[a.value]);this.lng=this.value.length;this.tmp=[];a.isAngle&&(this.isAngle=!0,this.toRad=Math.PI/180);this.current=-1;this.prev={x:0,y:0,d:0,v:0};this.cMode=[];for(var d=this.lng;d--;)this.isAngle&&(this.value[d]=(180*this.value[d]/Math.PI).toFixed(this.precision)),this.c[2+d]=this.dom("div",this.css.txtselect+"letter-spacing:-1px; height:"+
(this.h-4)+"px; line-height:"+(this.h-8)+"px;"),a.center&&(this.c[2+d].style.textAlign="center"),this.c[2+d].textContent=this.value[d],this.c[2+d].style.color=this.fontColor,this.c[2+d].isNum=!0,this.cMode[d]=0;this.init()}function U(a){w.call(this,a);this.setTypeNumber(a);this.model=a.stype||0;void 0!==a.mode&&(this.model=a.mode);this.buttonColor=a.bColor||this.colors.button;this.defaultBorderColor=this.colors.hide;this.isOver=this.isDown=!1;this.allway=a.allway||!1;this.firstImput=!1;this.c[2]=
this.dom("div",this.css.txtselect+"text-align:right; width:47px; border:1px dashed "+this.defaultBorderColor+"; color:"+this.fontColor);this.c[3]=this.dom("div",this.css.basic+" top:0; height:"+this.h+"px;");this.c[4]=this.dom("div",this.css.basic+"background:"+this.colors.scrollback+"; top:2px; height:"+(this.h-4)+"px;");this.c[5]=this.dom("div",this.css.basic+"left:4px; top:5px; height:"+(this.h-10)+"px; background:"+this.fontColor+";");this.c[2].isNum=!0;this.c[2].style.height=this.h-2+"px";this.c[2].style.lineHeight=
this.h-10+"px";if(0!==this.model){if(1===this.model||3===this.model)var d=4,u=8,e=this.h-4,h=20;2===this.model&&(d=4,u=8,h=2,e=0.5*(this.h-4));3===this.model&&(this.c[5].style.visible="none");this.c[4].style.borderRadius=d+"px";this.c[4].style.height=u+"px";this.c[4].style.top=0.5*this.h-d+"px";this.c[5].style.borderRadius=0.5*d+"px";this.c[5].style.height=d+"px";this.c[5].style.top=0.5*this.h-0.5*d+"px";this.c[6]=this.dom("div",this.css.basic+"border-radius:"+h+"px; margin-left:"+0.5*-e+"px; border:1px solid "+
this.colors.border+"; background:"+this.buttonColor+"; left:4px; top:2px; height:"+(this.h-4)+"px; width:"+e+"px;")}this.init()}function P(a){w.call(this,a);this.cmode=0;this.value=a.value||"";this.allway=a.allway||!1;this.firstImput=!1;this.c[2]=this.dom("div",this.css.txtselect);this.c[2].textContent=this.value;this.init()}function F(a){w.call(this,a);a=a.prefix||"";this.c[2]=this.dom("div",this.css.txt+"text-align:right; width:60px; line-height:"+(this.h-8)+"px; color:"+this.fontColor);31===this.h&&
(this.s[0].height=this.h+"px",this.s[1].top="8px",this.c[2].style.top="8px");this.c[1].textContent=this.txt.substring(0,1).toUpperCase()+this.txt.substring(1).replace("-"," ");this.c[2].textContent=a;this.init()}function K(){var a=arguments,d,u,h=!1,E=null;"string"===typeof a[0]?(d=a[0],u=a[1]||{}):"object"===typeof a[0]&&(h=!0,void 0===a[2]&&[].push.call(a,{}),d=a[2].type?a[2].type:"slide",u=a[2],u.name=a[1],u.value=a[0][a[1]]);switch(d.toLowerCase()){case "bool":E=new x(u);break;case "button":E=
new ba(u);break;case "circular":E=new ca(u);break;case "color":E=new Z(u);break;case "fps":E=new da(u);break;case "graph":E=new pa(u);break;case "group":E=new fa(u);break;case "joystick":E=new l(u);break;case "knob":E=new e(u);break;case "list":E=new J(u);break;case "numeric":case "number":E=new W(u);break;case "slide":E=new U(u);break;case "textInput":case "string":E=new P(u);break;case "title":E=new F(u)}if(null!==E)return h&&E.setReferency(a[0],a[1]),E}function S(a){this.canvas=null;a=a||{};void 0!==
a.transparent&&(q.colors.background="none",q.colors.backgroundOver="none");this.isReset=!0;this.tmpAdd=null;this.tmpH=0;this.isCanvas=a.isCanvas||!1;this.isCanvasOnly=!1;this.css=void 0!==a.css?a.css:"";this.callback=void 0===a.callback?null:a.callback;this.forceHeight=a.maxHeight||0;this.cn="";this.size=q.size;void 0!==a.p&&(this.size.p=a.p);void 0!==a.w&&(this.size.w=a.w);void 0!==a.h&&(this.size.h=a.h);void 0!==a.s&&(this.size.s=a.s);this.size.h=11>this.size.h?11:this.size.h;this.local=(new I).neg();
this.zone={x:0,y:0,w:this.size.w,h:0};this.mouse=(new I).neg();this.h=0;this.prevY=-1;this.sw=0;this.colors=q.colors;this.bg=a.bg||q.colors.background;this.bh=(this.isWithClose=void 0!==a.close?a.close:!0)?this.size.h:0;this.autoResize=void 0===a.autoResize?!0:a.autoResize;this.isCenter=a.center||!1;this.isOpen=!0;this.isScroll=this.isDown=!1;this.uis=[];this.current=-1;this.target=null;this.decal=0;this.ratio=1;this.oy=0;this.isNewTarget=!1;this.content=q.dom("div",q.css.basic+" width:0px; height:auto; top:0px; "+
this.css);this.innerContent=q.dom("div",q.css.basic+"width:100%; top:0; left:0; height:auto; overflow:hidden;");this.content.appendChild(this.innerContent);this.inner=q.dom("div",q.css.basic+"width:100%; left:0; ");this.innerContent.appendChild(this.inner);this.scrollBG=q.dom("div",q.css.basic+"right:0; top:0; width:"+(this.size.s-1)+"px; height:10px; display:none; background:"+this.bg+";");this.content.appendChild(this.scrollBG);this.scroll=q.dom("div",q.css.basic+"background:"+this.colors.scroll+
"; right:2px; top:0; width:"+(this.size.s-4)+"px; height:10px;");this.scrollBG.appendChild(this.scroll);this.bottom=q.dom("div",q.css.txt+"width:100%; top:auto; bottom:0; left:0; border-bottom-right-radius:10px;  border-bottom-left-radius:10px; text-align:center; height:"+this.bh+"px; line-height:"+(this.bh-5)+"px; border-top:1px solid "+q.colors.stroke+";");this.content.appendChild(this.bottom);this.bottom.textContent="close";this.bottom.style.background=this.bg;this.parent=void 0!==a.parent?a.parent:
null;null!==this.parent||this.isCanvas||(this.parent=document.body,this.isCenter||(this.content.style.right="10px"));null!==this.parent&&this.parent.appendChild(this.content);this.isCanvas&&null===this.parent&&(this.isCanvasOnly=!0);this.isCanvasOnly||(this.content.style.pointerEvents="auto");this.setWidth();this.isCanvas&&this.makeCanvas();$.add(this)}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52));void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});void 0===Function.prototype.name&&
Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}});void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var d=Object(a),u=1;u<arguments.length;u++){var e=arguments[u];if(void 0!==e&&null!==e)for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&(d[h]=e[h])}return d}}();var y={frag:document.createDocumentFragment(),colorRing:null,
joystick_0:null,joystick_1:null,circular:null,knob:null,svgns:"http://www.w3.org/2000/svg",htmls:"http://www.w3.org/1999/xhtml",DOM_SIZE:"height width top left bottom right margin-left margin-right margin-top margin-bottom".split(" "),SVG_TYPE_D:"pattern defs transform stop animate radialGradient linearGradient animateMotion".split(" "),SVG_TYPE_G:"svg rect circle path polygon text g line foreignObject".split(" "),TwoPI:6.283185307179586,size:{w:240,h:20,p:30,s:20},colors:{text:"#C0C0C0",textOver:"#FFFFFF",
background:"rgba(44,44,44,0.3)",backgroundOver:"rgba(11,11,11,0.5)",input:"#005AAA",border:"#454545",borderOver:"#5050AA",borderSelect:"#308AFF",scrollback:"rgba(44,44,44,0.2)",scrollbackover:"rgba(44,44,44,0.5)",button:"#404040",boolbg:"#181818",select:"#308AFF",moving:"#03afff",down:"#024699",stroke:"rgba(11,11,11,0.5)",scroll:"#333333",hide:"rgba(0,0,0,0)"},css:{basic:"position:absolute; pointer-events:none; box-sizing:border-box; margin:0; padding:0; overflow:hidden; -o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select:none;"},
svgs:{group:"M 7 7 L 7 8 8 8 8 7 7 7 M 5 7 L 5 8 6 8 6 7 5 7 M 3 7 L 3 8 4 8 4 7 3 7 M 7 5 L 7 6 8 6 8 5 7 5 M 6 6 L 6 5 5 5 5 6 6 6 M 7 3 L 7 4 8 4 8 3 7 3 M 6 4 L 6 3 5 3 5 4 6 4 M 3 5 L 3 6 4 6 4 5 3 5 M 3 3 L 3 4 4 4 4 3 3 3 Z",arrow:"M 3 8 L 8 5 3 2 3 8 Z",arrowDown:"M 5 8 L 8 3 2 3 5 8 Z",arrowUp:"M 5 2 L 2 7 8 7 5 2 Z"},setText:function(a,d,u,e){d=d||"#CCC";y.colors.text=d;y.css.txt=y.css.basic+"font-family:"+(u||"Monospace")+"; font-size:"+(a||11)+"px; color:"+d+"; padding:2px 10px; left:0; top:2px; height:16px; width:100px; overflow:hidden; white-space: nowrap;";
e&&(y.css.txt+=" text-shadow:"+e+"; ");y.css.txtselect=y.css.txt+"padding:2px 5px; border:1px dashed "+y.colors.border+";";y.css.item=y.css.txt+"position:relative; background:rgba(0,0,0,0.2); margin-bottom:1px;"},clone:function(a){return a.cloneNode(!0)},setSvg:function(a,d,u,e){-1===e?a.setAttributeNS(null,d,u):a.childNodes[e||0].setAttributeNS(null,d,u)},setCss:function(a,d){for(var u in d)-1!==y.DOM_SIZE.indexOf(u)?a.style[u]=d[u]+"px":a.style[u]=d[u]},set:function(a,d){for(var u in d)"txt"===
u&&(a.textContent=d[u]),a.setAttributeNS(null,u,d[u])},get:function(a,d){if(void 0===d)return a;if(!isNaN(d))return a.childNodes[d];if(d instanceof Array){if(2===d.length)return a.childNodes[d[0]].childNodes[d[1]];if(3===d.length)return a.childNodes[d[0]].childNodes[d[1]].childNodes[d[2]]}},dom:function(a,d,u,e,h){a=a||"div";-1!==y.SVG_TYPE_D.indexOf(a)||-1!==y.SVG_TYPE_G.indexOf(a)?"svg"===a?(e=document.createElementNS(y.svgns,"svg"),y.set(e,u)):(void 0===e&&(e=document.createElementNS(y.svgns,"svg")),
y.addAttributes(e,a,u,h)):e=void 0===e?document.createElementNS(y.htmls,a):e.appendChild(document.createElementNS(y.htmls,a));d&&(e.style.cssText=d);return void 0===h?e:e.childNodes[h||0]},addAttributes:function(a,d,u,e){var h=document.createElementNS(y.svgns,d);y.set(h,u);y.get(a,e).appendChild(h);-1!==y.SVG_TYPE_G.indexOf(d)&&(h.style.pointerEvents="none");return h},clear:function(a){for(y.purge(a);a.firstChild;)a.firstChild.firstChild&&y.clear(a.firstChild),a.removeChild(a.firstChild)},purge:function(a){var d=
a.attributes,u,e;if(d)for(u=d.length;u--;)e=d[u].name,"function"===typeof a[e]&&(a[e]=null);if(d=a.childNodes)for(u=d.length;u--;)y.purge(a.childNodes[u])},clamp:function(a,d,u){return a<d?d:a>u?u:a},ColorLuma:function(a,d){a=String(a).replace(/[^0-9a-f]/gi,"");6>a.length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);d=d||0;var u="#",e,h;for(h=0;3>h;h++)e=parseInt(a.substr(2*h,2),16),e=Math.round(Math.min(Math.max(0,e+e*d),255)).toString(16),u+=("00"+e).substr(e.length);return u},findDeepInver:function(a){return 0.6>=
0.3*a[0]+0.59*a[1]+0.11*a[2]},hexToHtml:function(a){return"#"+("000000"+(void 0===a?0:a).toString(16)).substr(-6)},htmlToHex:function(a){return a.toUpperCase().replace("#","0x")},u255:function(a,d){return parseInt(a.substring(d,d+2),16)/255},u16:function(a,d){return parseInt(a.substring(d,d+1),16)/15},unpack:function(a){if(7==a.length)return[y.u255(a,1),y.u255(a,3),y.u255(a,5)];if(4==a.length)return[y.u16(a,1),y.u16(a,2),y.u16(a,3)]},htmlRgb:function(a){return"rgb("+Math.round(255*a[0])+","+Math.round(255*
a[1])+","+Math.round(255*a[2])+")"},rgbToHex:function(a){return"#"+("000000"+(255*a[0]<<16^255*a[1]<<8^255*a[2]<<0).toString(16)).slice(-6)},hueToRgb:function(a,d,u){0>u&&(u+=1);1<u&&(u-=1);return u<1/6?a+6*(d-a)*u:0.5>u?d:u<2/3?a+6*(d-a)*(2/3-u):a},rgbToHsl:function(a){var d=a[0],u=a[1];a=a[2];var e=Math.min(d,u,a),h=Math.max(d,u,a),l=h-e,q=0,y=0,e=(e+h)/2;0<e&&1>e&&(y=l/(0.5>e?2*e:2-2*e));0<l&&(h==d&&h!=u&&(q+=(u-a)/l),h==u&&h!=a&&(q+=2+(a-d)/l),h==a&&h!=d&&(q+=4+(d-u)/l),q/=6);return[q,y,e]},hslToRgb:function(a){var d,
u=a[0];d=a[1];a=a[2];if(0===d)return[a,a,a];d=0.5>=a?a*(d+1):a+d-a*d;a=2*a-d;return[y.hueToRgb(a,d,u+0.33333),y.hueToRgb(a,d,u),y.hueToRgb(a,d,u-0.33333)]},makeGradiant:function(a,d,u,e){y.dom(a,null,d,u,0);a=u.childNodes[0].childNodes.length-1;for(var h=0;h<e.length;h++)d=e[h],y.dom("stop",null,{offset:d[0]+"%",style:"stop-color:"+d[1]+"; stop-opacity:"+d[2]+";"},u,[0,a])},makeKnob:function(a){a=y.dom("svg",y.css.basic,{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});y.dom("circle",
"",{cx:64,cy:64,r:34,fill:y.colors.button,stroke:"rgba(0,0,0,0.3)","stroke-width":8},a);y.dom("path","",{d:"",stroke:y.colors.text,"stroke-width":4,fill:"none","stroke-linecap":"round"},a);y.dom("circle","",{cx:64,cy:64,r:41,stroke:"rgba(0,0,0,0.1)","stroke-width":7,fill:"none"},a);y.dom("path","",{d:"",stroke:"rgba(255,255,255,0.3)","stroke-width":2,fill:"none","stroke-linecap":"round","stroke-opacity":0.5},a);y.knob=a},makeCircular:function(a){a=y.dom("svg",y.css.basic,{viewBox:"0 0 128 128",width:128,
height:128,preserveAspectRatio:"none"});y.dom("circle","",{cx:64,cy:64,r:40,stroke:"rgba(0,0,0,0.1)","stroke-width":10,fill:"none"},a);y.dom("path","",{d:"",stroke:y.colors.text,"stroke-width":7,fill:"none","stroke-linecap":"butt"},a);y.circular=a},makeJoystick:function(a){var d=Math.floor(49),u=Math.floor(0.6*d),e=y.dom("svg",y.css.basic,{viewBox:"0 0 128 128",width:128,height:128,preserveAspectRatio:"none"});y.dom("defs",null,{},e);y.dom("g",null,{},e);if(0===a){var h=[[40,"rgb(0,0,0)",0.3],[80,
"rgb(0,0,0)",0],[90,"rgb(50,50,50)",0.4],[100,"rgb(50,50,50)",0]];y.makeGradiant("radialGradient",{id:"grad",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},e,h);h=[[60,"rgb(0,0,0)",0.5],[100,"rgb(0,0,0)",0]];y.makeGradiant("radialGradient",{id:"gradS",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},e,h);h=["rgb(40,40,40)","rgb(48,48,48)","rgb(30,30,30)"];a=["rgb(1,90,197)","rgb(3,95,207)","rgb(0,65,167)"];h=[[30,h[0],1],[60,h[1],1],[80,h[1],1],[100,h[2],1]];y.makeGradiant("radialGradient",{id:"gradIn",
cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},e,h);h=[[30,a[0],1],[60,a[1],1],[80,a[1],1],[100,a[2],1]];y.makeGradiant("radialGradient",{id:"gradIn2",cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},e,h);y.dom("circle","",{cx:64,cy:64,r:d,fill:"url(#grad)"},e);y.dom("circle","",{cx:69,cy:74,r:u+10,fill:"url(#gradS)"},e);y.dom("circle","",{cx:64,cy:64,r:u,fill:"url(#gradIn)"},e);y.joystick_0=e}else h=[[69,"rgb(0,0,0)",0],[70,"rgb(0,0,0)",0.3],[100,"rgb(0,0,0)",0]],y.makeGradiant("radialGradient",{id:"gradX",
cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"},e,h),y.dom("circle","",{cx:64,cy:64,r:d,fill:"none",stroke:"rgba(100,100,100,0.25)","stroke-width":"4"},e),y.dom("circle","",{cx:64,cy:64,r:u+14,fill:"url(#gradX)"},e),y.dom("circle","",{cx:64,cy:64,r:u,fill:"none",stroke:"rgb(100,100,100)","stroke-width":"4"},e),y.joystick_1=e},makeColorRing:function(){var a=y.dom("svg",y.css.basic,{viewBox:"0 0 256 256",width:256,height:256,preserveAspectRatio:"none"});y.dom("defs",null,{},a);y.dom("g",null,{},a);var d=
8/108/24*Math.PI,u=0,e,h,l,q,s,w=[];for(s=0;24>=s;++s){l=s/24;q=l*y.TwoPI;e=0.5*(u+q);h=1/Math.cos(0.5*(q-u));u=[Math.sin(u),-Math.cos(u),Math.sin(e)*h,-Math.cos(e)*h,Math.sin(q),-Math.cos(q)];w[1]=y.rgbToHex(y.hslToRgb([l,1,0.5]));if(0<s){for(l=6;l--;)u[l]=(108*u[l]+128).toFixed(2);l=" M"+u[0]+" "+u[1]+" Q"+u[2]+" "+u[3]+" "+u[4]+" "+u[5];e=[[0,w[0],1],[100,w[1],1]];y.makeGradiant("linearGradient",{id:"G"+s,x1:u[0],y1:u[1],x2:u[4],y2:u[5],gradientUnits:"userSpaceOnUse"},a,e);y.dom("path","",{d:l,
"stroke-width":40,stroke:"url(#G"+s+")","stroke-linecap":"butt"},a,1)}u=q-d;w[0]=w[1]}e=[[0,"#FFFFFF",1],[50,"#FFFFFF",0],[50,"#000000",0],[100,"#000000",1]];y.makeGradiant("linearGradient",{id:"GL1",x1:68,y1:68,x2:68,y2:188,gradientUnits:"userSpaceOnUse"},a,e);e=[[0,"#7f7f7f",0],[50,"#7f7f7f",0.5],[100,"#7f7f7f",1]];y.makeGradiant("linearGradient",{id:"GL2",x1:68,y1:68,x2:188,y2:68,gradientUnits:"userSpaceOnUse"},a,e);y.dom("circle","",{cx:128,cy:128,r:90,fill:"red"},a);y.dom("circle","",{cx:128,
cy:128,r:90,fill:"url(#GL2)"},a);y.dom("circle","",{cx:128,cy:128,r:90,fill:"url(#GL1)"},a);y.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#FFF",fill:"none"},a);y.dom("circle","",{cx:0,cy:0,r:6,"stroke-width":3,stroke:"#000",fill:"none"},a);y.colorRing=a},icon:function(a,d,u){u=u||40;d=d||"#DEDEDE";u=["<svg xmlns='"+y.svgns+"' version='1.1' xmlns:xlink='"+y.htmls+"' style='pointer-events:none;' preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='"+u+"px' height='"+u+"px' viewBox='0 0 256 256'><g>"];
switch(a){case "logo":u[1]="<path id='logoin' stroke='"+d+"' stroke-width='16' stroke-linejoin='round' stroke-linecap='square' fill='none' d='M 192 44 L 192 148 Q 192 174.5 173.3 193.25 154.55 212 128 212 101.5 212 82.75 193.25 64 174.5 64 148 L 64 44 M 160 44 L 160 148 Q 160 161.25 150.65 170.65 141.25 180 128 180 114.75 180 105.35 170.65 96 161.25 96 148 L 96 44'/>";break;case "save":u[1]="<path stroke='"+d+"' stroke-width='4' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 26.125 17 L 20 22.95 14.05 17 M 20 9.95 L 20 22.95'/><path stroke='"+
d+"' stroke-width='2.5' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 32.6 23 L 32.6 25.5 Q 32.6 28.5 29.6 28.5 L 10.6 28.5 Q 7.6 28.5 7.6 25.5 L 7.6 23'/>"}u[2]="</g></svg>";return u.join("\n")}};y.setText();var q=y,h={ui:[],ID:null,lock:!1,wlock:!1,current:-1,needReZone:!0,isEventsInit:!1,prevDefault:["contextmenu","mousedown","mousemove","mouseup"],xmlserializer:new XMLSerializer,tmpTime:null,tmpImage:null,oldCursor:"auto",input:null,parent:null,firstImput:!0,callbackImput:null,
isLoop:!1,listens:[],e:{type:null,clientX:0,clientY:0,keyCode:NaN,key:null,delta:0},isMobile:!1,add:function(a){h.ui.push(a);h.getZone(a);h.isEventsInit||h.initEvents()},testMobile:function(){var a=navigator.userAgent;return a.match(/Android/i)||a.match(/webOS/i)||a.match(/iPhone/i)||a.match(/iPad/i)||a.match(/iPod/i)||a.match(/BlackBerry/i)||a.match(/Windows Phone/i)?!0:!1},remove:function(a){var d=h.ui.indexOf(a);-1!==d&&(h.removeListen(a),h.ui.splice(d,1));0===h.ui.length&&h.removeEvents()},initEvents:function(){if(!h.isEventsInit){var a=
document.body;h.isMobile=h.testMobile();h.isMobile?(a.addEventListener("touchstart",h,!1),a.addEventListener("touchend",h,!1),a.addEventListener("touchmove",h,!1)):(a.addEventListener("mousedown",h,!1),a.addEventListener("contextmenu",h,!1),a.addEventListener("wheel",h,!1),document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",h,!1));window.addEventListener("keydown",h,!1);window.addEventListener("resize",h.resize,!1);h.isEventsInit=!0}},removeEvents:function(){if(h.isEventsInit){var a=
document.body;h.isMobile?(a.removeEventListener("touchstart",h,!1),a.removeEventListener("touchend",h,!1),a.removeEventListener("touchmove",h,!1)):(a.removeEventListener("mousedown",h,!1),a.removeEventListener("contextmenu",h,!1),a.removeEventListener("wheel",h,!1),document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",h,!1));window.removeEventListener("keydown",h);window.removeEventListener("resize",h.resize);h.isEventsInit=!1}},resize:function(){h.needReZone=!0;for(var a=
h.ui.length,d;a--;)d=h.ui[a],d.isGui&&!d.isCanvasOnly&&d.autoResize&&d.setHeight()},handleEvent:function(a){-1!==a.type.indexOf(h.prevDefault)&&a.preventDefault();if("contextmenu"!==a.type){h.findZone();var d=h.e;"keydown"===a.type&&h.editText(a);d.delta="wheel"===a.type?0<a.deltaY?1:-1:0;d.clientX=a.clientX||0;d.clientY=a.clientY||0;d.type=a.type;h.isMobile&&(a.touches&&0<a.touches.length&&(d.clientX=a.touches[0].clientX||0,d.clientY=a.touches[0].clientY||0),"touchstart"===a.type&&(d.type="mousedown"),
"touchend"===a.type&&(d.type="mouseup"),"touchmove"===a.type&&(d.type="mousemove"));"mousedown"===d.type&&(h.lock=!0);"mouseup"===d.type&&(h.lock=!1);h.isMobile&&"mousedown"===d.type&&h.findID(d);"mousemove"!==d.type||h.lock||h.findID(d);null!==h.ID&&(h.ID.isCanvasOnly&&(d.clientX=h.ID.mouse.x,d.clientY=h.ID.mouse.y),h.ID.handleEvent(d));h.isMobile&&"mouseup"===d.type&&h.clearOldID()}},findID:function(a){for(var d=h.ui.length,u=-1,e,l,q;d--;)if(e=h.ui[d],e.isCanvasOnly?(l=e.mouse.x,q=e.mouse.y):(l=
a.clientX,q=a.clientY),h.onZone(e,l,q)){u=d;u!==h.current&&(h.clearOldID(),h.current=u,h.ID=e);break}-1===u&&h.clearOldID()},clearOldID:function(){h.ID&&(h.current=-1,h.ID.reset(),h.ID=null,h.cursor())},calcUis:function(a,d,u){var e=a.length,h,l,q=0,y=0;for(l=0;l<e;l++)h=a[l],h.zone.w=h.w,h.zone.h=h.h,h.autoWidth?(h.zone.x=d.x,h.zone.y=u,u+=h.h+1):(0===q&&(u+=h.h+1),h.zone.x=d.x+q,h.zone.y=0===q?u-h.h:y,y=h.zone.y,q+=h.w,q+h.w>d.w&&(q=0)),h.isGroup&&h.calcUis()},findTarget:function(a,d){for(var u=
a.length;u--;)if(h.onZone(a[u],d.clientX,d.clientY))return u;return-1},findZone:function(a){if(h.needReZone||a){a=h.ui.length;for(var d;a--;)d=h.ui[a],h.getZone(d),d.isGui&&d.calcUis();h.needReZone=!1}},onZone:function(a,d,u){if(void 0===d||void 0===u)return!1;var e=a.zone;d-=e.x;u-=e.y;(e=0<=d&&0<=u&&d<=e.w&&u<=e.h)?a.local.set(d,u):a.local.neg();return e},getZone:function(a){if(!a.isCanvasOnly){var d=a.getDom().getBoundingClientRect();a.zone={x:d.left,y:d.top,w:d.width,h:d.height}}},cursor:function(a){a=
a?a:"auto";a!==h.oldCursor&&(document.body.style.cursor=a,h.oldCursor=a)},toCanvas:function(a,d,u,e){e&&null!==h.tmpTime&&(clearTimeout(h.tmpTime),h.tmpTime=null);if(null===h.tmpTime){h.lock&&(h.tmpTime=setTimeout(function(){h.tmpTime=null},10));var l=!1;if(d!==a.canvas.width||u!==a.canvas.height)l=!0;null===h.tmpImage&&(h.tmpImage=new Image);e=h.tmpImage;var q=h.xmlserializer.serializeToString(a.content);e.onload=function(){var e=a.canvas.getContext("2d");l?(a.canvas.width=d,a.canvas.height=u):e.clearRect(0,
0,d,u);e.drawImage(this,0,0);a.onDraw()};e.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="'+d+'" height="'+u+'"><foreignObject style="pointer-events: none; left:0;" width="100%" height="100%">'+q+"</foreignObject></svg>");e.crossOrigin=""}},clearInput:function(){null!==h.input&&(h.firstImput||h.callbackImput(),h.input.style.borderColor=h.parent.defaultBorderColor,h.parent.isEdit=!1,h.callbackImput=null,h.input=null,h.parent=null,h.firstImput=
!0)},setInput:function(a,d,u,e){h.clearInput();h.callbackImput=d;h.input=a;h.parent=e;h.input.style.borderColor=u},select:function(){document.execCommand("selectall",null,!1)},editText:function(a){if(null!==h.input)if(h.parent.isEdit=!0,a.preventDefault(),13===a.keyCode)h.callbackImput(),h.clearInput();else if(8===a.keyCode)h.input.textContent="";else if(h.input.isNum){if(95<a.keyCode&&106>a.keyCode||110===a.keyCode||109===a.keyCode)h.firstImput?(h.input.textContent=a.key,h.firstImput=!1):h.input.textContent+=
a.key}else h.firstImput?(h.input.textContent=a.key,h.firstImput=!1):h.input.textContent+=a.key},loop:function(){h.isLoop&&requestAnimationFrame(h.loop);h.update()},update:function(){for(var a=h.listens.length;a--;)h.listens[a].listening()},removeListen:function(a){a=h.listens.indexOf(a);-1!==a&&h.listens.splice(a,1);0===h.listens.length&&(h.isLoop=!1)},addListen:function(a){-1===h.listens.indexOf(a)&&(h.listens.push(a),h.isLoop||(h.isLoop=!0,h.loop()))}},$=h;Object.assign(I.prototype,{set:function(a,
d){this.x=a;this.y=d;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divideScalar:function(a){return this.multiplyScalar(1/a)},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},angle:function(){var a=Math.atan2(this.y,this.x);0>a&&(a+=2*Math.PI);return a},addScalar:function(a){this.x+=a;this.y+=a;return this},negate:function(){this.x*=-1;this.y*=
-1;return this},neg:function(){this.y=this.x=-1;return this},isZero:function(){return 0===this.x&&0===this.y},copy:function(a){this.x=a.x;this.y=a.y;return this},equals:function(a){return a.x===this.x&&a.y===this.y},nearEquals:function(a,d){return a.x.toFixed(d)===this.x.toFixed(d)&&a.y.toFixed(d)===this.y.toFixed(d)},lerp:function(a,d){null===a?(this.x-=this.x*d,this.y-=this.y*d):(this.x+=(a.x-this.x)*d,this.y+=(a.y-this.y)*d);return this}});Object.assign(w.prototype,{constructor:w,init:function(){var a=
this.s,d=this.c;a[0].height=this.h+"px";this.zone.h=this.h;this.isUI&&(a[0].background=this.bg);void 0!==d[1]&&this.autoWidth&&(a[1]=d[1].style,a[1].height=this.h-4+"px",a[1].lineHeight=this.h-8+"px");for(var u=q.frag,e=1,h=d.length;e!==h;e++)void 0!==d[e]&&(u.appendChild(d[e]),a[e]=d[e].style);null!==this.target?this.target.appendChild(d[0]):this.isUI?this.main.inner.appendChild(d[0]):document.body.appendChild(d[0]);d[0].appendChild(u);this.rSize();this.isUI||(this.c[0].style.pointerEvents="auto",
$.add(this))},dom:function(a,d,e,h,l){return q.dom(a,d,e,h,l)},setSvg:function(a,d,e,h){q.setSvg(a,d,e,h)},setCss:function(a,d){q.setCss(a,d)},clamp:function(a,d,e){return q.clamp(a,d,e)},getColorRing:function(){q.colorRing||q.makeColorRing();return q.clone(q.colorRing)},getJoystick:function(a){q["joystick_"+a]||q.makeJoystick(a);return q.clone(q["joystick_"+a])},getCircular:function(a){q.circular||q.makeCircular(a);return q.clone(q.circular)},getKnob:function(a){q.knob||q.makeKnob(a);return q.clone(q.knob)},
cursor:function(a){$.cursor(a)},setInput:function(a,d){$.setInput(a,d,q.colors.input,this)},update:function(){},reset:function(){},getDom:function(){return this.c[0]},uiout:function(){this.s[0].background=this.bg},uiover:function(){this.s[0].background=this.bgOver},rename:function(a){void 0!==this.c[1]&&(this.c[1].textContent=a)},listen:function(){$.addListen(this);return this},listening:function(){null!==this.objectLink&&(this.isSend||this.isEdit||this.setValue(this.objectLink[this.val]))},setValue:function(a){this.value=
this.isNumber?this.numValue(a):a;this.update()},onChange:function(a){this.callback=a;return this},onFinishChange:function(a){this.callback=null;this.endCallback=a;return this},send:function(a){this.isSend=!0;null!==this.objectLink&&(this.objectLink[this.val]=a||this.value);this.callback&&this.callback(a||this.value);this.isSend=!1},sendEnd:function(a){this.endCallback&&this.endCallback(a||this.value);null!==this.objectLink&&(this.objectLink[this.val]=a||this.value)},clear:function(){q.clear(this.c[0]);
null!==this.target?this.target.removeChild(this.c[0]):this.isUI?this.main.clearOne(this):document.body.removeChild(this.c[0]);this.isUI||$.remove(this);this.target=this.callback=this.s=this.c=null},setSize:function(a){this.autoWidth&&(this.w=a,this.simple?this.sb=this.w-this.sa:(a=this.p/100*this.w,this.sa=Math.floor(a+10),this.sb=Math.floor(this.w-a-20)))},rSize:function(){this.autoWidth&&(this.s[0].width=this.w+"px",this.simple||(this.s[1].width=this.sa+"px"))},setTypeNumber:function(a){this.isNumber=
!0;this.value=0;void 0!==a.value&&(this.value="string"===typeof a.value?1*a.value:a.value);this.min=void 0===a.min?-Infinity:a.min;this.max=void 0===a.max?Infinity:a.max;this.precision=void 0===a.precision?2:a.precision;var d;switch(this.precision){case 0:d=1;break;case 1:d=0.1;break;case 2:d=0.01;break;case 3:d=0.001;break;case 4:d=1E-4}this.step=void 0===a.step?d:a.step;this.range=this.max-this.min;this.value=this.numValue(this.value)},numValue:function(a){return 1*Math.min(this.max,Math.max(this.min,
a)).toFixed(this.precision)},handleEvent:function(a){return this[a.type](a)},wheel:function(a){return!1},mousedown:function(a){return!1},mousemove:function(a){return!1},mouseup:function(a){return!1},keydown:function(a){return!1},setReferency:function(a,d){this.objectLink=a;this.val=d},display:function(a){this.s[0].display=a?"block":"none"},open:function(){this.isOpen||(this.isOpen=!0)},close:function(){this.isOpen&&(this.isOpen=!1)},needZone:function(){$.needReZone=!0}});x.prototype=Object.assign(Object.create(w.prototype),
{constructor:x,mousemove:function(a){this.cursor("pointer")},mousedown:function(a){this.value=this.value?!1:!0;this.update();this.send();return!0},update:function(){var a=this.s;this.value?(a[2].background=this.fontColor,a[2].borderColor=this.fontColor,a[3].marginLeft="17px"):(a[2].background=this.colors.boolbg,a[2].borderColor=this.colors.boolbg,a[3].marginLeft="2px")},rSize:function(){w.prototype.rSize.call(this);var a=this.s;a[2].left=this.sa+"px";a[3].left=this.sa+1+"px"}});ba.prototype=Object.assign(Object.create(w.prototype),
{constructor:ba,testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";for(var d=this.lng,e=this.tmp;d--;)if(a.x>e[d][0]&&a.x<e[d][2])return d+2;return""},mouseup:function(a){return this.isDown?(this.isDown=this.value=!1,this.mousemove(a)):!1},mousedown:function(a){var d=this.testZone(a);if(!d)return!1;this.isDown=!0;this.value=this.values[d-2];this.isLoadButton||this.send();return this.mousemove(a)},mousemove:function(a){var d=!1;a=this.testZone(a);""!==a?(this.cursor("pointer"),d=this.modes(this.isDown?
3:2,a)):d=this.reset();return d},modes:function(a,d){for(var e,h=!1,l=0;l<this.lng;l++)(e=l===d-2?this.mode(a,l+2):this.mode(1,l+2))&&(h=!0);return h},mode:function(a,d){var e=!1,h=d-2;if(this.stat[h]!==a){switch(a){case 1:this.stat[h]=1;this.s[h+2].color=this.fontColor;this.s[h+2].background=this.buttonColor;break;case 2:this.stat[h]=2;this.s[h+2].color="#FFF";this.s[h+2].background=this.colors.select;break;case 3:this.stat[h]=3,this.s[h+2].color="#FFF",this.s[h+2].background=this.colors.down}e=
!0}return e},reset:function(){this.cursor();return this.modes(1,2)},dragover:function(a){a.preventDefault();this.s[4].borderColor=this.colors.select;this.s[4].color=this.colors.select},dragend:function(a){a.preventDefault();this.s[4].borderColor=this.fontColor;this.s[4].color=this.fontColor},drop:function(a){a.preventDefault();this.dragend(a);this.fileSelect(a.dataTransfer.files[0])},initDrager:function(){this.c[4]=this.dom("div",this.css.txt+" text-align:center; line-height:"+(this.h-8)+"px; border:1px dashed "+
this.fontColor+"; top:2px;  height:"+(this.h-4)+"px; border-radius:"+this.radius+"px; pointer-events:auto;");this.c[4].textContent="DRAG";this.c[4].addEventListener("dragover",function(a){this.dragover(a)}.bind(this),!1);this.c[4].addEventListener("dragend",function(a){this.dragend(a)}.bind(this),!1);this.c[4].addEventListener("dragleave",function(a){this.dragend(a)}.bind(this),!1);this.c[4].addEventListener("drop",function(a){this.drop(a)}.bind(this),!1)},initLoader:function(){this.c[3]=this.dom("input",
this.css.basic+"top:0px; opacity:0; height:"+this.h+"px; pointer-events:auto; cursor:pointer;");this.c[3].name="loader";this.c[3].type="file";this.c[3].addEventListener("change",function(a){this.fileSelect(a.target.files[0])}.bind(this),!1)},fileSelect:function(a){var d=["png","jpg","mp4","webm","ogg"],e=["sea","z","hex","bvh","BVH"];if(void 0!==a){var h=new FileReader,l=a.name,q=l.substring(l.lastIndexOf(".")+1,l.length);-1!==d.indexOf(q)?h.readAsDataURL(a):-1!==e.indexOf(q)?h.readAsArrayBuffer(a):
h.readAsText(a);h.onload=function(a){this.callback&&this.callback(a.target.result,l,q)}.bind(this)}},label:function(a,d){this.c[d||2].textContent=a},icon:function(a,d,e){e=e||2;this.s[e].padding=(d||0)+"px 0px";this.c[e].innerHTML=a},rSize:function(){w.prototype.rSize.call(this);for(var a=this.s,d=this.sa,e=this.lng,h=Math.floor((this.sb-3*(e-1))/e);e--;)this.tmp[e]=[Math.floor(d+h*e+3*e),h],this.tmp[e][2]=this.tmp[e][0]+this.tmp[e][1],a[e+2].left=this.tmp[e][0]+"px",a[e+2].width=this.tmp[e][1]+"px";
this.isDragButton&&(a[4].left=d+h+3+"px",a[4].width=h+"px");this.isLoadButton&&(a[3].left=d+"px",a[3].width=h+"px")}});ca.prototype=Object.assign(Object.create(w.prototype),{constructor:ca,mode:function(a){if(this.cmode===a)return!1;switch(a){case 0:this.s[2].color=this.fontColor;this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.1)",0);this.setSvg(this.c[3],"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"stroke","rgba(0,0,0,0.3)",0),this.setSvg(this.c[3],"stroke",
this.colorPlus,1)}this.cmode=a;return!0},reset:function(){this.isDown=!1},mouseup:function(a){this.isDown=!1;this.sendEnd();return this.mode(0)},mousedown:function(a){this.isDown=!0;this.old=this.value;this.oldr=null;this.mousemove(a);return this.mode(1)},mousemove:function(a){if(this.isDown){var d=this.offset;d.x=this.radius-(a.clientX-this.zone.x);d.y=this.radius-(a.clientY-this.zone.y-this.top);this.r=d.angle()-this.pi90;this.r=(this.r%this.twoPi+this.twoPi)%this.twoPi;null!==this.oldr&&(a=this.r-
this.oldr,this.r=Math.abs(a)>Math.PI?this.oldr:this.r,6<a&&(this.r=0),-6>a&&(this.r=this.twoPi));a=1/this.twoPi*this.range*this.r+this.min-this.old;if(a>=this.step||a<=this.step)a=~~(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,this.oldr=this.r}},makePath:function(){var a=this.percent*this.twoPi-0.001,d=40*Math.sin(a)+64,e=40-40*Math.cos(a)+24;return"M 64,24 A 40,40 0 "+(a>Math.PI?1:0)+" 1 "+d+","+e},update:function(a){this.c[2].textContent=this.value;
this.percent=(this.value-this.min)/this.range;this.setSvg(this.c[3],"d",this.makePath(),1);a&&this.send()}});Z.prototype=Object.assign(Object.create(w.prototype),{constructor:Z,testZone:function(a,d){var e=this.local;if(-1===e.x&&-1===e.y)return"";if(this.up&&this.isOpen)return e.y>this.wfixe?"title":"color";if(e.y<this.baseH+2)return"title";if(this.isOpen)return"color"},mouseup:function(a){this.isDown=!1},mousedown:function(a){var d=this.testZone(a.clientX,a.clientY);if("title"===d)return this.isOpen?
this.close():this.open(),!0;"color"===d&&(this.isDown=!0,this.mousemove(a))},mousemove:function(a){var d=this.testZone(a.clientX,a.clientY);"title"===d&&this.cursor("pointer");"color"===d&&(this.cursor("crosshair"),this.isDown&&(d=this.offset,d.x=a.clientX-(this.zone.x+this.decal.x+this.mid),d.y=a.clientY-(this.zone.y+this.decal.y+this.mid),a=d.length()*this.ratio,128>a&&(88<a?(d=(d.angle()+this.pi90)/6.28,this.setHSL([(d+1)%1,this.hsl[1],this.hsl[2]])):(a=Math.max(0,Math.min(1,0.5-d.x*this.square*
0.5)),d=Math.max(0,Math.min(1,0.5-d.y*this.square*0.5)),this.setHSL([this.hsl[0],a,d])))))},setHeight:function(){this.h=this.isOpen?this.wfixe+this.baseH+5:this.baseH;this.s[0].height=this.h+"px";this.zone.h=this.h},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){w.prototype.open.call(this);this.setHeight();this.up&&(this.zone.y-=this.wfixe+5);var a=this.h-this.baseH;this.s[3].visibility="visible";this.parentHeight(a)},close:function(){w.prototype.close.call(this);
this.up&&(this.zone.y+=this.wfixe+5);var a=this.h-this.baseH;this.setHeight();this.s[3].visibility="hidden";this.parentHeight(-a)},update:function(a){var d=q.rgbToHex(q.hslToRgb([this.hsl[0],1,0.5]));this.moveMarkers();this.value=this.bcolor;this.setSvg(this.c[3],"fill",d,2);this.s[2].background=this.bcolor;this.c[2].textContent=q.htmlToHex(this.bcolor);this.invert=q.findDeepInver(this.rgb);this.s[2].color=this.invert?"#fff":"#000";a&&("array"===this.ctype&&this.send(this.rgb),"rgb"===this.ctype&&
this.send(q.htmlRgb(this.rgb)),"hex"===this.ctype&&this.send(q.htmlToHex(this.value)),"html"===this.ctype&&this.send())},setColor:function(a){var d=q.unpack(a);this.bcolor!=a&&d&&(this.bcolor=a,this.rgb=d,this.hsl=q.rgbToHsl(this.rgb),this.update());return this},setHSL:function(a){this.hsl=a;this.rgb=q.hslToRgb(a);this.bcolor=q.rgbToHex(this.rgb);this.update(!0);return this},moveMarkers:function(){var a=this.invert?"#fff":"#000",d=6.28*this.hsl[0],d=(new I(108*Math.sin(d),108*-Math.cos(d))).addScalar(128);
this.setSvg(this.c[3],"cx",d.x,5);this.setSvg(this.c[3],"cy",d.y,5);d.set(120*(0.5-this.hsl[1]),120*(0.5-this.hsl[2])).addScalar(128);this.setSvg(this.c[3],"cx",d.x,6);this.setSvg(this.c[3],"cy",d.y,6);this.setSvg(this.c[3],"stroke",a,6)},rSize:function(){w.prototype.rSize.call(this);var a=this.s;a[2].width=this.sb+"px";a[2].left=this.sa+"px";this.decal.x=Math.floor(0.5*(this.w-this.wfixe));this.decal.y="up"===this.side?2:this.baseH+2;this.mid=Math.floor(0.5*this.wfixe);this.setSvg(this.c[3],"viewBox",
"0 0 "+this.wfixe+" "+this.wfixe);a[3].width=this.wfixe+"px";a[3].height=this.wfixe+"px";a[3].left=this.decal.x+"px";a[3].top=this.decal.y+"px";this.ratio=256/this.wfixe;this.square=1/(this.wfixe/256*60);this.setHeight()}});da.prototype=Object.assign(Object.create(w.prototype),{constructor:da,mousedown:function(a){this.isShow?this.hide():this.show()},mode:function(a){var d=this.s;switch(a){case 0:d[1].color=this.fontColor;break;case 1:d[1].color="#FFF";break;case 2:d[1].color=this.fontColor}},makePath:function(a){var d;
d="M -1 50";for(var e=0;e<this.res+1;e++)d+=" L "+e+" "+a[e];return d+=" L "+(this.res+1)+" 50"},drawGraph:function(){var a=this.c[2];this.pa1.shift();this.pa1.push(8.5+this.round(30*(1-this.fps/100)));this.setSvg(a,"d",this.makePath(this.pa1),0);this.pa2.shift();this.pa2.push(8.5+this.round(30*(1-this.ms/200)));this.setSvg(a,"d",this.makePath(this.pa2),1);this.isMem&&(this.pa3.shift(),this.pa3.push(8.5+this.round(30*(1-this.mm))),this.setSvg(a,"d",this.makePath(this.pa3),2))},show:function(){this.h=
this.hplus+this.baseH;this.setSvg(this.c[4],"d","M 5 8 L 8 3 2 3 5 8 Z");null!==this.parentGroup?this.parentGroup.calc(this.hplus):this.isUI&&this.main.calc(this.hplus);this.s[0].height=this.h+"px";this.s[2].display="block";this.isShow=!0;$.addListen(this)},hide:function(){this.h=this.baseH;this.setSvg(this.c[4],"d","M 3 8 L 8 5 3 2 3 8 Z");null!==this.parentGroup?this.parentGroup.calc(-this.hplus):this.isUI&&this.main.calc(-this.hplus);this.s[0].height=this.h+"px";this.s[2].display="none";this.isShow=
!1;$.removeListen(this);this.c[1].textContent="FPS"},begin:function(){this.startTime=this.now()},end:function(){var a=this.now();this.ms=a-this.startTime;this.frames++;if(a>this.prevTime+1E3&&(this.fps=this.round(1E3*this.frames/(a-this.prevTime)),this.prevTime=a,this.frames=0,this.isMem)){var d=performance.memory.usedJSHeapSize,e=performance.memory.jsHeapSizeLimit;this.mem=this.round(9.54E-7*d);this.mm=d/e}this.drawGraph();this.c[1].innerHTML="FPS "+this.fps+'<font color="yellow"> MS '+(this.ms|
0)+'</font><font color="cyan"> MB '+this.mem+"</font>";return a},listening:function(){this.startTime=this.end()},rSize:function(){this.s[0].width=this.w+"px";this.s[1].width=this.w+"px";this.s[2].left="10px";this.s[2].width=this.w-20+"px"}});pa.prototype=Object.assign(Object.create(w.prototype),{constructor:pa,updateSVG:function(){this.setSvg(this.c[3],"d",this.makePath(),0);for(var a=0;a<this.lng;a++)this.setSvg(this.c[3],"height",this.v[a]*this.gh,a+2),this.setSvg(this.c[3],"y",14+(this.gh-this.v[a]*
this.gh),a+2),this.value[a]=this.neg?1*((2*this.v[a]-1)*this.multiplicator).toFixed(this.precision):1*(this.v[a]*this.multiplicator).toFixed(this.precision);this.c[2].textContent=this.value},testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";var d=this.lng,e=this.tmp;if(a.y>this.top&&a.y<this.h-20)for(;d--;)if(a.x>e[d][0]&&a.x<e[d][2])return d;return""},mode:function(a,d){if(a===this.cMode[d])return!1;var e;switch(a){case 0:e=0.3;break;case 1:e=0.6;break;case 2:e=1}this.reset();this.setSvg(this.c[3],
"fill-opacity",e,d+2);this.cMode[d]=a;return!0},reset:function(){for(var a=!1,d=this.lng;d--;)0!==this.cMode[d]&&(this.cMode[d]=0,this.setSvg(this.c[3],"fill-opacity",0.3,d+2),a=!0);return a},mouseup:function(a){this.isDown=!1;if(-1!==this.current)return this.reset()},mousedown:function(a){this.isDown=!0;return this.mousemove(a)},mousemove:function(a){var d=!1,e=this.testZone(a);""===e?d=this.reset():(d=this.mode(this.isDown?2:1,e),this.isDown&&(this.v[e]=this.clamp(1-(a.clientY-this.zone.y-this.top-
10)/this.gh,0,1),this.update(!0)));return d},update:function(a){this.updateSVG();a&&this.send()},makePath:function(){for(var a="",d,e,h,l,q,y,s=0;s<this.lng;s++)d=14+(this.gh-this.v[s]*this.gh),e=14+s*this.iw+4*s,l=e+0.5*this.iw,h=e+this.iw,a=0===s?a+("M "+e+" "+d+" T "+l+" "+d):a+(" C "+q+" "+y+","+e+" "+d+","+l+" "+d),s===this.lng-1&&(a+=" T "+h+" "+d),q=h,y=d;return a},rSize:function(){w.prototype.rSize.call(this);var a=this.s;void 0!==this.c[1]&&(a[1].width=this.w+"px");a[2].width=this.w+"px";
a[3].width=this.w+"px";for(var a=(this.w-28-4*(this.lng-1))/this.lng,d=[],e=0;e<this.lng;e++)d[e]=[14+e*a+4*e,a],d[e][2]=d[e][0]+d[e][1];this.tmp=d}});fa.prototype=Object.assign(Object.create(w.prototype),{constructor:fa,isGroup:!0,testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";var d="";a.y<this.baseH?d="title":this.isOpen&&(d="content");return d},clearTarget:function(){if(-1===this.current)return!1;this.target.uiout();this.target.reset();this.current=-1;this.target=null;$.cursor();
return!0},reset:function(){this.clearTarget()},handleEvent:function(a){var d=a.type,e=!1,h=!1,l=this.testZone(a);if(l){switch(l){case "content":$.isMobile&&"mousedown"===d&&this.getNext(a,e);this.target&&(h=this.target.handleEvent(a));$.lock||this.getNext(a,e);break;case "title":"mousedown"===d&&(this.isOpen?this.close():this.open())}this.isDown&&(e=!0);h&&(e=!0);return e}},getNext:function(a,d){var e=$.findTarget(this.uis,a);e!==this.current&&(this.clearTarget(),this.current=e);-1!==e&&(this.target=
this.uis[this.current],this.target.uiover())},calcH:function(){var a=this.uis.length,d,e,h=0,l=0,q=0;for(d=0;d<a;d++)e=this.uis[d],e.autoWidth?h+=e.h+1:(0===l?h+=e.h+1:q<e.h&&(h+=e.h-q),q=e.h,l+=e.w,l+e.w>this.w&&(l=0));return h},calcUis:function(){this.isOpen&&$.calcUis(this.uis,this.zone,this.zone.y+this.baseH)},setBG:function(a){this.s[0].background=a;for(var d=this.uis.length;d--;)this.uis[d].setBG(a)},add:function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=this.isUI,a[1].target=this.c[2],
a[1].main=this.main):"string"===typeof arguments[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,target:this.c[2],main:this.main}):(a[2].isUI=!0,a[2].target=this.c[2],a[2].main=this.main));a=K.apply(this,a);this.uis.push(a);a.autoHeight&&(a.parentGroup=this);return a},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){w.prototype.open.call(this);this.setSvg(this.c[4],"d",this.svgs.arrowDown);this.rSizeContent();this.parentHeight(this.h-
this.baseH)},close:function(){w.prototype.close.call(this);var a=this.h-this.baseH;this.setSvg(this.c[4],"d",this.svgs.arrow);this.h=this.baseH;this.s[0].height=this.h+"px";this.parentHeight(-a)},clear:function(){this.clearGroup();this.isUI&&this.main.calc(-(this.h+1));w.prototype.clear.call(this)},clearGroup:function(){this.close();for(var a=this.uis.length;a--;)this.uis[a].clear(),this.uis.pop();this.uis=[];this.h=this.baseH},calc:function(a){this.isOpen&&(void 0!==a?(this.h+=a,this.isUI&&this.main.calc(a)):
this.h=this.calcH()+this.baseH,this.s[0].height=this.h+"px")},rSizeContent:function(){for(var a=this.uis.length;a--;)this.uis[a].setSize(this.w),this.uis[a].rSize();this.calc()},rSize:function(){w.prototype.rSize.call(this);var a=this.s;a[3].left=this.sa+this.sb-17+"px";a[1].width=this.w+"px";a[2].width=this.w+"px";this.isOpen&&this.rSizeContent()}});l.prototype=Object.assign(Object.create(w.prototype),{constructor:l,mode:function(a){switch(a){case 0:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn)",
4),this.setSvg(this.c[3],"stroke","#000",4)):(this.setSvg(this.c[3],"stroke","rgba(100,100,100,0.25)",2),this.setSvg(this.c[3],"stroke","#666",4),this.setSvg(this.c[3],"fill","none",4));break;case 1:0===this.model?(this.setSvg(this.c[3],"fill","url(#gradIn2)",4),this.setSvg(this.c[3],"stroke","rgba(0,0,0,0)",4)):(this.setSvg(this.c[3],"stroke","rgba(48,138,255,0.25)",2),this.setSvg(this.c[3],"stroke",this.colors.select,4),this.setSvg(this.c[3],"fill","rgba(48,138,255,0.25)",4))}},addInterval:function(){null!==
this.interval&&this.stopInterval();this.pos.isZero()||(this.interval=setInterval(function(){this.update()}.bind(this),10))},stopInterval:function(){null!==this.interval&&(clearInterval(this.interval),this.interval=null)},reset:function(){this.addInterval();this.mode(0)},mouseup:function(a){this.addInterval();this.isDown=!1},mousedown:function(a){this.isDown=!0;this.mousemove(a);this.mode(2)},mousemove:function(a){this.mode(1);this.isDown&&(this.tmp.x=this.radius-(a.clientX-this.zone.x),this.tmp.y=
this.radius-(a.clientY-this.zone.y-this.top),this.tmp.length()>this.distance&&(a=Math.atan2(this.tmp.x,this.tmp.y),this.tmp.x=Math.sin(a)*this.distance,this.tmp.y=Math.cos(a)*this.distance),this.pos.copy(this.tmp).divideScalar(this.distance).negate(),this.update())},setValue:function(a){void 0===a&&(a=[0,0]);this.pos.set(a[0]||0,a[1]||0);this.updateSVG()},update:function(a){void 0===a&&(a=!0);null===this.interval||this.isDown||(this.pos.lerp(null,0.3),this.pos.x=0.01>Math.abs(this.pos.x)?0:this.pos.x,
this.pos.y=0.01>Math.abs(this.pos.y)?0:this.pos.y,this.isUI&&this.main.isCanvas&&this.main.draw());this.updateSVG();a&&this.send();this.pos.isZero()&&this.stopInterval()},updateSVG:function(){var a=this.radius- -this.pos.x*this.distance,d=this.radius- -this.pos.y*this.distance;if(0===this.model){var e=d+5*this.pos.y+10;this.setSvg(this.c[3],"cx",(a+5*this.pos.x+5)*this.ratio,3);this.setSvg(this.c[3],"cy",e*this.ratio,3)}else this.setSvg(this.c[3],"cx",a*this.ratio,3),this.setSvg(this.c[3],"cy",d*
this.ratio,3);this.setSvg(this.c[3],"cx",a*this.ratio,4);this.setSvg(this.c[3],"cy",d*this.ratio,4);this.value[0]=1*(this.pos.x*this.multiplicator).toFixed(this.precision);this.value[1]=1*(this.pos.y*this.multiplicator).toFixed(this.precision);this.c[2].textContent=this.value},clear:function(){this.stopInterval();w.prototype.clear.call(this)}});e.prototype=Object.assign(Object.create(ca.prototype),{constructor:e,mode:function(a){if(this.cmode===a)return!1;switch(a){case 0:this.s[2].color=this.fontColor;
this.setSvg(this.c[3],"fill",this.colors.button,0);this.setSvg(this.c[3],"stroke",this.fontColor,1);break;case 1:this.s[2].color=this.colorPlus,this.setSvg(this.c[3],"fill",this.colors.select,0),this.setSvg(this.c[3],"stroke",this.colorPlus,1)}this.cmode=a;return!0},mousemove:function(a){if(this.isDown){var d=this.offset;d.x=this.radius-(a.clientX-this.zone.x);d.y=this.radius-(a.clientY-this.zone.y-this.top);this.r=-Math.atan2(d.x,d.y);null!==this.oldr&&(this.r=Math.abs(this.r-this.oldr)>Math.PI?
this.oldr:this.r);this.r=this.r>this.mPI?this.mPI:this.r;this.r=this.r<-this.mPI?-this.mPI:this.r;a=1/this.cirRange*this.range*(this.r+this.mPI)+this.min-this.old;if(a>=this.step||a<=this.step)a=Math.floor(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value,this.oldr=this.r}},makeGrad:function(){var a="",d,e,h,l,q,y,s=Math.PI+this.mPI;d=Math.PI-this.mPI;5<this.step?(e=this.range/this.step,d=(s-d)/e):(d=(s-d)/64*2,e=32);for(var w=0;w<=e;++w)h=s-d*w,l=64+
44*Math.sin(h),q=64+44*Math.cos(h),y=64+40*Math.sin(h),h=64+40*Math.cos(h),a+="M"+l+" "+q+" L"+y+" "+h+" ";return a},update:function(a){this.c[2].textContent=this.value;this.percent=(this.value-this.min)/this.range;var d=this.percent*this.cirRange-this.mPI,e=Math.sin(d),d=Math.cos(d);this.setSvg(this.c[3],"d","M "+(25*e+64)+" "+(-(25*d)+64)+" L "+(20*e+64)+" "+(-(20*d)+64),1);a&&this.send()}});J.prototype=Object.assign(Object.create(w.prototype),{constructor:J,preloadImage:function(){this.preLoadComplete=
!1;this.tmpImage={};for(var a=0;a<this.list.length;a++)this.tmpUrl.push(this.list[a]);this.loadOne()},nextImg:function(){this.tmpUrl.shift();0===this.tmpUrl.length?(this.preLoadComplete=!0,this.addImages()):this.loadOne()},loadOne:function(){var a=this,d=this.tmpUrl[0],e=document.createElement("img");e.style.cssText="position:absolute; width:"+a.imageSize[0]+"px; height:"+a.imageSize[1]+"px";e.setAttribute("src",this.path+d+this.format);e.addEventListener("load",function(){a.imageSize[2]=e.width;
a.imageSize[3]=e.height;a.tmpImage[d]=e;a.nextImg()})},testZone:function(a){a=this.local;if(-1===a.x&&-1===a.y)return"";if(this.up&&this.isOpen){if(a.y>this.h-this.baseH)return"title";if(this.scroll&&a.x>this.sa+this.sb-20)return"scroll";if(a.x>this.sa)return this.testItems(a.y-this.baseH)}else{if(a.y<this.baseH+2)return"title";if(this.isOpen){if(this.scroll&&a.x>this.sa+this.sb-20)return"scroll";if(a.x>this.sa)return this.testItems(a.y-this.baseH)}}return""},testItems:function(a){for(var d="",e=
this.items.length,h,l,q;e--;)if(h=this.items[e],l=h.posy+this.topList,q=h.posy+this.itemHeight+1+this.topList,a>=l&&a<=q){d="item"+e;this.unSelected();this.current=h;this.selected();break}return d},unSelected:function(){this.current&&(this.current.style.background="rgba(0,0,0,0.2)",this.current.style.color=this.fontColor,this.current=null)},selected:function(){this.current.style.background=this.colors.select;this.current.style.color="#FFF"},mouseup:function(a){this.isDown=!1},mousedown:function(a){var d=
this.testZone(a);if(!d)return!1;"scroll"===d?(this.isDown=!0,this.mousemove(a)):"title"===d?(this.modeTitle(2),this.isOpen?this.close():this.open()):this.current&&(this.value=this.list[this.current.id],this.setTopItem(),this.send(),this.close());return!0},mousemove:function(a){var d=!1,e=this.testZone(a);if(!e)return d;"title"===e?(this.unSelected(),this.modeTitle(1),this.cursor("pointer")):"scroll"===e?(this.cursor("s-resize"),this.modeScroll(1),this.isDown&&(this.modeScroll(2),this.update(a.clientY-
(this.zone.y+this.baseH-2)-0.5*this.sh))):(this.modeTitle(0),this.modeScroll(0),this.cursor("pointer"));e!==this.prevName&&(d=!0);this.prevName=e;return d},wheel:function(a){if("title"===this.testZone(a))return!1;this.py+=10*a.delta;this.update(this.py);return!0},reset:function(){this.prevName="";this.unSelected();this.modeTitle(0);this.modeScroll(0)},modeScroll:function(a){if(a!==this.sMode){switch(a){case 0:this.scroller.style.background=this.buttonColor;break;case 1:this.scroller.style.background=
this.colors.select;break;case 2:this.scroller.style.background=this.colors.down}this.sMode=a}},modeTitle:function(a){if(a!==this.tMode){var d=this.s;switch(a){case 0:d[3].color=this.fontColor;d[3].background=this.buttonColor;break;case 1:d[3].color="#FFF";d[3].background=this.colors.select;break;case 2:d[3].color=this.fontColor,d[3].background=this.colors.down}this.tMode=a}},clearList:function(){for(;this.listIn.children.length;)this.listIn.removeChild(this.listIn.lastChild);this.items=[]},setList:function(a){this.clearList();
this.list=a;this.length=this.list.length;this.maxItem=this.full?this.length:5;this.maxItem=this.length<this.maxItem?this.length:this.maxItem;this.maxHeight=this.maxItem*(this.itemHeight+1)+2;this.max=this.length*(this.itemHeight+1)+2;this.ratio=this.maxHeight/this.max;this.sh=this.maxHeight*this.ratio;this.range=this.maxHeight-this.sh;this.c[2].style.height=this.maxHeight+"px";this.scroller.style.height=this.sh+"px";this.max>this.maxHeight&&(this.ww=this.sb-20,this.scroll=!0);for(var d,e=0;e<this.length;e++)d=
this.list[e],a=this.dom("div",this.css.item+"width:"+this.ww+"px; height:"+this.itemHeight+"px; line-height:"+(this.itemHeight-5)+"px; color:"+this.fontColor+";"),a.name="item"+e,a.id=e,a.posy=(this.itemHeight+1)*e,this.listIn.appendChild(a),this.items.push(a),this.isWithImage||(a.textContent=d);this.setTopItem()},addImages:function(){for(var a=this.list.length,d=0;d<a;d++)this.items[d].appendChild(this.tmpImage[this.list[d]]);this.setTopItem()},setTopItem:function(){this.isWithImage?this.preLoadComplete&&
(this.c[3].children.length||(this.canvas=document.createElement("canvas"),this.canvas.width=this.imageSize[0],this.canvas.height=this.imageSize[1],this.canvas.style.cssText="position:absolute; top:0px; left:0px;",this.ctx=this.canvas.getContext("2d"),this.c[3].appendChild(this.canvas)),this.ctx.drawImage(this.tmpImage[this.value],0,0,this.imageSize[2],this.imageSize[3],0,0,this.imageSize[0],this.imageSize[1])):this.c[3].textContent=this.value},update:function(a){this.scroll&&(a=0>a?0:a,a=a>this.range?
this.range:a,this.topList=-Math.floor(a/this.ratio),this.listIn.style.top=this.topList+"px",this.scroller.style.top=Math.floor(a)+"px",this.py=a)},parentHeight:function(a){null!==this.parentGroup?this.parentGroup.calc(a):this.isUI&&this.main.calc(a)},open:function(){w.prototype.open.call(this);this.update(0);this.h=this.maxHeight+this.baseH+5;this.scroll?this.scroller.style.display="block":(this.topList=0,this.h=this.baseH+5+this.max,this.scroller.style.display="none");this.s[0].height=this.h+"px";
this.s[2].display="block";this.up?(this.zone.y-=this.h-(this.baseH-10),this.setSvg(this.c[4],"d",this.svgs.arrowUp)):this.setSvg(this.c[4],"d",this.svgs.arrowDown);this.rSizeContent();var a=this.h-this.baseH;this.zone.h=this.h;this.parentHeight(a)},close:function(){w.prototype.close.call(this);this.up&&(this.zone.y+=this.h-(this.baseH-10));var a=this.h-this.baseH;this.h=this.baseH;this.s[0].height=this.h+"px";this.s[2].display="none";this.setSvg(this.c[4],"d",this.svgs.arrow);this.zone.h=this.h;this.parentHeight(-a)},
text:function(a){this.c[3].textContent=a},rSizeContent:function(){for(var a=this.length;a--;)this.listIn.children[a].style.width=this.ww+"px"},rSize:function(){w.prototype.rSize.call(this);var a=this.s,d=this.sb,e=this.sa;void 0!==a[2]&&(a[2].width=d+"px",a[2].left=e+"px",a[3].width=d+"px",a[3].left=e+"px",a[4].left=e+d-17+"px",this.ww=d,this.max>this.maxHeight&&(this.ww=d-20),this.isOpen&&this.rSizeContent())}});W.prototype=Object.assign(Object.create(w.prototype),{constructor:W,testZone:function(a){a=
this.local;if(-1===a.x&&-1===a.y)return"";for(var d=this.lng,e=this.tmp;d--;)if(a.x>e[d][0]&&a.x<e[d][2])return d;return""},mode:function(a,d){if(a===this.cMode[d])return!1;this.reset();this.cMode[d]=a;return!0},mousedown:function(a){var d=this.testZone(a);if(""===d)return!1;this.current=d;this.isDown=!0;this.prev={x:a.clientX,y:a.clientY,d:0,v:this.isNumber?parseFloat(this.value):parseFloat(this.value[this.current])};return this.mode(2,d)},mouseup:function(a){a=this.testZone(a);this.isDown=!1;if(-1!==
this.current){var d=this.prev.d;this.current=-1;this.prev={x:0,y:0,d:0,v:0};if(d)return this.reset();this.setInput(this.c[a+2],function(){this.testValue()}.bind(this));return!0}},mousemove:function(a){var d=!1,d=this.testZone(a);""===d?(d=this.reset(),this.cursor()):(d=this.mode(1,d),this.cursor(-1!==this.current?"move":"pointer"));-1!==this.current&&(this.prev.d+=a.clientX-this.prev.x-(a.clientY-this.prev.y),this.value[this.current]=this.numValue(this.prev.v+this.prev.d*this.step),this.c[2+this.current].textContent=
this.value[this.current],this.validate(),this.prev.x=a.clientX,this.prev.y=a.clientY,d=!0);return d},keydown:function(a){return!0},reset:function(){var a=!1;this.isDown=!1;for(var d=this.lng;d--;)0!==this.cMode[d]&&(this.cMode[d]=0,a=!0);return a},setValue:function(a,d){d=d||0;this.value[d]=this.numValue(a);this.c[2+d].textContent=this.value[d]},testValue:function(){for(var a=this.lng;a--;)if(isNaN(this.c[2+a].textContent))this.c[2+a].textContent=this.value[a];else{var d=this.numValue(this.c[2+a].textContent);
this.c[2+a].textContent=d;this.value[a]=d}this.validate()},validate:function(){for(var a=[],d=this.lng;d--;)a[d]=this.value[d]*this.toRad;this.isNumber?this.send(a[0]):this.send(a)},rSize:function(){w.prototype.rSize.call(this);for(var a=Math.floor((this.sb+5)/this.lng)-5,d=this.s,e=this.lng;e--;)this.tmp[e]=[Math.floor(this.sa+a*e+5*e),a],this.tmp[e][2]=this.tmp[e][0]+this.tmp[e][1],d[2+e].left=this.tmp[e][0]+"px",d[2+e].width=this.tmp[e][1]+"px"}});U.prototype=Object.assign(Object.create(w.prototype),
{constructor:U,testZone:function(a){a=this.local;return-1===a.x&&-1===a.y?"":a.x>=this.txl?"text":a.x>=this.sa?"scroll":""},mouseup:function(a){this.isDown&&(this.isDown=!1)},mousedown:function(a){var d=this.testZone(a);if(!d)return!1;"scroll"===d&&(this.isDown=!0,this.old=this.value,this.mousemove(a));"text"===d&&this.setInput(this.c[2],function(){this.validate()}.bind(this));return!0},mousemove:function(a){var d=!1,e=this.testZone(a);"scroll"===e?(this.mode(1),this.cursor("w-resize")):"text"===
e?this.cursor("pointer"):this.cursor();if(this.isDown){a=(a.clientX-(this.zone.x+this.sa)-3)/this.ww*this.range+this.min-this.old;if(a>=this.step||a<=this.step)a=Math.floor(a/this.step),this.value=this.numValue(this.old+a*this.step),this.update(!0),this.old=this.value;d=!0}return d},keydown:function(a){return!0},validate:function(){var a=this.c[2].textContent;isNaN(a)?this.c[2].textContent=this.value:(this.value=this.numValue(a),this.update(!0))},reset:function(){this.isDown=!1;this.mode(0)},mode:function(a){var d=
this.s;switch(a){case 0:d[2].color=this.fontColor;d[4].background=this.colors.scrollback;d[5].background=this.fontColor;break;case 1:d[2].color=this.colorPlus,d[4].background=this.colors.scrollbackover,d[5].background=this.colorPlus}},update:function(a){var d=Math.floor((this.value-this.min)/this.range*this.ww);3!==this.model&&(this.s[5].width=d+"px");this.s[6]&&(this.s[6].left=this.sa+d+3+"px");this.c[2].textContent=this.value;a&&this.send()},rSize:function(){w.prototype.rSize.call(this);var a=this.sb-
this.sc;this.ww=a-6;var d=this.sc;if(this.isUI||!this.simple)d=this.sc+10;this.txl=this.w-d+2;d=this.s;d[2].width=this.sc-6+"px";d[2].left=this.txl+4+"px";d[3].left=this.sa+"px";d[3].width=a+"px";d[4].left=this.sa+"px";d[4].width=a+"px";d[5].left=this.sa+3+"px";this.update()}});P.prototype=Object.assign(Object.create(w.prototype),{constructor:P,mousedown:function(a){this.setInput(this.c[2],function(){this.validate()}.bind(this));return this.mode(2)},mousemove:function(a){return this.mode(1)},keydown:function(a){return!0},
mode:function(a){if(a===this.cmode)return!1;this.cmode=a;return!0},reset:function(){this.mode(0)},rSize:function(){w.prototype.rSize.call(this);var a=this.s;a[2].color=this.fontColor;a[2].left=this.sa+"px";a[2].width=this.sb+"px";a[2].height=this.h-4+"px";a[2].lineHeight=this.h-8+"px"},validate:function(){this.value=this.c[2].textContent;this.send()}});F.prototype=Object.assign(Object.create(w.prototype),{constructor:F,text:function(a){this.c[1].textContent=a},text2:function(a){this.c[2].textContent=
a},rSize:function(){w.prototype.rSize.call(this);this.s[1].width=this.w-50+"px";this.s[2].left=this.w-76+"px"}});Object.assign(S.prototype,{constructor:S,isGui:!0,dispose:function(){this.clear();null!==this.parent&&this.parent.removeChild(this.content);$.remove(this)},onDraw:function(){},makeCanvas:function(){this.canvas=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");this.canvas.width=this.zone.w;this.canvas.height=this.forceHeight?this.forceHeight:this.zone.h},draw:function(a){null!==
this.canvas&&$.toCanvas(this,this.zone.w,this.forceHeight?this.forceHeight:this.zone.h,a)},getDom:function(){return this.content},setMouse:function(a){this.mouse.set(a.x,a.y)},setText:function(a,d,e){q.setText(a,d,e)},hide:function(a){this.content.style.display=a?"none":"block"},onChange:function(a){this.callback=a;return this},mode:function(a){var d=!1;if(a!==this.cn){this.cn=a;switch(a){case "def":this.scroll.style.background=this.colors.scroll;this.bottom.style.background=this.colors.background;
this.bottom.style.color=this.colors.text;break;case "scrollOver":this.scroll.style.background=this.colors.select;break;case "scrollDown":this.scroll.style.background=this.colors.down;break;case "bottomOver":this.bottom.style.background=this.colors.backgroundOver,this.bottom.style.color="#FFF"}d=!0}return d},clearTarget:function(){if(-1===this.current)return!1;this.target.uiout();this.target.reset();this.target=null;this.current=-1;$.cursor();return!0},testZone:function(a){a=this.local;if(-1===a.x&&
-1===a.y)return"";this.isReset=!1;var d="",d=this.isScroll?this.zone.w-this.size.s:this.zone.w;return d=a.y>this.zone.h-this.bh&&a.y<this.zone.h?"bottom":a.x>d?"scroll":"content"},handleEvent:function(a){var d=a.type,e=!1,h=!1,l=this.testZone(a);"mouseup"===d&&this.isDown&&(this.isDown=!1);"mousedown"!==d||this.isDown||(this.isDown=!0);this.isDown&&this.isNewTarget&&($.clearInput(),this.isNewTarget=!1);if(l){switch(l){case "content":a.clientY=this.isScroll?a.clientY+this.decal:a.clientY;$.isMobile&&
"mousedown"===d&&this.getNext(a,e);this.target&&(h=this.target.handleEvent(a));"mousemove"===d&&(e=this.mode("def"));"wheel"===d&&!h&&this.isScroll&&(e=this.onWheel(a));$.lock||this.getNext(a,e);break;case "bottom":this.clearTarget();"mousemove"===d&&(e=this.mode("bottomOver"));"mousedown"===d&&(this.isOpen=this.isOpen?!1:!0,this.bottom.textContent=this.isOpen?"close":"open",this.setHeight(),this.mode("def"),e=!0);break;case "scroll":this.clearTarget(),"mousemove"===d&&(e=this.mode("scrollOver")),
"mousedown"===d&&(e=this.mode("scrollDown")),"wheel"===d&&(e=this.onWheel(a)),this.isDown&&this.update(a.clientY-this.zone.y-0.5*this.sh)}this.isDown&&(e=!0);h&&(e=!0);e&&this.draw()}},getNext:function(a,d){var e=$.findTarget(this.uis,a);e!==this.current&&(this.clearTarget(),this.current=e,this.isNewTarget=!0);-1!==e&&(this.target=this.uis[this.current],this.target.uiover())},onWheel:function(a){this.oy+=20*a.delta;this.update(this.oy);return!0},reset:function(a){if(!this.isReset){this.mouse.neg();
this.isDown=!1;a=this.mode("def");var d=this.clearTarget();(a||d)&&this.draw(!0);this.isReset=!0}},add:function(){var a=arguments;"object"===typeof a[1]?(a[1].isUI=!0,a[1].main=this):"string"===typeof a[1]&&(void 0===a[2]?[].push.call(a,{isUI:!0,main:this}):(a[2].isUI=!0,a[2].main=this));a=K.apply(this,a);if(null!==a){this.uis.push(a);if(a.autoWidth)this.prevY=0,this.calc(a.h+1);else{var d=a.c[0].getBoundingClientRect().top;this.prevY!==d&&(this.calc(a.h+1),this.prevY=d)}return a}},applyCalc:function(){this.calc(this.tmpH);
this.tmpAdd=null},calcUis:function(){$.calcUis(this.uis,this.zone,this.zone.y)},remove:function(a){a=this.uis.indexOf(a);-1!==a&&this.uis[a].clear()},clearOne:function(a){a=this.uis.indexOf(a);-1!==a&&(this.inner.removeChild(this.uis[a].c[0]),this.uis.splice(a,1))},clear:function(){for(var a=this.uis.length;a--;)this.uis[a].clear();this.uis=[];$.listens=[];this.calc(-this.h)},upScroll:function(a){this.sw=a?this.size.s:0;this.oy=a?this.oy:0;this.scrollBG.style.display=a?"block":"none";a&&(this.total=
this.h,this.maxView=this.maxHeight,this.ratio=this.maxView/this.total,this.sh=this.maxView*this.ratio,this.range=this.maxView-this.sh,this.oy=q.clamp(this.oy,0,this.range),this.scrollBG.style.height=this.maxView+"px",this.scroll.style.height=this.sh+"px");this.setItemWidth(this.zone.w-this.sw);this.update(this.oy)},update:function(a){a=q.clamp(a,0,this.range);this.decal=Math.floor(a/this.ratio);this.inner.style.top=-this.decal+"px";this.scroll.style.top=Math.floor(a)+"px";this.oy=a},calc:function(a){this.h+=
a;clearTimeout(this.tmp);this.tmp=setTimeout(this.setHeight.bind(this),10)},setHeight:function(){this.tmp&&clearTimeout(this.tmp);this.zone.h=this.bh;this.isScroll=!1;this.isOpen&&(this.maxHeight=(this.forceHeight?this.forceHeight:window.innerHeight)-this.zone.y-this.bh,1<this.h-this.maxHeight?(this.isScroll=!0,this.zone.h=this.maxHeight+this.bh):this.zone.h=this.h+this.bh);this.upScroll(this.isScroll);this.innerContent.style.height=this.zone.h-this.bh+"px";this.content.style.height=this.zone.h+"px";
this.bottom.style.top=this.zone.h-this.bh+"px";this.isOpen&&this.calcUis();this.isCanvas&&this.draw(!0)},setWidth:function(a){a&&(this.zone.w=a);this.content.style.width=this.zone.w+"px";this.isCenter&&(this.content.style.marginLeft=-Math.floor(0.5*this.zone.w)+"px");this.setItemWidth(this.zone.w-this.sw);this.setHeight();this.isCanvasOnly||($.needReZone=!0)},setItemWidth:function(a){for(var d=this.uis.length;d--;)this.uis[d].setSize(a),this.uis[d].rSize()}});s.REVISION="2.0";s.Tools=q;s.Gui=S;s.Proto=
w;s.add=K;s.Bool=x;s.Button=ba;s.Circular=ca;s.Color=Z;s.Fps=da;s.Group=fa;s.Joystick=l;s.Knob=e;s.List=J;s.Numeric=W;s.Slide=U;s.TextInput=P;s.Title=F;Object.defineProperty(s,"__esModule",{value:!0})});(function(s,I){"object"===typeof exports&&"undefined"!==typeof module?module.exports=I():"function"===typeof define&&define.amd?define(I):s.CodeMirror=I()})(this,function(){function s(b){return RegExp("(^|\\s)"+b+"(?:$|\\s)\\s*")}function I(b){for(var c=b.childNodes.length;0<c;--c)b.removeChild(b.firstChild);return b}function w(b,c){return I(b).appendChild(c)}function x(b,c,k,f){b=document.createElement(b);k&&(b.className=k);f&&(b.style.cssText=f);if("string"==typeof c)b.appendChild(document.createTextNode(c));
else if(c)for(k=0;k<c.length;++k)b.appendChild(c[k]);return b}function ba(b,c,k,f){b=x(b,c,k,f);b.setAttribute("role","presentation");return b}function ca(b,c){3==c.nodeType&&(c=c.parentNode);if(b.contains)return b.contains(c);do if(11==c.nodeType&&(c=c.host),c==b)return!0;while(c=c.parentNode)}function Z(){var b;try{b=document.activeElement}catch(c){b=document.body||null}for(;b&&b.shadowRoot&&b.shadowRoot.activeElement;)b=b.shadowRoot.activeElement;return b}function da(b,c){var k=b.className;s(c).test(k)||
(b.className+=(k?" ":"")+c)}function pa(b,c){for(var k=b.split(" "),f=0;f<k.length;f++)k[f]&&!s(k[f]).test(c)&&(c+=" "+k[f]);return c}function fa(b){var c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(null,c)}}function l(b,c,k){c||(c={});for(var f in b)!b.hasOwnProperty(f)||!1===k&&c.hasOwnProperty(f)||(c[f]=b[f]);return c}function e(b,c,k,f,n){null==c&&(c=b.search(/[^\s\u00a0]/),-1==c&&(c=b.length));f=f||0;for(n=n||0;;){var a=b.indexOf("\t",f);if(0>a||a>=c)return n+(c-
f);n+=a-f;n+=k-n%k;f=a+1}}function J(b,c){for(var k=0;k<b.length;++k)if(b[k]==c)return k;return-1}function W(b,c,k){for(var f=0,n=0;;){var a=b.indexOf("\t",f);-1==a&&(a=b.length);var R=a-f;if(a==b.length||n+R>=c)return f+Math.min(R,c-n);n+=a-f;n+=k-n%k;f=a+1;if(n>=c)return f}}function U(b){for(;bd.length<=b;)bd.push(P(bd)+" ");return bd[b]}function P(b){return b[b.length-1]}function F(b,c){for(var k=[],f=0;f<b.length;f++)k[f]=c(b[f],f);return k}function K(b,c,k){for(var f=0,n=k(c);f<b.length&&k(b[f])<=
n;)f++;b.splice(f,0,c)}function S(){}function y(b,c){var k;Object.create?k=Object.create(b):(S.prototype=b,k=new S);c&&l(c,k);return k}function q(b){return/\w/.test(b)||"\u0080"<b&&(b.toUpperCase()!=b.toLowerCase()||jg.test(b))}function h(b,c){return c?-1<c.source.indexOf("\\w")&&q(b)?!0:c.test(b):q(b)}function $(b){for(var c in b)if(b.hasOwnProperty(c)&&b[c])return!1;return!0}function a(b){return 768<=b.charCodeAt(0)&&kg.test(b)}function d(b,c,k){for(;(0>k?0<c:c<b.length)&&a(b.charAt(c));)c+=k;return c}
function u(b,c,k){for(var f=c>k?-1:1;;){if(c==k)return c;var n=(c+k)/2,n=0>f?Math.ceil(n):Math.floor(n);if(n==c)return b(n)?c:k;b(n)?k=n:c=n+f}}function db(b,c,k){this.input=k;this.scrollbarFiller=x("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=x("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=ba("div",null,"CodeMirror-code");this.selectionDiv=x("div",null,null,"position: relative; z-index: 1");
this.cursorDiv=x("div",null,"CodeMirror-cursors");this.measure=x("div",null,"CodeMirror-measure");this.lineMeasure=x("div",null,"CodeMirror-measure");this.lineSpace=ba("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");var f=ba("div",[this.lineSpace],"CodeMirror-lines");this.mover=x("div",[f],null,"position: relative");this.sizer=x("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=x("div",null,null,
"position: absolute; height: "+te+"px; width: 1px;");this.gutters=x("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=x("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=x("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");la&&8>xa&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Ya||Gb&&tc||(this.scroller.draggable=!0);b&&(b.appendChild?b.appendChild(this.wrapper):
b(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=c.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=
!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;k.init(this)}function E(b,c){c-=b.first;if(0>c||c>=b.size)throw Error("There is no line "+(c+b.first)+" in the document.");for(var k=b;!k.lines;)for(var f=0;;++f){var n=k.children[f],a=n.chunkSize();if(c<a){k=n;break}c-=a}return k.lines[c]}function Oa(b,c,k){var f=[],n=c.line;b.iter(c.line,k.line+1,function(b){b=b.text;n==k.line&&(b=b.slice(0,k.ch));n==c.line&&(b=b.slice(c.ch));
f.push(b);++n});return f}function ia(b,c,k){var f=[];b.iter(c,k,function(b){f.push(b.text)});return f}function ha(b,c){var k=c-b.height;if(k)for(var f=b;f;f=f.parent)f.height+=k}function ea(b){if(null==b.parent)return null;var c=b.parent;b=J(c.lines,b);for(var k=c.parent;k;c=k,k=k.parent)for(var f=0;k.children[f]!=c;++f)b+=k.children[f].chunkSize();return b+c.first}function Za(b,c){var k=b.first;a:do{for(var f=0;f<b.children.length;++f){var n=b.children[f],a=n.height;if(c<a){b=n;continue a}c-=a;k+=
n.chunkSize()}return k}while(!b.lines);for(f=0;f<b.lines.length;++f){n=b.lines[f].height;if(c<n)break;c-=n}return k+f}function ta(b,c){return c>=b.first&&c<b.first+b.size}function ya(b,c){return String(b.lineNumberFormatter(c+b.firstLineNumber))}function B(b,c,k){void 0===k&&(k=null);if(!(this instanceof B))return new B(b,c,k);this.line=b;this.ch=c;this.sticky=k}function G(b,c){return b.line-c.line||b.ch-c.ch}function za(b,c){return b.sticky==c.sticky&&0==G(b,c)}function O(b){return B(b.line,b.ch)}
function ja(b,c){return 0>G(b,c)?c:b}function ka(b,c){return 0>G(b,c)?b:c}function A(b,c){if(c.line<b.first)return B(b.first,0);var k=b.first+b.size-1;if(c.line>k)return B(k,E(b,k).text.length);var k=E(b,c.line).text.length,f=c.ch,k=null==f||f>k?B(c.line,k):0>f?B(c.line,0):c;return k}function ga(b,c){for(var k=[],f=0;f<c.length;f++)k[f]=A(b,c[f]);return k}function Ka(b,c,k){this.marker=b;this.from=c;this.to=k}function $a(b,c){if(b)for(var k=0;k<b.length;++k){var f=b[k];if(f.marker==c)return f}}function ma(b,
c){if(c.full)return null;var k=ta(b,c.from.line)&&E(b,c.from.line).markedSpans,f=ta(b,c.to.line)&&E(b,c.to.line).markedSpans;if(!k&&!f)return null;var n=c.from.ch,a=c.to.ch,R=0==G(c.from,c.to),g;if(k)for(var d=0;d<k.length;++d){var e=k[d],m=e.marker;if(null==e.from||(m.inclusiveLeft?e.from<=n:e.from<n)||e.from==n&&!("bookmark"!=m.type||R&&e.marker.insertLeft)){var t=null==e.to||(m.inclusiveRight?e.to>=n:e.to>n);(g||(g=[])).push(new Ka(m,e.from,t?null:e.to))}}var k=g,h;if(f)for(g=0;g<f.length;++g)if(d=
f[g],e=d.marker,null==d.to||(e.inclusiveRight?d.to>=a:d.to>a)||d.from==a&&"bookmark"==e.type&&(!R||d.marker.insertLeft))m=null==d.from||(e.inclusiveLeft?d.from<=a:d.from<a),(h||(h=[])).push(new Ka(e,m?null:d.from-a,null==d.to?null:d.to-a));f=h;a=1==c.text.length;R=P(c.text).length+(a?n:0);if(k)for(h=0;h<k.length;++h)if(g=k[h],null==g.to)(d=$a(f,g.marker),d)?a&&(g.to=null==d.to?null:d.to+R):g.to=n;if(f)for(n=0;n<f.length;++n)h=f[n],null!=h.to&&(h.to+=R),null==h.from?$a(k,h.marker)||(h.from=R,a&&(k||
(k=[])).push(h)):(h.from+=R,a&&(k||(k=[])).push(h));k&&(k=Ea(k));f&&f!=k&&(f=Ea(f));n=[k];if(!a){var a=c.text.length-2,v;if(0<a&&k)for(R=0;R<k.length;++R)null==k[R].to&&(v||(v=[])).push(new Ka(k[R].marker,null,null));for(k=0;k<a;++k)n.push(v);n.push(f)}return n}function Ea(b){for(var c=0;c<b.length;++c){var k=b[c];null!=k.from&&k.from==k.to&&!1!==k.marker.clearWhenEmpty&&b.splice(c--,1)}return b.length?b:null}function ab(b,c,k){var f=null;b.iter(c.line,k.line+1,function(b){if(b.markedSpans)for(var c=
0;c<b.markedSpans.length;++c){var k=b.markedSpans[c].marker;!k.readOnly||f&&-1!=J(f,k)||(f||(f=[])).push(k)}});if(!f)return null;b=[{from:c,to:k}];for(c=0;c<f.length;++c){k=f[c];for(var n=k.find(0),a=0;a<b.length;++a){var R=b[a];if(!(0>G(R.to,n.from)||0<G(R.from,n.to))){var g=[a,1],d=G(R.from,n.from),e=G(R.to,n.to);(0>d||!k.inclusiveLeft&&!d)&&g.push({from:R.from,to:n.from});(0<e||!k.inclusiveRight&&!e)&&g.push({from:n.to,to:R.to});b.splice.apply(b,g);a+=g.length-3}}}return b}function hb(b){var c=
b.markedSpans;if(c){for(var k=0;k<c.length;++k)c[k].marker.detachLine(b);b.markedSpans=null}}function Ta(b,c){if(c){for(var k=0;k<c.length;++k)c[k].marker.attachLine(b);b.markedSpans=c}}function qb(b,c){var k=b.lines.length-c.lines.length;if(0!=k)return k;var k=b.find(),f=c.find(),n=G(k.from,f.from)||(b.inclusiveLeft?-1:0)-(c.inclusiveLeft?-1:0);return n?-n:(k=G(k.to,f.to)||(b.inclusiveRight?1:0)-(c.inclusiveRight?1:0))?k:c.id-b.id}function Ga(b,c){var k=Hb&&b.markedSpans,f;if(k)for(var n=void 0,
a=0;a<k.length;++a)n=k[a],n.marker.collapsed&&null==(c?n.from:n.to)&&(!f||0>qb(f,n.marker))&&(f=n.marker);return f}function rb(b,c,k,f,n){b=E(b,c);if(b=Hb&&b.markedSpans)for(c=0;c<b.length;++c){var a=b[c];if(a.marker.collapsed){var R=a.marker.find(0),g=G(R.from,k)||(a.marker.inclusiveLeft?-1:0)-(n.inclusiveLeft?-1:0),d=G(R.to,f)||(a.marker.inclusiveRight?1:0)-(n.inclusiveRight?1:0);if(!(0<=g&&0>=d||0>=g&&0<=d)&&(0>=g&&(a.marker.inclusiveRight&&n.inclusiveLeft?0<=G(R.to,k):0<G(R.to,k))||0<=g&&(a.marker.inclusiveRight&&
n.inclusiveLeft?0>=G(R.from,f):0>G(R.from,f))))return!0}}}function Aa(b){for(var c;c=Ga(b,!0);)b=c.find(-1,!0).line;return b}function Ha(b,c){var k=E(b,c),f=Aa(k);return k==f?c:ea(f)}function Ua(b,c){if(c>b.lastLine())return c;var k=E(b,c),f;if(!ra(b,k))return c;for(;f=Ga(k,!1);)k=f.find(1,!0).line;return ea(k)+1}function ra(b,c){var k=Hb&&c.markedSpans;if(k)for(var f=void 0,n=0;n<k.length;++n)if(f=k[n],f.marker.collapsed&&(null==f.from||!f.marker.widgetNode&&0==f.from&&f.marker.inclusiveLeft&&sb(b,
c,f)))return!0}function sb(b,c,k){if(null==k.to)return c=k.marker.find(1,!0),sb(b,c.line,$a(c.line.markedSpans,k.marker));if(k.marker.inclusiveRight&&k.to==c.text.length)return!0;for(var f=void 0,n=0;n<c.markedSpans.length;++n)if(f=c.markedSpans[n],f.marker.collapsed&&!f.marker.widgetNode&&f.from==k.to&&(null==f.to||f.to!=k.from)&&(f.marker.inclusiveLeft||k.marker.inclusiveRight)&&sb(b,c,f))return!0}function Ia(b){b=Aa(b);for(var c=0,k=b.parent,f=0;f<k.lines.length;++f){var n=k.lines[f];if(n==b)break;
else c+=n.height}for(b=k.parent;b;k=b,b=k.parent)for(f=0;f<b.children.length&&(n=b.children[f],n!=k);++f)c+=n.height;return c}function Ba(b){if(0==b.height)return 0;for(var c=b.text.length,k,f=b;k=Ga(f,!0);)k=k.find(0,!0),f=k.from.line,c+=k.from.ch-k.to.ch;for(f=b;k=Ga(f,!1);)b=k.find(0,!0),c-=f.text.length-b.from.ch,f=b.to.line,c+=f.text.length-b.to.ch;return c}function ua(b){var c=b.display;b=b.doc;c.maxLine=E(b,b.first);c.maxLineLength=Ba(c.maxLine);c.maxLineChanged=!0;b.iter(function(b){var f=
Ba(b);f>c.maxLineLength&&(c.maxLineLength=f,c.maxLine=b)})}function Fa(b,c,k,f){if(!b)return f(c,k,"ltr",0);for(var n=!1,a=0;a<b.length;++a){var R=b[a];if(R.from<k&&R.to>c||c==k&&R.to==c)f(Math.max(R.from,c),Math.min(R.to,k),1==R.level?"rtl":"ltr",a),n=!0}n||f(c,k,"ltr")}function sa(b,c,k){var f;uc=null;for(var n=0;n<b.length;++n){var a=b[n];if(a.from<c&&a.to>c)return n;a.to==c&&(a.from!=a.to&&"before"==k?f=n:uc=n);a.from==c&&(a.from!=a.to&&"before"!=k?f=n:uc=n)}return null!=f?f:uc}function ib(b,
c){var k=b.order;null==k&&(k=b.order=lg(b.text,c));return k}function va(b,c,k){if(b.removeEventListener)b.removeEventListener(c,k,!1);else if(b.detachEvent)b.detachEvent("on"+c,k);else{var f=(b=b._handlers)&&b[c];f&&(k=J(f,k),-1<k&&(b[c]=f.slice(0,k).concat(f.slice(k+1))))}}function qa(b,c){var k=b._handlers&&b._handlers[c]||cd;if(k.length)for(var f=Array.prototype.slice.call(arguments,2),n=0;n<k.length;++n)k[n].apply(null,f)}function na(b,c,k){"string"==typeof c&&(c={type:c,preventDefault:function(){this.defaultPrevented=
!0}});qa(b,k||c.type,b,c);return Db(c)||c.codemirrorIgnore}function yb(b){var c=b._handlers&&b._handlers.cursorActivity;if(c){b=b.curOp.cursorActivityHandlers||(b.curOp.cursorActivityHandlers=[]);for(var k=0;k<c.length;++k)-1==J(b,c[k])&&b.push(c[k])}}function La(b,c){return 0<(b._handlers&&b._handlers[c]||cd).length}function Va(b){b.prototype.on=function(b,k){Y(this,b,k)};b.prototype.off=function(b,k){va(this,b,k)}}function Ja(b){b.preventDefault?b.preventDefault():b.returnValue=!1}function zb(b){b.stopPropagation?
b.stopPropagation():b.cancelBubble=!0}function Db(b){return null!=b.defaultPrevented?b.defaultPrevented:!1==b.returnValue}function H(b){Ja(b);zb(b)}function Pa(b){var c=b.which;null==c&&(b.button&1?c=1:b.button&2?c=3:b.button&4&&(c=2));tb&&b.ctrlKey&&1==c&&(c=3);return c}function Nb(b){if(null==Cd){var c=x("span","\u200b");w(b,x("span",[c,document.createTextNode("x")]));0!=b.firstChild.offsetHeight&&(Cd=1>=c.offsetWidth&&2<c.offsetHeight&&!(la&&8>xa))}b=Cd?x("span","\u200b"):x("span","\u00a0",null,
"display: inline-block; width: 1px; margin-right: -1px");b.setAttribute("cm-text","");return b}function N(b,c){2<arguments.length&&(c.dependencies=Array.prototype.slice.call(arguments,2));Dd[b]=c}function eb(b){if("string"==typeof b&&cc.hasOwnProperty(b))b=cc[b];else if(b&&"string"==typeof b.name&&cc.hasOwnProperty(b.name)){var c=cc[b.name];"string"==typeof c&&(c={name:c});b=y(c,b);b.name=c.name}else{if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return eb("application/xml");if("string"==
typeof b&&/^[\w\-]+\/[\w\-]+\+json$/.test(b))return eb("application/json")}return"string"==typeof b?{name:b}:b||{name:"null"}}function jb(b,c){c=eb(c);var k=Dd[c.name];if(!k)return jb(b,"text/plain");k=k(b,c);if(dc.hasOwnProperty(c.name)){var f=dc[c.name],n;for(n in f)f.hasOwnProperty(n)&&(k.hasOwnProperty(n)&&(k["_"+n]=k[n]),k[n]=f[n])}k.name=c.name;c.helperType&&(k.helperType=c.helperType);if(c.modeProps)for(var a in c.modeProps)k[a]=c.modeProps[a];return k}function Q(b,c){var k=dc.hasOwnProperty(b)?
dc[b]:dc[b]={};l(c,k)}function mb(b,c){if(!0===c)return c;if(b.copyState)return b.copyState(c);var k={},f;for(f in c){var n=c[f];n instanceof Array&&(n=n.concat([]));k[f]=n}return k}function D(b,c){for(var k;b.innerMode;){k=b.innerMode(c);if(!k||k.mode==b)break;c=k.state;b=k.mode}return k||{mode:b,state:c}}function aa(b,c,k){return b.startState?b.startState(c,k):!0}function p(b,c,k,f){var n=[b.state.modeGen],a={};m(b,c.text,b.doc.mode,k,function(b,c){return n.push(b,c)},a,f);var R=k.state;f=function(f){k.baseTokens=
n;var g=b.state.overlays[f],d=1,lb=0;k.state=!0;m(b,c.text,g.mode,k,function(b,c){for(var f=d;lb<b;){var k=n[d];k>b&&n.splice(d,1,b,n[d+1],k);d+=2;lb=Math.min(b,k)}if(c)if(g.opaque)n.splice(f,d-f,b,"overlay "+c),d=f+2;else for(;f<d;f+=2)k=n[f+1],n[f+1]=(k?k+" ":"")+"overlay "+c},a);k.state=R;k.baseTokens=null;k.baseTokenPos=1};for(var g=0;g<b.state.overlays.length;++g)f(g);return{styles:n,classes:a.bgClass||a.textClass?a:null}}function X(b,c,k){if(!c.styles||c.styles[0]!=b.state.modeGen){var f=V(b,
ea(c)),n=c.text.length>b.options.maxHighlightLength&&mb(b.doc.mode,f.state),a=p(b,c,f);n&&(f.state=n);c.stateAfter=f.save(!n);c.styles=a.styles;a.classes?c.styleClasses=a.classes:c.styleClasses&&(c.styleClasses=null);k===b.doc.highlightFrontier&&(b.doc.modeFrontier=Math.max(b.doc.modeFrontier,++b.doc.highlightFrontier))}return c.styles}function V(b,c,k){var f=b.doc,n=b.display;if(!f.mode.startState)return new Ab(f,!0,c);var a=v(b,c,k),g=a>f.first&&E(f,a-1).stateAfter,d=g?Ab.fromSaved(f,g,a):new Ab(f,
aa(f.mode),a);f.iter(a,c,function(f){T(b,f.text,d);var k=d.line;f.stateAfter=k==c-1||0==k%5||k>=n.viewFrom&&k<n.viewTo?d.save():null;d.nextLine()});k&&(f.modeFrontier=d.line);return d}function T(b,c,k,f){var n=b.doc.mode;b=new Ma(c,b.options.tabSize,k);b.start=b.pos=f||0;for(""==c&&L(n,k.state);!b.eol();)M(n,b,k.state),b.start=b.pos}function L(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var k=D(b,c);if(k.mode.blankLine)return k.mode.blankLine(k.state)}}function M(b,c,k,f){for(var n=
0;10>n;n++){f&&(f[0]=D(b,k).mode);var a=b.token(c,k);if(c.pos>c.start)return a}throw Error("Mode "+b.name+" failed to advance stream.");}function z(b,c,k,f){var n=b.doc,a=n.mode,g;c=A(n,c);var d=E(n,c.line);k=V(b,c.line,k);b=new Ma(d.text,b.options.tabSize,k);var e;for(f&&(e=[]);(f||b.pos<c.ch)&&!b.eol();)b.start=b.pos,g=M(a,b,k.state),f&&e.push(new ue(b,g,mb(n.mode,k.state)));return f?e:new ue(b,g,k.state)}function g(b,c){if(b)for(;;){var k=b.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!k)break;
b=b.slice(0,k.index)+b.slice(k.index+k[0].length);var f=k[1]?"bgClass":"textClass";null==c[f]?c[f]=k[2]:RegExp("(?:^|s)"+k[2]+"(?:$|s)").test(c[f])||(c[f]+=" "+k[2])}return b}function m(b,c,k,f,n,a,R){var d=k.flattenSpans;null==d&&(d=b.options.flattenSpans);var e=0,m=null,h=new Ma(c,b.options.tabSize,f),t,v=b.options.addModeClass&&[null];for(""==c&&g(L(k,f.state),a);!h.eol();){h.pos>b.options.maxHighlightLength?(d=!1,R&&T(b,c,f,h.pos),h.pos=c.length,t=null):t=g(M(k,h,f.state,v),a);if(v){var r=v[0].name;
r&&(t="m-"+(t?r+" "+t:r))}if(!d||m!=t){for(;e<h.start;)e=Math.min(h.start,e+5E3),n(e,m);m=t}h.start=h.pos}for(;e<h.pos;)b=Math.min(h.pos,e+5E3),n(b,m),e=b}function v(b,c,k){for(var f,n,a=b.doc,g=k?-1:c-(b.doc.mode.innerMode?1E3:100);c>g;--c){if(c<=a.first)return a.first;var d=E(a,c-1),m=d.stateAfter;if(m&&(!k||c+(m instanceof dd?m.lookAhead:0)<=a.modeFrontier))return c;d=e(d.text,null,b.options.tabSize);if(null==n||f>d)n=c-1,f=d}return n}function r(b,c){b.modeFrontier=Math.min(b.modeFrontier,c);if(!(b.highlightFrontier<
c-10)){for(var k=b.first,f=c-1;f>k;f--){var n=E(b,f).stateAfter;if(n&&(!(n instanceof dd)||f+n.lookAhead<c)){k=f+1;break}}b.highlightFrontier=Math.min(b.highlightFrontier,k)}}function ed(b,c){if(!b||/^\s*$/.test(b))return null;var k=c.addModeClass?mg:ng;return k[b]||(k[b]=b.replace(/\S+/g,"cm-$&"))}function C(b,c){var k=ba("span",null,null,Ya?"padding-right: .1px":null),k={pre:ba("pre",[k],"CodeMirror-line"),content:k,col:0,pos:0,cm:b,trailingSpace:!1,splitSpaces:(la||Ya)&&b.getOption("lineWrapping")};
c.measure={};for(var f=0;f<=(c.rest?c.rest.length:0);f++){var n=f?c.rest[f-1]:c.line,a=void 0;k.pos=0;k.addToken=t;var g;g=b.display.measure;if(null!=Ed)g=Ed;else{var d=w(g,document.createTextNode("A\u062eA")),e=ec(d,0,1).getBoundingClientRect(),d=ec(d,1,2).getBoundingClientRect();I(g);g=e&&e.left!=e.right?Ed=3>d.right-e.right:!1}g&&(a=ib(n,b.doc.direction))&&(k.addToken=fc(k.addToken,a));k.map=[];g=c!=b.display.externalMeasured&&ea(n);a:{a=k;g=X(b,n,g);var m=n.markedSpans,e=n.text,d=0;if(m)for(var h=
e.length,v=0,r=1,l="",p=void 0,u=void 0,q=0,C=void 0,sa=void 0,y=void 0,s=void 0,Qa=void 0;;){if(q==v){for(var C=sa=y=s=u="",Qa=null,q=Infinity,A=[],z=void 0,B=0;B<m.length;++B){var J=m[B],x=J.marker;"bookmark"==x.type&&J.from==v&&x.widgetNode?A.push(x):J.from<=v&&(null==J.to||J.to>v||x.collapsed&&J.to==v&&J.from==v)?(null!=J.to&&J.to!=v&&q>J.to&&(q=J.to,sa=""),x.className&&(C+=" "+x.className),x.css&&(u=(u?u+";":"")+x.css),x.startStyle&&J.from==v&&(y+=" "+x.startStyle),x.endStyle&&J.to==q&&(z||(z=
[])).push(x.endStyle,J.to),x.title&&!s&&(s=x.title),x.collapsed&&(!Qa||0>qb(Qa.marker,x))&&(Qa=J)):J.from>v&&q>J.from&&(q=J.from)}if(z)for(B=0;B<z.length;B+=2)z[B+1]==q&&(sa+=" "+z[B]);if(!Qa||Qa.from==v)for(z=0;z<A.length;++z)ve(a,0,A[z]);if(Qa&&(Qa.from||0)==v){ve(a,(null==Qa.to?h+1:Qa.to)-v,Qa.marker,null==Qa.from);if(null==Qa.to)break a;Qa.to==v&&(Qa=!1)}}if(v>=h)break;for(A=Math.min(h,q);;){if(l){z=v+l.length;Qa||(B=z>A?l.slice(0,A-v):l,a.addToken(a,B,p?p+C:C,y,v+B.length==q?sa:"",s,u));if(z>=
A){l=l.slice(A-v);v=A;break}v=z;y=""}l=e.slice(d,d=g[r++]);p=ed(g[r++],a.cm.options)}}else for(m=1;m<g.length;m+=2)a.addToken(a,e.slice(d,d=g[m]),ed(g[m+1],a.cm.options))}n.styleClasses&&(n.styleClasses.bgClass&&(k.bgClass=pa(n.styleClasses.bgClass,k.bgClass||"")),n.styleClasses.textClass&&(k.textClass=pa(n.styleClasses.textClass,k.textClass||"")));0==k.map.length&&k.map.push(0,0,k.content.appendChild(Nb(b.display.measure)));0==f?(c.measure.map=k.map,c.measure.cache={}):((c.measure.maps||(c.measure.maps=
[])).push(k.map),(c.measure.caches||(c.measure.caches=[])).push({}))}Ya&&(f=k.content.lastChild,/\bcm-tab\b/.test(f.className)||f.querySelector&&f.querySelector(".cm-tab"))&&(k.content.className="cm-tab-wrap-hack");qa(b,"renderLine",b,c.line,k.pre);k.pre.className&&(k.textClass=pa(k.pre.className,k.textClass||""));return k}function Fd(b){var c=x("span","\u2022","cm-invalidchar");c.title="\\u"+b.charCodeAt(0).toString(16);c.setAttribute("aria-label",c.title);return c}function t(b,c,k,f,n,a,g){if(c){var d;
if(b.splitSpaces)if(d=b.trailingSpace,1<c.length&&!/  /.test(c))d=c;else{for(var e="",m=0;m<c.length;m++){var h=c.charAt(m);" "!=h||!d||m!=c.length-1&&32!=c.charCodeAt(m+1)||(h="\u00a0");e+=h;d=" "==h}d=e}else d=c;e=d;m=b.cm.state.specialChars;h=!1;if(m.test(c)){d=document.createDocumentFragment();for(var t=0;;){m.lastIndex=t;var v=m.exec(c),r=v?v.index-t:c.length-t;if(r){var l=document.createTextNode(e.slice(t,t+r));la&&9>xa?d.appendChild(x("span",[l])):d.appendChild(l);b.map.push(b.pos,b.pos+r,
l);b.col+=r;b.pos+=r}if(!v)break;t+=r+1;r=void 0;"\t"==v[0]?(v=b.cm.options.tabSize,v-=b.col%v,r=d.appendChild(x("span",U(v),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),b.col+=v):("\r"==v[0]||"\n"==v[0]?(r=d.appendChild(x("span","\r"==v[0]?"\u240d":"\u2424","cm-invalidchar")),r.setAttribute("cm-text",v[0])):(r=b.cm.options.specialCharPlaceholder(v[0]),r.setAttribute("cm-text",v[0]),la&&9>xa?d.appendChild(x("span",[r])):d.appendChild(r)),b.col+=1);b.map.push(b.pos,
b.pos+1,r);b.pos++}}else b.col+=c.length,d=document.createTextNode(e),b.map.push(b.pos,b.pos+c.length,d),la&&9>xa&&(h=!0),b.pos+=c.length;b.trailingSpace=32==e.charCodeAt(c.length-1);if(k||f||n||h||g)return c=k||"",f&&(c+=f),n&&(c+=n),f=x("span",[d],c,g),a&&(f.title=a),b.content.appendChild(f);b.content.appendChild(d)}}function fc(b,c){return function(k,f,n,a,g,d,e){n=n?n+" cm-force-border":"cm-force-border";for(var m=k.pos,h=m+f.length;;){for(var t=void 0,v=0;v<c.length&&!(t=c[v],t.to>m&&t.from<=
m);v++);if(t.to>=h)return b(k,f,n,a,g,d,e);b(k,f.slice(0,t.to-m),n,a,null,d,e);a=null;f=f.slice(t.to-m);m=t.to}}}function ve(b,c,k,f){var n=!f&&k.widgetNode;n&&b.map.push(b.pos,b.pos+c,n);!f&&b.cm.display.input.needsContentAttribute&&(n||(n=b.content.appendChild(document.createElement("span"))),n.setAttribute("cm-marker",k.id));n&&(b.cm.display.input.setUneditable(n),b.content.appendChild(n));b.pos+=c;b.trailingSpace=!1}function Qa(b,c,k){for(var f=this.line=c,n;f=Ga(f,!1);)f=f.find(1,!0).line,(n||
(n=[])).push(f);this.size=(this.rest=n)?ea(P(this.rest))-k+1:1;this.node=this.text=null;this.hidden=ra(b,c)}function fd(b,c,k){var f=[],n;for(n=c;n<k;)c=new Qa(b.doc,E(b.doc,n),n),n+=c.size,f.push(c);return f}function og(b,c){var k=b.ownsGroup;if(k)try{var f=k.delayedCallbacks,n=0;do{for(;n<f.length;n++)f[n].call(null);for(var a=0;a<k.ops.length;a++){var g=k.ops[a];if(g.cursorActivityHandlers)for(;g.cursorActivityCalled<g.cursorActivityHandlers.length;)g.cursorActivityHandlers[g.cursorActivityCalled++].call(null,
g.cm)}}while(n<f.length)}finally{gc=null,c(k)}}function Wa(b,c){var k=b._handlers&&b._handlers[c]||cd;if(k.length){var f=Array.prototype.slice.call(arguments,2),n;gc?n=gc.delayedCallbacks:vc?n=vc:(n=vc=[],setTimeout(pg,0));for(var a=function(b){n.push(function(){return k[b].apply(null,f)})},g=0;g<k.length;++g)a(g)}}function pg(){var b=vc;vc=null;for(var c=0;c<b.length;++c)b[c]()}function we(b,c,k,f){for(var n=0;n<c.changes.length;n++){var a=c.changes[n];if("text"==a){var a=b,g=c,d=g.text.className,
e=xe(a,g);g.text==g.node&&(g.node=e.pre);g.text.parentNode.replaceChild(e.pre,g.text);g.text=e.pre;e.bgClass!=g.bgClass||e.textClass!=g.textClass?(g.bgClass=e.bgClass,g.textClass=e.textClass,Gd(a,g)):d&&(g.text.className=d)}else if("gutter"==a)ye(b,c,k,f);else if("class"==a)Gd(b,c);else if("widget"==a){a=b;g=c;d=f;g.alignable&&(g.alignable=null);for(var e=g.node.firstChild,m=void 0;e;e=m)m=e.nextSibling,"CodeMirror-linewidget"==e.className&&g.node.removeChild(e);ze(a,g,d)}}c.changes=null}function wc(b){b.node==
b.text&&(b.node=x("div",null,null,"position: relative"),b.text.parentNode&&b.text.parentNode.replaceChild(b.node,b.text),b.node.appendChild(b.text),la&&8>xa&&(b.node.style.zIndex=2));return b.node}function xe(b,c){var k=b.display.externalMeasured;return k&&k.line==c.line?(b.display.externalMeasured=null,c.measure=k.measure,k.built):C(b,c)}function Gd(b,c){var k=c.bgClass?c.bgClass+" "+(c.line.bgClass||""):c.line.bgClass;k&&(k+=" CodeMirror-linebackground");if(c.background)k?c.background.className=
k:(c.background.parentNode.removeChild(c.background),c.background=null);else if(k){var f=wc(c);c.background=f.insertBefore(x("div",null,k),f.firstChild);b.display.input.setUneditable(c.background)}c.line.wrapClass?wc(c).className=c.line.wrapClass:c.node!=c.text&&(c.node.className="");c.text.className=(c.textClass?c.textClass+" "+(c.line.textClass||""):c.line.textClass)||""}function ye(b,c,k,f){c.gutter&&(c.node.removeChild(c.gutter),c.gutter=null);c.gutterBackground&&(c.node.removeChild(c.gutterBackground),
c.gutterBackground=null);if(c.line.gutterClass){var n=wc(c);c.gutterBackground=x("div",null,"CodeMirror-gutter-background "+c.line.gutterClass,"left: "+(b.options.fixedGutter?f.fixedPos:-f.gutterTotalWidth)+"px; width: "+f.gutterTotalWidth+"px");b.display.input.setUneditable(c.gutterBackground);n.insertBefore(c.gutterBackground,c.text)}n=c.line.gutterMarkers;if(b.options.lineNumbers||n){var a=wc(c),g=c.gutter=x("div",null,"CodeMirror-gutter-wrapper","left: "+(b.options.fixedGutter?f.fixedPos:-f.gutterTotalWidth)+
"px");b.display.input.setUneditable(g);a.insertBefore(g,c.text);c.line.gutterClass&&(g.className+=" "+c.line.gutterClass);!b.options.lineNumbers||n&&n["CodeMirror-linenumbers"]||(c.lineNumber=g.appendChild(x("div",ya(b.options,k),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+f.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+b.display.lineNumInnerWidth+"px")));if(n)for(c=0;c<b.options.gutters.length;++c)k=b.options.gutters[c],(a=n.hasOwnProperty(k)&&n[k])&&g.appendChild(x("div",[a],"CodeMirror-gutter-elt",
"left: "+f.gutterLeft[k]+"px; width: "+f.gutterWidth[k]+"px"))}}function qg(b,c,k,f){var a=xe(b,c);c.text=c.node=a.pre;a.bgClass&&(c.bgClass=a.bgClass);a.textClass&&(c.textClass=a.textClass);Gd(b,c);ye(b,c,k,f);ze(b,c,f);return c.node}function ze(b,c,k){Ae(b,c.line,c,k,!0);if(c.rest)for(var f=0;f<c.rest.length;f++)Ae(b,c.rest[f],c,k,!1)}function Ae(b,c,k,f,a){if(c.widgets){var g=wc(k),d=0;for(c=c.widgets;d<c.length;++d){var e=c[d],m=x("div",[e.node],"CodeMirror-linewidget");e.handleMouseEvents||m.setAttribute("cm-ignore-events",
"true");var h=e,t=m,v=f;if(h.noHScroll){(k.alignable||(k.alignable=[])).push(t);var r=v.wrapperWidth;t.style.left=v.fixedPos+"px";h.coverGutter||(r-=v.gutterTotalWidth,t.style.paddingLeft=v.gutterTotalWidth+"px");t.style.width=r+"px"}h.coverGutter&&(t.style.zIndex=5,t.style.position="relative",h.noHScroll||(t.style.marginLeft=-v.gutterTotalWidth+"px"));b.display.input.setUneditable(m);a&&e.above?g.insertBefore(m,k.gutter||k.text):g.appendChild(m);Wa(e,"redraw")}}}function xc(b){if(null!=b.height)return b.height;
var c=b.doc.cm;if(!c)return 0;if(!ca(document.body,b.node)){var k="position: relative;";b.coverGutter&&(k+="margin-left: -"+c.display.gutters.offsetWidth+"px;");b.noHScroll&&(k+="width: "+c.display.wrapper.clientWidth+"px;");w(c.display.measure,x("div",[b.node],null,k))}return b.height=b.node.parentNode.offsetHeight}function Eb(b,c){for(var k=c.target||c.srcElement;k!=b.wrapper;k=k.parentNode)if(!k||1==k.nodeType&&"true"==k.getAttribute("cm-ignore-events")||k.parentNode==b.sizer&&k!=b.mover)return!0}
function Hd(b){return b.mover.offsetHeight-b.lineSpace.offsetHeight}function Be(b){if(b.cachedPaddingH)return b.cachedPaddingH;var c=w(b.measure,x("pre","x")),c=window.getComputedStyle?window.getComputedStyle(c):c.currentStyle,c={left:parseInt(c.paddingLeft),right:parseInt(c.paddingRight)};isNaN(c.left)||isNaN(c.right)||(b.cachedPaddingH=c);return c}function Bb(b){return te-b.display.nativeBarWidth}function Ob(b){return b.display.scroller.clientWidth-Bb(b)-b.display.barWidth}function Id(b){return b.display.scroller.clientHeight-
Bb(b)-b.display.barHeight}function Ce(b,c,k){if(b.line==c)return{map:b.measure.map,cache:b.measure.cache};for(var f=0;f<b.rest.length;f++)if(b.rest[f]==c)return{map:b.measure.maps[f],cache:b.measure.caches[f]};for(c=0;c<b.rest.length;c++)if(ea(b.rest[c])>k)return{map:b.measure.maps[c],cache:b.measure.caches[c],before:!0}}function Jd(b,c){if(c>=b.display.viewFrom&&c<b.display.viewTo)return b.display.view[Pb(b,c)];var k=b.display.externalMeasured;if(k&&c>=k.lineN&&c<k.lineN+k.size)return k}function Qb(b,
c){var k=ea(c),f=Jd(b,k);f&&!f.text?f=null:f&&f.changes&&(we(b,f,k,Kd(b)),b.curOp.forceUpdate=!0);if(!f){var a;a=Aa(c);f=ea(a);a=b.display.externalMeasured=new Qa(b.doc,a,f);a.lineN=f;f=a.built=C(b,a);a.text=f.pre;w(b.display.lineMeasure,f.pre);f=a}k=Ce(f,c,k);return{line:c,view:f,rect:null,map:k.map,cache:k.cache,before:k.before,hasHeights:!1}}function ub(b,c,k,f,n){c.before&&(k=-1);var g=k+(f||"");if(c.cache.hasOwnProperty(g))b=c.cache[g];else{c.rect||(c.rect=c.view.text.getBoundingClientRect());
if(!c.hasHeights){var d=c.view,e=c.rect,m=b.options.lineWrapping,h=m&&Ob(b);if(!d.measure.heights||m&&d.measure.width!=h){var t=d.measure.heights=[];if(m)for(d.measure.width=h,d=d.text.firstChild.getClientRects(),m=0;m<d.length-1;m++){var h=d[m],v=d[m+1];2<Math.abs(h.bottom-v.bottom)&&t.push((h.bottom+v.top)/2-e.top)}t.push(e.bottom-e.top)}c.hasHeights=!0}t=f;d=De(c.map,k,t);f=d.node;e=d.start;m=d.end;k=d.collapse;var r;if(3==f.nodeType){for(var l=0;4>l;l++){for(;e&&a(c.line.text.charAt(d.coverStart+
e));)--e;for(;d.coverStart+m<d.coverEnd&&a(c.line.text.charAt(d.coverStart+m));)++m;if(la&&9>xa&&0==e&&m==d.coverEnd-d.coverStart)r=f.parentNode.getBoundingClientRect();else{r=ec(f,e,m).getClientRects();m=Ee;if("left"==t)for(h=0;h<r.length&&(m=r[h]).left==m.right;h++);else for(h=r.length-1;0<=h&&(m=r[h]).left==m.right;h--);r=m}if(r.left||r.right||0==e)break;m=e;e-=1;k="right"}if(la&&11>xa){if(l=window.screen)if(l=null!=screen.logicalXDPI)if(l=screen.logicalXDPI!=screen.deviceXDPI)null!=Ld?l=Ld:(t=
w(b.display.measure,x("span","x")),l=t.getBoundingClientRect(),t=ec(t,0,1).getBoundingClientRect(),l=Ld=1<Math.abs(l.left-t.left));l&&(l=screen.logicalXDPI/screen.deviceXDPI,t=screen.logicalYDPI/screen.deviceYDPI,r={left:r.left*l,right:r.right*l,top:r.top*t,bottom:r.bottom*t})}}else 0<e&&(k=t="right"),r=b.options.lineWrapping&&1<(l=f.getClientRects()).length?l["right"==t?l.length-1:0]:f.getBoundingClientRect();la&&9>xa&&!(e||r&&(r.left||r.right))&&(r=(r=f.parentNode.getClientRects()[0])?{left:r.left,
right:r.left+yc(b.display),top:r.top,bottom:r.bottom}:Ee);f=r.top-c.rect.top;e=r.bottom-c.rect.top;l=(f+e)/2;t=c.view.measure.heights;for(d=0;d<t.length-1&&!(l<t[d]);d++);k={left:("right"==k?r.right:r.left)-c.rect.left,right:("left"==k?r.left:r.right)-c.rect.left,top:d?t[d-1]:0,bottom:t[d]};r.left||r.right||(k.bogus=!0);b.options.singleCursorHeightPerLine||(k.rtop=f,k.rbottom=e);b=k;b.bogus||(c.cache[g]=b)}return{left:b.left,right:b.right,top:n?b.rtop:b.top,bottom:n?b.rbottom:b.bottom}}function De(b,
c,k){for(var f,a,g,d,e,m,h=0;h<b.length;h+=3){e=b[h];m=b[h+1];if(c<e)a=0,g=1,d="left";else if(c<m)a=c-e,g=a+1;else if(h==b.length-3||c==m&&b[h+3]>c)g=m-e,a=g-1,c>=m&&(d="right");if(null!=a){f=b[h+2];e==m&&k==(f.insertLeft?"left":"right")&&(d=k);if("left"==k&&0==a)for(;h&&b[h-2]==b[h-3]&&b[h-1].insertLeft;)f=b[(h-=3)+2],d="left";if("right"==k&&a==m-e)for(;h<b.length-3&&b[h+3]==b[h+4]&&!b[h+5].insertLeft;)f=b[(h+=3)+2],d="right";break}}return{node:f,start:a,end:g,collapse:d,coverStart:e,coverEnd:m}}
function Fe(b){if(b.measure&&(b.measure.cache={},b.measure.heights=null,b.rest))for(var c=0;c<b.rest.length;c++)b.measure.caches[c]={}}function Ge(b){b.display.externalMeasure=null;I(b.display.lineMeasure);for(var c=0;c<b.display.view.length;c++)Fe(b.display.view[c])}function zc(b){Ge(b);b.display.cachedCharWidth=b.display.cachedTextHeight=b.display.cachedPaddingH=null;b.options.lineWrapping||(b.display.maxLineChanged=!0);b.display.lineNumChars=null}function He(){return gd&&hd?-(document.body.getBoundingClientRect().left-
parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Ie(){return gd&&hd?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Md(b){var c=0;if(b.widgets)for(var k=0;k<b.widgets.length;++k)b.widgets[k].above&&(c+=xc(b.widgets[k]));return c}function id(b,c,k,f,a){a||(a=Md(c),k.top+=a,k.bottom+=a);
if("line"==f)return k;f||(f="local");c=Ia(c);c="local"==f?c+b.display.lineSpace.offsetTop:c-b.display.viewOffset;if("page"==f||"window"==f)b=b.display.lineSpace.getBoundingClientRect(),c+=b.top+("window"==f?0:Ie()),f=b.left+("window"==f?0:He()),k.left+=f,k.right+=f;k.top+=c;k.bottom+=c;return k}function Je(b,c,k){if("div"==k)return c;var f=c.left;c=c.top;"page"==k?(f-=He(),c-=Ie()):"local"!=k&&k||(k=b.display.sizer.getBoundingClientRect(),f+=k.left,c+=k.top);b=b.display.lineSpace.getBoundingClientRect();
return{left:f-b.left,top:c-b.top}}function Nd(b,c,k,f,a){f||(f=E(b.doc,c.line));var g=f;c=c.ch;f=ub(b,Qb(b,f),c,a);return id(b,g,f,k)}function vb(b,c,k,f,a,g){function d(c,e){var R=ub(b,a,c,e?"right":"left",g);e?R.left=R.right:R.right=R.left;return id(b,f,R,k)}function e(b,c,f){return d(f?b-1:b,1==m[c].level!=f)}f=f||E(b.doc,c.line);a||(a=Qb(b,f));var m=ib(f,b.doc.direction),h=c.ch;c=c.sticky;h>=f.text.length?(h=f.text.length,c="before"):0>=h&&(h=0,c="after");if(!m)return d("before"==c?h-1:h,"before"==
c);var t=sa(m,h,c),v=uc,t=e(h,t,"before"==c);null!=v&&(t.other=e(h,v,"before"!=c));return t}function Ke(b,c){var k=0;c=A(b.doc,c);b.options.lineWrapping||(k=yc(b.display)*c.ch);var f=E(b.doc,c.line),a=Ia(f)+b.display.lineSpace.offsetTop;return{left:k,right:k,top:a,bottom:a+f.height}}function Od(b,c,k,f,a){b=B(b,c,k);b.xRel=a;f&&(b.outside=!0);return b}function Pd(b,c,k){var f=b.doc;k+=b.display.viewOffset;if(0>k)return Od(f.first,0,null,!0,-1);var a=Za(f,k),g=f.first+f.size-1;if(a>g)return Od(f.first+
f.size-1,E(f,g).text.length,null,!0,1);0>c&&(c=0);for(f=E(f,a);;)if(a=rg(b,f,a,c,k),g=(f=Ga(f,!1))&&f.find(0,!0),f&&(a.ch>g.from.ch||a.ch==g.from.ch&&0<a.xRel))a=ea(f=g.to.line);else return a}function Le(b,c,k,f){f-=Md(c);c=c.text.length;var a=u(function(c){return ub(b,k,c-1).bottom<=f},c,0);c=u(function(c){return ub(b,k,c).top>f},a,c);return{begin:a,end:c}}function Me(b,c,k,f){k||(k=Qb(b,c));f=id(b,c,ub(b,k,f),"line").top;return Le(b,c,k,f)}function Qd(b,c,k,f){return b.bottom<=k?!1:b.top>k?!0:(f?
b.left:b.right)>c}function rg(b,c,k,f,a){a-=Ia(c);var g=Qb(b,c),e=Md(c),m=0,h=c.text.length,t=!0,v=ib(c,b.doc.direction);v&&(v=(b.options.lineWrapping?sg:tg)(b,c,k,g,v,f,a),m=(t=1!=v.level)?v.from:v.to-1,h=t?v.to:v.from-1);var r=null,l=null,v=u(function(c){var k=ub(b,g,c);k.top+=e;k.bottom+=e;if(!Qd(k,f,a,!1))return!1;k.top<=a&&k.left<=f&&(r=c,l=k);return!0},m,h),p=!1;l?(m=f-l.left<l.right-f,t=m==t,v=r+(t?0:1),t=t?"after":"before",m=m?l.left:l.right):(t||v!=h&&v!=m||v++,t=0==v?"after":v==c.text.length?
"before":ub(b,g,v-(t?1:0)).bottom+e<=a==t?"after":"before",p=vb(b,B(k,v,t),"line",c,g),m=p.left,p=a<p.top||a>=p.bottom);v=d(c.text,v,1);return Od(k,v,t,p,f-m)}function tg(b,c,k,f,a,g,d){var e=u(function(e){e=a[e];var m=1!=e.level;return Qd(vb(b,B(k,m?e.to:e.from,m?"before":"after"),"line",c,f),g,d,!0)},0,a.length-1),m=a[e];if(0<e){var h=1!=m.level,h=vb(b,B(k,h?m.from:m.to,h?"after":"before"),"line",c,f);Qd(h,g,d,!0)&&h.top>d&&(m=a[e-1])}return m}function sg(b,c,k,f,a,g,d){d=Le(b,c,f,d);k=d.begin;
d=d.end;/\s/.test(c.text.charAt(d-1))&&d--;for(var e=c=null,m=0;m<a.length;m++){var h=a[m];if(!(h.from>=d||h.to<=k)){var t=ub(b,f,1!=h.level?Math.min(d,h.to)-1:Math.max(k,h.from)).right,t=t<g?g-t+1E9:t-g;if(!c||e>t)c=h,e=t}}c||(c=a[a.length-1]);c.from<k&&(c={from:k,to:c.to,level:c.level});c.to>d&&(c={from:c.from,to:d,level:c.level});return c}function Rb(b){if(null!=b.cachedTextHeight)return b.cachedTextHeight;if(null==Sb){Sb=x("pre");for(var c=0;49>c;++c)Sb.appendChild(document.createTextNode("x")),
Sb.appendChild(x("br"));Sb.appendChild(document.createTextNode("x"))}w(b.measure,Sb);c=Sb.offsetHeight/50;3<c&&(b.cachedTextHeight=c);I(b.measure);return c||1}function yc(b){if(null!=b.cachedCharWidth)return b.cachedCharWidth;var c=x("span","xxxxxxxxxx"),k=x("pre",[c]);w(b.measure,k);c=c.getBoundingClientRect();c=(c.right-c.left)/10;2<c&&(b.cachedCharWidth=c);return c||10}function Kd(b){for(var c=b.display,k={},f={},a=c.gutters.clientLeft,g=c.gutters.firstChild,d=0;g;g=g.nextSibling,++d)k[b.options.gutters[d]]=
g.offsetLeft+g.clientLeft+a,f[b.options.gutters[d]]=g.clientWidth;return{fixedPos:Rd(c),gutterTotalWidth:c.gutters.offsetWidth,gutterLeft:k,gutterWidth:f,wrapperWidth:c.wrapper.clientWidth}}function Rd(b){return b.scroller.getBoundingClientRect().left-b.sizer.getBoundingClientRect().left}function Ne(b){var c=Rb(b.display),k=b.options.lineWrapping,f=k&&Math.max(5,b.display.scroller.clientWidth/yc(b.display)-3);return function(a){if(ra(b.doc,a))return 0;var g=0;if(a.widgets)for(var d=0;d<a.widgets.length;d++)a.widgets[d].height&&
(g+=a.widgets[d].height);return k?g+(Math.ceil(a.text.length/f)||1)*c:g+c}}function Sd(b){var c=b.doc,k=Ne(b);c.iter(function(b){var c=k(b);c!=b.height&&ha(b,c)})}function Tb(b,c,k,f){var a=b.display;if(!k&&"true"==(c.target||c.srcElement).getAttribute("cm-not-content"))return null;var g,d;k=a.lineSpace.getBoundingClientRect();try{g=c.clientX-k.left,d=c.clientY-k.top}catch(m){return null}c=Pd(b,g,d);var h;f&&1==c.xRel&&(h=E(b.doc,c.line).text).length==c.ch&&(f=e(h,h.length,b.options.tabSize)-h.length,
c=B(c.line,Math.max(0,Math.round((g-Be(b.display).left)/yc(b.display))-f)));return c}function Pb(b,c){if(c>=b.display.viewTo)return null;c-=b.display.viewFrom;if(0>c)return null;for(var k=b.display.view,f=0;f<k.length;f++)if(c-=k[f].size,0>c)return f}function Ac(b){b.display.input.showSelection(b.display.input.prepareSelection())}function Oe(b,c){void 0===c&&(c=!0);for(var k=b.doc,f={},a=f.cursors=document.createDocumentFragment(),g=f.selection=document.createDocumentFragment(),d=0;d<k.sel.ranges.length;d++)if(c||
d!=k.sel.primIndex){var e=k.sel.ranges[d];if(!(e.from().line>=b.display.viewTo||e.to().line<b.display.viewFrom)){var m=e.empty();(m||b.options.showCursorWhenSelecting)&&Pe(b,e.head,a);m||ug(b,e,g)}}return f}function Pe(b,c,k){c=vb(b,c,"div",null,null,!b.options.singleCursorHeightPerLine);var f=k.appendChild(x("div","\u00a0","CodeMirror-cursor"));f.style.left=c.left+"px";f.style.top=c.top+"px";f.style.height=Math.max(0,c.bottom-c.top)*b.options.cursorHeight+"px";c.other&&(b=k.appendChild(x("div","\u00a0",
"CodeMirror-cursor CodeMirror-secondarycursor")),b.style.display="",b.style.left=c.other.left+"px",b.style.top=c.other.top+"px",b.style.height=0.85*(c.other.bottom-c.other.top)+"px")}function jd(b,c){return b.top-c.top||b.left-c.left}function ug(b,c,k){function f(b,c,k,f){0>c&&(c=0);c=Math.round(c);f=Math.round(f);e.appendChild(x("div",null,"CodeMirror-selected","position: absolute; left: "+b+"px;\n                             top: "+c+"px; width: "+(null==k?t-b:k)+"px;\n                             height: "+
(f-c)+"px"))}function a(c,k,n){function g(k,f){return Nd(b,B(c,k),"div",Da,f)}function e(c,k,f){c=Me(b,Da,null,c);k="ltr"==k==("after"==f)?"left":"right";f="after"==f?c.begin:c.end-(/\s/.test(Da.text.charAt(c.end-1))?2:1);return g(f,k)[k]}var Da=E(d,c),m=Da.text.length,lb,bc,r=ib(Da,d.direction);Fa(r,k||0,null==n?m:n,function(b,c,a,d){var Da="ltr"==a,R=g(b,Da?"left":"right"),l=g(c-1,Da?"right":"left"),p=null==k&&0==b,q=null==n&&c==m,u=0==d;d=!r||d==r.length-1;3>=l.top-R.top?(c=(v?p:q)&&u?h:(Da?R:
l).left,f(c,R.top,((v?q:p)&&d?t:(Da?l:R).right)-c,R.bottom)):(Da?(Da=v&&p&&u?h:R.left,p=v?t:e(b,a,"before"),b=v?h:e(c,a,"after"),q=v&&q&&d?t:l.right):(Da=v?e(b,a,"before"):h,p=!v&&p&&u?t:R.right,b=!v&&q&&d?h:l.left,q=v?e(c,a,"after"):t),f(Da,R.top,p-Da,R.bottom),R.bottom<l.top&&f(h,R.bottom,null,l.top),f(b,l.top,q-b,l.bottom));if(!lb||0>jd(R,lb))lb=R;0>jd(l,lb)&&(lb=l);if(!bc||0>jd(R,bc))bc=R;0>jd(l,bc)&&(bc=l)});return{start:lb,end:bc}}var g=b.display,d=b.doc,e=document.createDocumentFragment(),
m=Be(b.display),h=m.left,t=Math.max(g.sizerWidth,Ob(b)-g.sizer.offsetLeft)-m.right,v="ltr"==d.direction,g=c.from();c=c.to();if(g.line==c.line)a(g.line,g.ch,c.ch);else{var r=E(d,g.line),m=E(d,c.line),m=Aa(r)==Aa(m),g=a(g.line,g.ch,m?r.text.length+1:null).end;c=a(c.line,m?0:null,c.ch).start;m&&(g.top<c.top-2?(f(g.right,g.top,null,g.bottom),f(h,c.top,c.left,c.bottom)):f(g.right,g.top,c.left-g.right,g.bottom));g.bottom<c.top&&f(h,g.bottom,null,c.top)}k.appendChild(e)}function Td(b){if(b.state.focused){var c=
b.display;clearInterval(c.blinker);var k=!0;c.cursorDiv.style.visibility="";0<b.options.cursorBlinkRate?c.blinker=setInterval(function(){return c.cursorDiv.style.visibility=(k=!k)?"":"hidden"},b.options.cursorBlinkRate):0>b.options.cursorBlinkRate&&(c.cursorDiv.style.visibility="hidden")}}function Qe(b){b.state.focused||(b.display.input.focus(),Ud(b))}function Re(b){b.state.delayingBlurEvent=!0;setTimeout(function(){b.state.delayingBlurEvent&&(b.state.delayingBlurEvent=!1,Bc(b))},100)}function Ud(b,
c){b.state.delayingBlurEvent&&(b.state.delayingBlurEvent=!1);"nocursor"!=b.options.readOnly&&(b.state.focused||(qa(b,"focus",b,c),b.state.focused=!0,da(b.display.wrapper,"CodeMirror-focused"),b.curOp||b.display.selForContextMenu==b.doc.sel||(b.display.input.reset(),Ya&&setTimeout(function(){return b.display.input.reset(!0)},20)),b.display.input.receivedFocus()),Td(b))}function Bc(b,c){b.state.delayingBlurEvent||(b.state.focused&&(qa(b,"blur",b,c),b.state.focused=!1,Ub(b.display.wrapper,"CodeMirror-focused")),
clearInterval(b.display.blinker),setTimeout(function(){b.state.focused||(b.display.shift=!1)},150))}function kd(b){b=b.display;for(var c=b.lineDiv.offsetTop,k=0;k<b.view.length;k++){var f=b.view[k],a=void 0;if(!f.hidden){if(la&&8>xa)var g=f.node.offsetTop+f.node.offsetHeight,a=g-c,c=g;else a=f.node.getBoundingClientRect(),a=a.bottom-a.top;g=f.line.height-a;2>a&&(a=Rb(b));if(0.005<g||-0.005>g)if(ha(f.line,a),Se(f.line),f.rest)for(a=0;a<f.rest.length;a++)Se(f.rest[a])}}}function Se(b){if(b.widgets)for(var c=
0;c<b.widgets.length;++c){var k=b.widgets[c],f=k.node.parentNode;f&&(k.height=f.offsetHeight)}}function Vd(b,c,k){var f=k&&null!=k.top?Math.max(0,k.top):b.scroller.scrollTop,f=Math.floor(f-b.lineSpace.offsetTop),a=k&&null!=k.bottom?k.bottom:f+b.wrapper.clientHeight,f=Za(c,f),a=Za(c,a);if(k&&k.ensure){var g=k.ensure.from.line;k=k.ensure.to.line;g<f?(f=g,a=Za(c,Ia(E(c,g))+b.wrapper.clientHeight)):Math.min(k,c.lastLine())>=a&&(f=Za(c,Ia(E(c,k))-b.wrapper.clientHeight),a=k)}return{from:f,to:Math.max(a,
f+1)}}function Te(b){var c=b.display,k=c.view;if(c.alignWidgets||c.gutters.firstChild&&b.options.fixedGutter){for(var f=Rd(c)-c.scroller.scrollLeft+b.doc.scrollLeft,a=c.gutters.offsetWidth,g=f+"px",d=0;d<k.length;d++)if(!k[d].hidden){b.options.fixedGutter&&(k[d].gutter&&(k[d].gutter.style.left=g),k[d].gutterBackground&&(k[d].gutterBackground.style.left=g));var e=k[d].alignable;if(e)for(var m=0;m<e.length;m++)e[m].style.left=g}b.options.fixedGutter&&(c.gutters.style.left=f+a+"px")}}function Ue(b){if(!b.options.lineNumbers)return!1;
var c=b.doc,c=ya(b.options,c.first+c.size-1),k=b.display;if(c.length!=k.lineNumChars){var f=k.measure.appendChild(x("div",[x("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=f.firstChild.offsetWidth,f=f.offsetWidth-a;k.lineGutter.style.width="";k.lineNumInnerWidth=Math.max(a,k.lineGutter.offsetWidth-f)+1;k.lineNumWidth=k.lineNumInnerWidth+f;k.lineNumChars=k.lineNumInnerWidth?c.length:-1;k.lineGutter.style.width=k.lineNumWidth+"px";Wd(b);return!0}return!1}function Xd(b,c){var k=b.display,
f=Rb(b.display);0>c.top&&(c.top=0);var a=b.curOp&&null!=b.curOp.scrollTop?b.curOp.scrollTop:k.scroller.scrollTop,g=Id(b),d={};c.bottom-c.top>g&&(c.bottom=c.top+g);var e=b.doc.height+Hd(k),m=c.top<f,f=c.bottom>e-f;c.top<a?d.scrollTop=m?0:c.top:c.bottom>a+g&&(g=Math.min(c.top,(f?e:c.bottom)-g),g!=a&&(d.scrollTop=g));a=b.curOp&&null!=b.curOp.scrollLeft?b.curOp.scrollLeft:k.scroller.scrollLeft;k=Ob(b)-(b.options.fixedGutter?k.gutters.offsetWidth:0);if(g=c.right-c.left>k)c.right=c.left+k;10>c.left?d.scrollLeft=
0:c.left<a?d.scrollLeft=Math.max(0,c.left-(g?0:10)):c.right>k+a-3&&(d.scrollLeft=c.right+(g?0:10)-k);return d}function ld(b,c){null!=c&&(md(b),b.curOp.scrollTop=(null==b.curOp.scrollTop?b.doc.scrollTop:b.curOp.scrollTop)+c)}function hc(b){md(b);var c=b.getCursor();b.curOp.scrollToPos={from:c,to:c,margin:b.options.cursorScrollMargin}}function Cc(b,c,k){null==c&&null==k||md(b);null!=c&&(b.curOp.scrollLeft=c);null!=k&&(b.curOp.scrollTop=k)}function md(b){var c=b.curOp.scrollToPos;if(c){b.curOp.scrollToPos=
null;var k=Ke(b,c.from),f=Ke(b,c.to);Ve(b,k,f,c.margin)}}function Ve(b,c,k,f){c=Xd(b,{left:Math.min(c.left,k.left),top:Math.min(c.top,k.top)-f,right:Math.max(c.right,k.right),bottom:Math.max(c.bottom,k.bottom)+f});Cc(b,c.scrollLeft,c.scrollTop)}function Dc(b,c){2>Math.abs(b.doc.scrollTop-c)||(Gb||Yd(b,{top:c}),We(b,c,!0),Gb&&Yd(b),Ec(b,100))}function We(b,c,k){c=Math.min(b.display.scroller.scrollHeight-b.display.scroller.clientHeight,c);if(b.display.scroller.scrollTop!=c||k)b.doc.scrollTop=c,b.display.scrollbars.setScrollTop(c),
b.display.scroller.scrollTop!=c&&(b.display.scroller.scrollTop=c)}function Vb(b,c,k,f){c=Math.min(c,b.display.scroller.scrollWidth-b.display.scroller.clientWidth);(k?c==b.doc.scrollLeft:2>Math.abs(b.doc.scrollLeft-c))&&!f||(b.doc.scrollLeft=c,Te(b),b.display.scroller.scrollLeft!=c&&(b.display.scroller.scrollLeft=c),b.display.scrollbars.setScrollLeft(c))}function Fc(b){var c=b.display,k=c.gutters.offsetWidth,f=Math.round(b.doc.height+Hd(b.display));return{clientHeight:c.scroller.clientHeight,viewHeight:c.wrapper.clientHeight,
scrollWidth:c.scroller.scrollWidth,clientWidth:c.scroller.clientWidth,viewWidth:c.wrapper.clientWidth,barLeft:b.options.fixedGutter?k:0,docHeight:f,scrollHeight:f+Bb(b)+c.barHeight,nativeBarWidth:c.nativeBarWidth,gutterWidth:k}}function ic(b,c){c||(c=Fc(b));var k=b.display.barWidth,f=b.display.barHeight;Xe(b,c);for(var a=0;4>a&&k!=b.display.barWidth||f!=b.display.barHeight;a++)k!=b.display.barWidth&&b.options.lineWrapping&&kd(b),Xe(b,Fc(b)),k=b.display.barWidth,f=b.display.barHeight}function Xe(b,
c){var k=b.display,f=k.scrollbars.update(c);k.sizer.style.paddingRight=(k.barWidth=f.right)+"px";k.sizer.style.paddingBottom=(k.barHeight=f.bottom)+"px";k.heightForcer.style.borderBottom=f.bottom+"px solid transparent";f.right&&f.bottom?(k.scrollbarFiller.style.display="block",k.scrollbarFiller.style.height=f.bottom+"px",k.scrollbarFiller.style.width=f.right+"px"):k.scrollbarFiller.style.display="";f.bottom&&b.options.coverGutterNextToScrollbar&&b.options.fixedGutter?(k.gutterFiller.style.display=
"block",k.gutterFiller.style.height=f.bottom+"px",k.gutterFiller.style.width=c.gutterWidth+"px"):k.gutterFiller.style.display=""}function Ye(b){b.display.scrollbars&&(b.display.scrollbars.clear(),b.display.scrollbars.addClass&&Ub(b.display.wrapper,b.display.scrollbars.addClass));b.display.scrollbars=new Ze[b.options.scrollbarStyle](function(c){b.display.wrapper.insertBefore(c,b.display.scrollbarFiller);Y(c,"mousedown",function(){b.state.focused&&setTimeout(function(){return b.display.input.focus()},
0)});c.setAttribute("cm-not-content","true")},function(c,k){"horizontal"==k?Vb(b,c):Dc(b,c)},b);b.display.scrollbars.addClass&&da(b.display.wrapper,b.display.scrollbars.addClass)}function Wb(b){b.curOp={cm:b,viewChanged:!1,startHeight:b.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++vg};b=b.curOp;gc?gc.ops.push(b):b.ownsGroup=gc=
{ops:[b],delayedCallbacks:[]}}function Xb(b){og(b.curOp,function(b){for(var k=0;k<b.ops.length;k++)b.ops[k].cm.curOp=null;b=b.ops;for(k=0;k<b.length;k++){var f=b[k],a=f.cm,g=a.display,d=a,e=d.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Bb(d)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Bb(d)+"px",e.scrollbarsClipped=!0);f.updateMaxLine&&ua(a);f.mustUpdate=
f.viewChanged||f.forceUpdate||null!=f.scrollTop||f.scrollToPos&&(f.scrollToPos.from.line<g.viewFrom||f.scrollToPos.to.line>=g.viewTo)||g.maxLineChanged&&a.options.lineWrapping;f.update=f.mustUpdate&&new nd(a,f.mustUpdate&&{top:f.scrollTop,ensure:f.scrollToPos},f.forceUpdate)}for(k=0;k<b.length;k++)f=b[k],f.updatedDisplay=f.mustUpdate&&Zd(f.cm,f.update);for(k=0;k<b.length;k++)if(f=b[k],a=f.cm,g=a.display,f.updatedDisplay&&kd(a),f.barMeasure=Fc(a),g.maxLineChanged&&!a.options.lineWrapping&&(d=f,e=g.maxLine.text.length,
e=ub(a,Qb(a,g.maxLine),e,void 0),d.adjustWidthTo=e.left+3,a.display.sizerWidth=f.adjustWidthTo,f.barMeasure.scrollWidth=Math.max(g.scroller.clientWidth,g.sizer.offsetLeft+f.adjustWidthTo+Bb(a)+a.display.barWidth),f.maxScrollLeft=Math.max(0,g.sizer.offsetLeft+f.adjustWidthTo-Ob(a))),f.updatedDisplay||f.selectionChanged)f.preparedSelection=g.input.prepareSelection();for(k=0;k<b.length;k++)f=b[k],a=f.cm,null!=f.adjustWidthTo&&(a.display.sizer.style.minWidth=f.adjustWidthTo+"px",f.maxScrollLeft<a.doc.scrollLeft&&
Vb(a,Math.min(a.display.scroller.scrollLeft,f.maxScrollLeft),!0),a.display.maxLineChanged=!1),g=f.focus&&f.focus==Z(),f.preparedSelection&&a.display.input.showSelection(f.preparedSelection,g),(f.updatedDisplay||f.startHeight!=a.doc.height)&&ic(a,f.barMeasure),f.updatedDisplay&&$d(a,f.barMeasure),f.selectionChanged&&Td(a),a.state.focused&&f.updateInput&&a.display.input.reset(f.typing),g&&Qe(f.cm);for(k=0;k<b.length;k++){f=b[k];a=f.cm;g=a.display;d=a.doc;f.updatedDisplay&&$e(a,f.update);null==g.wheelStartX||
null==f.scrollTop&&null==f.scrollLeft&&!f.scrollToPos||(g.wheelStartX=g.wheelStartY=null);null!=f.scrollTop&&We(a,f.scrollTop,f.forceScroll);null!=f.scrollLeft&&Vb(a,f.scrollLeft,!0,!0);if(f.scrollToPos){var e=A(d,f.scrollToPos.from),m=A(d,f.scrollToPos.to),h=f.scrollToPos.margin;null==h&&(h=0);var t=void 0;a.options.lineWrapping||e!=m||(e=e.ch?B(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e,m="before"==e.sticky?B(e.line,e.ch+1,"before"):e);for(var v=0;5>v;v++){var r=!1,t=vb(a,e),l=m&&m!=e?vb(a,
m):t,t={left:Math.min(t.left,l.left),top:Math.min(t.top,l.top)-h,right:Math.max(t.left,l.left),bottom:Math.max(t.bottom,l.bottom)+h},l=Xd(a,t),p=a.doc.scrollTop,q=a.doc.scrollLeft;null!=l.scrollTop&&(Dc(a,l.scrollTop),1<Math.abs(a.doc.scrollTop-p)&&(r=!0));null!=l.scrollLeft&&(Vb(a,l.scrollLeft),1<Math.abs(a.doc.scrollLeft-q)&&(r=!0));if(!r)break}m=t;na(a,"scrollCursorIntoView")||(h=a.display,v=h.sizer.getBoundingClientRect(),e=null,0>m.top+v.top?e=!0:m.bottom+v.top>(window.innerHeight||document.documentElement.clientHeight)&&
(e=!1),null==e||wg||(m=x("div","\u200b",null,"position: absolute;\n                         top: "+(m.top-h.viewOffset-a.display.lineSpace.offsetTop)+"px;\n                         height: "+(m.bottom-m.top+Bb(a)+h.barHeight)+"px;\n                         left: "+m.left+"px; width: "+Math.max(2,m.right-m.left)+"px;"),a.display.lineSpace.appendChild(m),m.scrollIntoView(e),a.display.lineSpace.removeChild(m)))}m=f.maybeHiddenMarkers;e=f.maybeUnhiddenMarkers;if(m)for(h=0;h<m.length;++h)m[h].lines.length||
qa(m[h],"hide");if(e)for(m=0;m<e.length;++m)e[m].lines.length&&qa(e[m],"unhide");g.wrapper.offsetHeight&&(d.scrollTop=a.display.scroller.scrollTop);f.changeObjs&&qa(a,"changes",a,f.changeObjs);f.update&&f.update.finish()}})}function kb(b,c){if(b.curOp)return c();Wb(b);try{return c()}finally{Xb(b)}}function Ra(b,c){return function(){if(b.curOp)return c.apply(b,arguments);Wb(b);try{return c.apply(b,arguments)}finally{Xb(b)}}}function bb(b){return function(){if(this.curOp)return b.apply(this,arguments);
Wb(this);try{return b.apply(this,arguments)}finally{Xb(this)}}}function Sa(b){return function(){var c=this.cm;if(!c||c.curOp)return b.apply(this,arguments);Wb(c);try{return b.apply(this,arguments)}finally{Xb(c)}}}function fb(b,c,k,f){null==c&&(c=b.doc.first);null==k&&(k=b.doc.first+b.doc.size);f||(f=0);var a=b.display;f&&k<a.viewTo&&(null==a.updateLineNumbers||a.updateLineNumbers>c)&&(a.updateLineNumbers=c);b.curOp.viewChanged=!0;if(c>=a.viewTo)Hb&&Ha(b.doc,c)<a.viewTo&&Ib(b);else if(k<=a.viewFrom)Hb&&
Ua(b.doc,k+f)>a.viewFrom?Ib(b):(a.viewFrom+=f,a.viewTo+=f);else if(c<=a.viewFrom&&k>=a.viewTo)Ib(b);else if(c<=a.viewFrom){var g=od(b,k,k+f,1);g?(a.view=a.view.slice(g.index),a.viewFrom=g.lineN,a.viewTo+=f):Ib(b)}else if(k>=a.viewTo)(g=od(b,c,c,-1))?(a.view=a.view.slice(0,g.index),a.viewTo=g.lineN):Ib(b);else{var g=od(b,c,c,-1),d=od(b,k,k+f,1);g&&d?(a.view=a.view.slice(0,g.index).concat(fd(b,g.lineN,d.lineN)).concat(a.view.slice(d.index)),a.viewTo+=f):Ib(b)}if(b=a.externalMeasured)k<b.lineN?b.lineN+=
f:c<b.lineN+b.size&&(a.externalMeasured=null)}function Jb(b,c,k){b.curOp.viewChanged=!0;var f=b.display,a=b.display.externalMeasured;a&&c>=a.lineN&&c<a.lineN+a.size&&(f.externalMeasured=null);c<f.viewFrom||c>=f.viewTo||(b=f.view[Pb(b,c)],null!=b.node&&(b=b.changes||(b.changes=[]),-1==J(b,k)&&b.push(k)))}function Ib(b){b.display.viewFrom=b.display.viewTo=b.doc.first;b.display.view=[];b.display.viewOffset=0}function od(b,c,k,f){var a=Pb(b,c),g=b.display.view;if(!Hb||k==b.doc.first+b.doc.size)return{index:a,
lineN:k};for(var d=b.display.viewFrom,e=0;e<a;e++)d+=g[e].size;if(d!=c){if(0<f){if(a==g.length-1)return null;c=d+g[a].size-c;a++}else c=d-c;k+=c}for(;Ha(b.doc,k)!=k;){if(a==(0>f?0:g.length-1))return null;k+=f*g[a-(0>f?1:0)].size;a+=f}return{index:a,lineN:k}}function af(b){b=b.display.view;for(var c=0,k=0;k<b.length;k++){var f=b[k];f.hidden||f.node&&!f.changes||++c}return c}function Ec(b,c){b.doc.highlightFrontier<b.display.viewTo&&b.state.highlight.set(c,fa(xg,b))}function xg(b){var c=b.doc;if(!(c.highlightFrontier>=
b.display.viewTo)){var k=+new Date+b.options.workTime,f=V(b,c.highlightFrontier),a=[];c.iter(f.line,Math.min(c.first+c.size,b.display.viewTo+500),function(g){if(f.line>=b.display.viewFrom){var d=g.styles,e=g.text.length>b.options.maxHighlightLength?mb(c.mode,f.state):null,m=p(b,g,f,!0);e&&(f.state=e);g.styles=m.styles;e=g.styleClasses;(m=m.classes)?g.styleClasses=m:e&&(g.styleClasses=null);m=!d||d.length!=g.styles.length||e!=m&&(!e||!m||e.bgClass!=m.bgClass||e.textClass!=m.textClass);for(e=0;!m&&
e<d.length;++e)m=d[e]!=g.styles[e];m&&a.push(f.line);g.stateAfter=f.save()}else g.text.length<=b.options.maxHighlightLength&&T(b,g.text,f),g.stateAfter=0==f.line%5?f.save():null;f.nextLine();if(+new Date>k)return Ec(b,b.options.workDelay),!0});c.highlightFrontier=f.line;c.modeFrontier=Math.max(c.modeFrontier,f.line);a.length&&kb(b,function(){for(var c=0;c<a.length;c++)Jb(b,a[c],"text")})}}function Zd(b,c){var k=b.display,f=b.doc;if(c.editorIsHidden)return Ib(b),!1;if(!c.force&&c.visible.from>=k.viewFrom&&
c.visible.to<=k.viewTo&&(null==k.updateLineNumbers||k.updateLineNumbers>=k.viewTo)&&k.renderedView==k.view&&0==af(b))return!1;Ue(b)&&(Ib(b),c.dims=Kd(b));var a=f.first+f.size,g=Math.max(c.visible.from-b.options.viewportMargin,f.first),d=Math.min(a,c.visible.to+b.options.viewportMargin);k.viewFrom<g&&20>g-k.viewFrom&&(g=Math.max(f.first,k.viewFrom));k.viewTo>d&&20>k.viewTo-d&&(d=Math.min(a,k.viewTo));Hb&&(g=Ha(b.doc,g),d=Ua(b.doc,d));f=g!=k.viewFrom||d!=k.viewTo||k.lastWrapHeight!=c.wrapperHeight||
k.lastWrapWidth!=c.wrapperWidth;a=b.display;0==a.view.length||g>=a.viewTo||d<=a.viewFrom?(a.view=fd(b,g,d),a.viewFrom=g):(a.viewFrom>g?a.view=fd(b,g,a.viewFrom).concat(a.view):a.viewFrom<g&&(a.view=a.view.slice(Pb(b,g))),a.viewFrom=g,a.viewTo<d?a.view=a.view.concat(fd(b,a.viewTo,d)):a.viewTo>d&&(a.view=a.view.slice(0,Pb(b,d))));a.viewTo=d;k.viewOffset=Ia(E(b.doc,k.viewFrom));b.display.mover.style.top=k.viewOffset+"px";d=af(b);if(!f&&0==d&&!c.force&&k.renderedView==k.view&&(null==k.updateLineNumbers||
k.updateLineNumbers>=k.viewTo))return!1;b.hasFocus()?g=null:(g=Z())&&ca(b.display.lineDiv,g)?(g={activeElt:g},window.getSelection&&(a=window.getSelection(),a.anchorNode&&a.extend&&ca(b.display.lineDiv,a.anchorNode)&&(g.anchorNode=a.anchorNode,g.anchorOffset=a.anchorOffset,g.focusNode=a.focusNode,g.focusOffset=a.focusOffset))):g=null;4<d&&(k.lineDiv.style.display="none");yg(b,k.updateLineNumbers,c.dims);4<d&&(k.lineDiv.style.display="");k.renderedView=k.view;(d=g)&&d.activeElt&&d.activeElt!=Z()&&(d.activeElt.focus(),
d.anchorNode&&ca(document.body,d.anchorNode)&&ca(document.body,d.focusNode)&&(g=window.getSelection(),a=document.createRange(),a.setEnd(d.anchorNode,d.anchorOffset),a.collapse(!1),g.removeAllRanges(),g.addRange(a),g.extend(d.focusNode,d.focusOffset)));I(k.cursorDiv);I(k.selectionDiv);k.gutters.style.height=k.sizer.style.minHeight=0;f&&(k.lastWrapHeight=c.wrapperHeight,k.lastWrapWidth=c.wrapperWidth,Ec(b,400));k.updateLineNumbers=null;return!0}function $e(b,c){for(var k=c.viewport,f=!0;;f=!1){if(!f||
!b.options.lineWrapping||c.oldDisplayWidth==Ob(b))if(k&&null!=k.top&&(k={top:Math.min(b.doc.height+Hd(b.display)-Id(b),k.top)}),c.visible=Vd(b.display,b.doc,k),c.visible.from>=b.display.viewFrom&&c.visible.to<=b.display.viewTo)break;if(!Zd(b,c))break;kd(b);f=Fc(b);Ac(b);ic(b,f);$d(b,f);c.force=!1}c.signal(b,"update",b);if(b.display.viewFrom!=b.display.reportedViewFrom||b.display.viewTo!=b.display.reportedViewTo)c.signal(b,"viewportChange",b,b.display.viewFrom,b.display.viewTo),b.display.reportedViewFrom=
b.display.viewFrom,b.display.reportedViewTo=b.display.viewTo}function Yd(b,c){var k=new nd(b,c);if(Zd(b,k)){kd(b);$e(b,k);var f=Fc(b);Ac(b);ic(b,f);$d(b,f);k.finish()}}function yg(b,c,k){function f(c){var a=c.nextSibling;Ya&&tb&&b.display.currentWheelTarget==c?c.style.display="none":c.parentNode.removeChild(c);return a}for(var a=b.display,g=b.options.lineNumbers,d=a.lineDiv,e=d.firstChild,m=a.view,a=a.viewFrom,h=0;h<m.length;h++){var t=m[h];if(!t.hidden)if(t.node&&t.node.parentNode==d){for(;e!=t.node;)e=
f(e);e=g&&null!=c&&c<=a&&t.lineNumber;t.changes&&(-1<J(t.changes,"gutter")&&(e=!1),we(b,t,a,k));e&&(I(t.lineNumber),t.lineNumber.appendChild(document.createTextNode(ya(b.options,a))));e=t.node.nextSibling}else{var v=qg(b,t,a,k);d.insertBefore(v,e)}a+=t.size}for(;e;)e=f(e)}function Wd(b){b.display.sizer.style.marginLeft=b.display.gutters.offsetWidth+"px"}function $d(b,c){b.display.sizer.style.minHeight=c.docHeight+"px";b.display.heightForcer.style.top=c.docHeight+"px";b.display.gutters.style.height=
c.docHeight+b.display.barHeight+Bb(b)+"px"}function bf(b){var c=b.display.gutters,a=b.options.gutters;I(c);for(var f=0;f<a.length;++f){var n=a[f],g=c.appendChild(x("div",null,"CodeMirror-gutter "+n));"CodeMirror-linenumbers"==n&&(b.display.lineGutter=g,g.style.width=(b.display.lineNumWidth||1)+"px")}c.style.display=f?"":"none";Wd(b)}function ae(b){var c=J(b.gutters,"CodeMirror-linenumbers");-1==c&&b.lineNumbers?b.gutters=b.gutters.concat(["CodeMirror-linenumbers"]):-1<c&&!b.lineNumbers&&(b.gutters=
b.gutters.slice(0),b.gutters.splice(c,1))}function cf(b){var c=b.wheelDeltaX,a=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==a&&b.detail&&b.axis==b.VERTICAL_AXIS?a=b.detail:null==a&&(a=b.wheelDelta);return{x:c,y:a}}function zg(b){b=cf(b);b.x*=nb;b.y*=nb;return b}function df(b,c){var a=cf(c),f=a.x,a=a.y,n=b.display,g=n.scroller,d=g.scrollWidth>g.clientWidth,e=g.scrollHeight>g.clientHeight;if(f&&d||a&&e){if(a&&tb&&Ya){var d=c.target,m=n.view;a:for(;d!=g;d=d.parentNode)for(var h=
0;h<m.length;h++)if(m[h].node==d){b.display.currentWheelTarget=d;break a}}!f||Gb||wb||null==nb?(a&&null!=nb&&(e=a*nb,d=b.doc.scrollTop,m=d+n.wrapper.clientHeight,0>e?d=Math.max(0,d+e-50):m=Math.min(b.doc.height,m+e+50),Yd(b,{top:d,bottom:m})),20>pd&&(null==n.wheelStartX?(n.wheelStartX=g.scrollLeft,n.wheelStartY=g.scrollTop,n.wheelDX=f,n.wheelDY=a,setTimeout(function(){if(null!=n.wheelStartX){var b=g.scrollLeft-n.wheelStartX,c=g.scrollTop-n.wheelStartY,b=c&&n.wheelDY&&c/n.wheelDY||b&&n.wheelDX&&b/
n.wheelDX;n.wheelStartX=n.wheelStartY=null;b&&(nb=(nb*pd+b)/(pd+1),++pd)}},200)):(n.wheelDX+=f,n.wheelDY+=a))):(a&&e&&Dc(b,Math.max(0,g.scrollTop+a*nb)),Vb(b,Math.max(0,g.scrollLeft+f*nb)),(!a||a&&e)&&Ja(c),n.wheelStartX=null)}}function xb(b,c){var a=b[c];b.sort(function(b,c){return G(b.from(),c.from())});c=J(b,a);for(a=1;a<b.length;a++){var f=b[a],n=b[a-1];if(0<=G(n.to(),f.from())){var g=ka(n.from(),f.from()),d=ja(n.to(),f.to()),f=n.empty()?f.from()==f.head:n.from()==n.head;a<=c&&--c;b.splice(--a,
2,new oa(f?d:g,f?g:d))}}return new ob(b,c)}function Fb(b,c){return new ob([new oa(b,c||b)],0)}function Kb(b){return b.text?B(b.from.line+b.text.length-1,P(b.text).length+(1==b.text.length?b.from.ch:0)):b.to}function ef(b,c){if(0>G(b,c.from))return b;if(0>=G(b,c.to))return Kb(c);var a=b.line+c.text.length-(c.to.line-c.from.line)-1,f=b.ch;b.line==c.to.line&&(f+=Kb(c).ch-c.to.ch);return B(a,f)}function be(b,c){for(var a=[],f=0;f<b.sel.ranges.length;f++){var n=b.sel.ranges[f];a.push(new oa(ef(n.anchor,
c),ef(n.head,c)))}return xb(a,b.sel.primIndex)}function ff(b,c,a){return b.line==c.line?B(a.line,b.ch-c.ch+a.ch):B(a.line+(b.line-c.line),b.ch)}function ce(b){b.doc.mode=jb(b.options,b.doc.modeOption);Gc(b)}function Gc(b){b.doc.iter(function(b){b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null)});b.doc.modeFrontier=b.doc.highlightFrontier=b.doc.first;Ec(b,100);b.state.modeGen++;b.curOp&&fb(b)}function gf(b,c){return 0==c.from.ch&&0==c.to.ch&&""==P(c.text)&&(!b.cm||b.cm.options.wholeLineUpdateBefore)}
function de(b,c,a,f){function n(b,a,k){var n=f;b.text=a;b.stateAfter&&(b.stateAfter=null);b.styles&&(b.styles=null);null!=b.order&&(b.order=null);hb(b);Ta(b,k);a=n?n(b):1;a!=b.height&&ha(b,a);Wa(b,"change",b,c)}function g(b,c){for(var n=[],d=b;d<c;++d)n.push(new jc(m[d],a?a[d]:null,f));return n}var d=c.from,e=c.to,m=c.text,h=E(b,d.line),t=E(b,e.line),v=P(m),r=a?a[m.length-1]:null,l=e.line-d.line;c.full?(b.insert(0,g(0,m.length)),b.remove(m.length,b.size-m.length)):gf(b,c)?(e=g(0,m.length-1),n(t,t.text,
r),l&&b.remove(d.line,l),e.length&&b.insert(d.line,e)):h==t?1==m.length?n(h,h.text.slice(0,d.ch)+v+h.text.slice(e.ch),r):(l=g(1,m.length-1),l.push(new jc(v+h.text.slice(e.ch),r,f)),n(h,h.text.slice(0,d.ch)+m[0],a?a[0]:null),b.insert(d.line+1,l)):1==m.length?(n(h,h.text.slice(0,d.ch)+m[0]+t.text.slice(e.ch),a?a[0]:null),b.remove(d.line+1,l)):(n(h,h.text.slice(0,d.ch)+m[0],a?a[0]:null),n(t,v+t.text.slice(e.ch),r),r=g(1,m.length-1),1<l&&b.remove(d.line+1,l-1),b.insert(d.line+1,r));Wa(b,"change",b,c)}
function Yb(b,c,a){function f(b,g,d){if(b.linked)for(var e=0;e<b.linked.length;++e){var m=b.linked[e];if(m.doc!=g){var h=d&&m.sharedHist;if(!a||h)c(m.doc,h),f(m.doc,b,h)}}}f(b,null,!0)}function hf(b,c){if(c.cm)throw Error("This document is already in use.");b.doc=c;c.cm=b;Sd(b);ce(b);jf(b);b.options.lineWrapping||ua(b);b.options.mode=c.modeOption;fb(b)}function jf(b){("rtl"==b.doc.direction?da:Ub)(b.display.lineDiv,"CodeMirror-rtl")}function Ag(b){kb(b,function(){jf(b);fb(b)})}function qd(b){this.done=
[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=b||1}function ee(b,c){var a={from:O(c.from),to:Kb(c),text:Oa(b,c.from,c.to)};kf(b,a,c.from.line,c.to.line+1);Yb(b,function(b){return kf(b,a,c.from.line,c.to.line+1)},!0);return a}function lf(b){for(;b.length;)if(P(b).ranges)b.pop();else break}function mf(b,c,a,f){var n=b.history;n.undone.length=0;var g=+new Date,d,e,m;if(m=
n.lastOp==f||n.lastOrigin==c.origin&&c.origin&&("+"==c.origin.charAt(0)&&b.cm&&n.lastModTime>g-b.cm.options.historyEventDelay||"*"==c.origin.charAt(0)))n.lastOp==f?(lf(n.done),d=P(n.done)):n.done.length&&!P(n.done).ranges?d=P(n.done):1<n.done.length&&!n.done[n.done.length-2].ranges?(n.done.pop(),d=P(n.done)):d=void 0,m=d;if(m)e=P(d.changes),0==G(c.from,c.to)&&0==G(c.from,e.to)?e.to=Kb(c):d.changes.push(ee(b,c));else for((d=P(n.done))&&d.ranges||rd(b.sel,n.done),d={changes:[ee(b,c)],generation:n.generation},
n.done.push(d);n.done.length>n.undoDepth;)n.done.shift(),n.done[0].ranges||n.done.shift();n.done.push(a);n.generation=++n.maxGeneration;n.lastModTime=n.lastSelTime=g;n.lastOp=n.lastSelOp=f;n.lastOrigin=n.lastSelOrigin=c.origin;e||qa(b,"historyAdded")}function rd(b,c){var a=P(c);a&&a.ranges&&a.equals(b)||c.push(b)}function kf(b,c,a,f){var n=c["spans_"+b.id],g=0;b.iter(Math.max(b.first,a),Math.min(b.first+b.size,f),function(a){a.markedSpans&&((n||(n=c["spans_"+b.id]={}))[g]=a.markedSpans);++g})}function Bg(b){if(!b)return null;
for(var c,a=0;a<b.length;++a)b[a].marker.explicitlyCleared?c||(c=b.slice(0,a)):c&&c.push(b[a]);return c?c.length?c:null:b}function nf(b,c){var a;if(a=c["spans_"+b.id]){for(var f=[],n=0;n<c.text.length;++n)f.push(Bg(a[n]));a=f}else a=null;f=ma(b,c);if(!a)return f;if(!f)return a;for(n=0;n<a.length;++n){var g=a[n],d=f[n];if(g&&d){var e=0;a:for(;e<d.length;++e){for(var m=d[e],h=0;h<g.length;++h)if(g[h].marker==m.marker)continue a;g.push(m)}}else d&&(a[n]=d)}return a}function kc(b,c,a){for(var f=[],n=
0;n<b.length;++n){var g=b[n];if(g.ranges)f.push(a?ob.prototype.deepCopy.call(g):g);else{var g=g.changes,d=[];f.push({changes:d});for(var e=0;e<g.length;++e){var m=g[e],h=void 0;d.push({from:m.from,to:m.to,text:m.text});if(c)for(var t in m)(h=t.match(/^spans_(\d+)$/))&&-1<J(c,Number(h[1]))&&(P(d)[t]=m[t],delete m[t])}}}return f}function fe(b,c,a,f){return f?(b=b.anchor,a&&(f=0>G(c,b),f!=0>G(a,b)?(b=c,c=a):f!=0>G(c,a)&&(c=a)),new oa(b,c)):new oa(a||c,c)}function sd(b,c,a,f,n){null==n&&(n=b.cm&&(b.cm.display.shift||
b.extend));Xa(b,new ob([fe(b.sel.primary(),c,a,n)],0),f)}function of(b,c,a){for(var f=[],n=b.cm&&(b.cm.display.shift||b.extend),g=0;g<b.sel.ranges.length;g++)f[g]=fe(b.sel.ranges[g],c[g],null,n);c=xb(f,b.sel.primIndex);Xa(b,c,a)}function ge(b,c,a,f){var n=b.sel.ranges.slice(0);n[c]=a;Xa(b,xb(n,b.sel.primIndex),f)}function Cg(b,c,a){a={ranges:c.ranges,update:function(c){this.ranges=[];for(var a=0;a<c.length;a++)this.ranges[a]=new oa(A(b,c[a].anchor),A(b,c[a].head))},origin:a&&a.origin};qa(b,"beforeSelectionChange",
b,a);b.cm&&qa(b.cm,"beforeSelectionChange",b.cm,a);return a.ranges!=c.ranges?xb(a.ranges,a.ranges.length-1):c}function pf(b,c,a){var f=b.history.done,n=P(f);n&&n.ranges?(f[f.length-1]=c,td(b,c,a)):Xa(b,c,a)}function Xa(b,c,a){td(b,c,a);c=b.sel;var f=b.cm?b.cm.curOp.id:NaN,n=b.history,g=a&&a.origin,d;if(!(d=f==n.lastSelOp)&&(d=g)&&(d=n.lastSelOrigin==g)&&!(d=n.lastModTime==n.lastSelTime&&n.lastOrigin==g)){d=P(n.done);var e=g.charAt(0);d="*"==e||"+"==e&&d.ranges.length==c.ranges.length&&d.somethingSelected()==
c.somethingSelected()&&new Date-b.history.lastSelTime<=(b.cm?b.cm.options.historyEventDelay:500)}d?n.done[n.done.length-1]=c:rd(c,n.done);n.lastSelTime=+new Date;n.lastSelOrigin=g;n.lastSelOp=f;a&&!1!==a.clearRedo&&lf(n.undone)}function td(b,c,a){if(La(b,"beforeSelectionChange")||b.cm&&La(b.cm,"beforeSelectionChange"))c=Cg(b,c,a);var f=a&&a.bias||(0>G(c.primary().head,b.sel.primary().head)?-1:1);qf(b,rf(b,c,f,!0));a&&!1===a.scroll||!b.cm||hc(b.cm)}function qf(b,c){c.equals(b.sel)||(b.sel=c,b.cm&&
(b.cm.curOp.updateInput=b.cm.curOp.selectionChanged=!0,yb(b.cm)),Wa(b,"cursorActivity",b))}function sf(b){qf(b,rf(b,b.sel,null,!1))}function rf(b,c,a,f){for(var n,g=0;g<c.ranges.length;g++){var d=c.ranges[g],e=c.ranges.length==b.sel.ranges.length&&b.sel.ranges[g],m=he(b,d.anchor,e&&e.anchor,a,f),e=he(b,d.head,e&&e.head,a,f);if(n||m!=d.anchor||e!=d.head)n||(n=c.ranges.slice(0,g)),n[g]=new oa(m,e)}return n?xb(n,c.primIndex):c}function lc(b,c,a,f,n){var g=E(b,c.line);if(g.markedSpans)for(var d=0;d<g.markedSpans.length;++d){var e=
g.markedSpans[d],m=e.marker;if((null==e.from||(m.inclusiveLeft?e.from<=c.ch:e.from<c.ch))&&(null==e.to||(m.inclusiveRight?e.to>=c.ch:e.to>c.ch))){if(n&&(qa(m,"beforeCursorEnter"),m.explicitlyCleared))if(g.markedSpans){--d;continue}else break;if(m.atomic){if(a){d=m.find(0>f?1:-1);e=void 0;if(0>f?m.inclusiveRight:m.inclusiveLeft)d=tf(b,d,-f,d&&d.line==c.line?g:null);if(d&&d.line==c.line&&(e=G(d,a))&&(0>f?0>e:0<e))return lc(b,d,c,f,n)}a=m.find(0>f?-1:1);if(0>f?m.inclusiveLeft:m.inclusiveRight)a=tf(b,
a,f,a.line==c.line?g:null);return a?lc(b,a,c,f,n):null}}}return c}function he(b,c,a,f,n){f=f||1;c=lc(b,c,a,f,n)||!n&&lc(b,c,a,f,!0)||lc(b,c,a,-f,n)||!n&&lc(b,c,a,-f,!0);return c?c:(b.cantEdit=!0,B(b.first,0))}function tf(b,c,a,f){return 0>a&&0==c.ch?c.line>b.first?A(b,B(c.line-1)):null:0<a&&c.ch==(f||E(b,c.line)).text.length?c.line<b.first+b.size-1?B(c.line+1,0):null:new B(c.line,c.ch+a)}function uf(b){b.setSelection(B(b.firstLine(),0),B(b.lastLine()),Cb)}function vf(b,c,a){var f={canceled:!1,from:c.from,
to:c.to,text:c.text,origin:c.origin,cancel:function(){return f.canceled=!0}};a&&(f.update=function(c,a,k,g){c&&(f.from=A(b,c));a&&(f.to=A(b,a));k&&(f.text=k);void 0!==g&&(f.origin=g)});qa(b,"beforeChange",b,f);b.cm&&qa(b.cm,"beforeChange",b.cm,f);return f.canceled?null:{from:f.from,to:f.to,text:f.text,origin:f.origin}}function mc(b,c,a){if(b.cm){if(!b.cm.curOp)return Ra(b.cm,mc)(b,c,a);if(b.cm.state.suppressEdits)return}if(La(b,"beforeChange")||b.cm&&La(b.cm,"beforeChange"))if(c=vf(b,c,!0),!c)return;
if(a=wf&&!a&&ab(b,c.from,c.to))for(var f=a.length-1;0<=f;--f)xf(b,{from:a[f].from,to:a[f].to,text:f?[""]:c.text,origin:c.origin});else xf(b,c)}function xf(b,c){if(1!=c.text.length||""!=c.text[0]||0!=G(c.from,c.to)){var a=be(b,c);mf(b,c,a,b.cm?b.cm.curOp.id:NaN);Hc(b,c,a,ma(b,c));var f=[];Yb(b,function(b,a){a||-1!=J(f,b.history)||(yf(b.history,c),f.push(b.history));Hc(b,c,null,ma(b,c))})}}function ud(b,c,a){var f=b.cm&&b.cm.state.suppressEdits;if(!f||a){for(var n=b.history,g,d=b.sel,e="undo"==c?n.done:
n.undone,m="undo"==c?n.undone:n.done,h=0;h<e.length&&(g=e[h],a?!g.ranges||g.equals(b.sel):g.ranges);h++);if(h!=e.length){for(n.lastOrigin=n.lastSelOrigin=null;;)if(g=e.pop(),g.ranges){rd(g,m);if(a&&!g.equals(b.sel)){Xa(b,g,{clearRedo:!1});return}d=g}else{if(f){e.push(g);return}break}var t=[];rd(d,m);m.push({changes:t,generation:n.generation});n.generation=g.generation||++n.maxGeneration;var v=La(b,"beforeChange")||b.cm&&La(b.cm,"beforeChange");a=function(a){var f=g.changes[a];f.origin=c;if(v&&!vf(b,
f,!1))return e.length=0,{};t.push(ee(b,f));var k=a?be(b,f):P(e);Hc(b,f,k,nf(b,f));!a&&b.cm&&b.cm.scrollIntoView({from:f.from,to:Kb(f)});var n=[];Yb(b,function(b,c){c||-1!=J(n,b.history)||(yf(b.history,f),n.push(b.history));Hc(b,f,null,nf(b,f))})};for(f=g.changes.length-1;0<=f;--f)if(n=a(f))return n.v}}}function zf(b,c){if(0!=c&&(b.first+=c,b.sel=new ob(F(b.sel.ranges,function(b){return new oa(B(b.anchor.line+c,b.anchor.ch),B(b.head.line+c,b.head.ch))}),b.sel.primIndex),b.cm)){fb(b.cm,b.first,b.first-
c,c);for(var a=b.cm.display,f=a.viewFrom;f<a.viewTo;f++)Jb(b.cm,f,"gutter")}}function Hc(b,c,a,f){if(b.cm&&!b.cm.curOp)return Ra(b.cm,Hc)(b,c,a,f);if(c.to.line<b.first)zf(b,c.text.length-1-(c.to.line-c.from.line));else if(!(c.from.line>b.lastLine())){if(c.from.line<b.first){var n=c.text.length-1-(b.first-c.from.line);zf(b,n);c={from:B(b.first,0),to:B(c.to.line+n,c.to.ch),text:[P(c.text)],origin:c.origin}}n=b.lastLine();c.to.line>n&&(c={from:c.from,to:B(n,E(b,n).text.length),text:[c.text[0]],origin:c.origin});
c.removed=Oa(b,c.from,c.to);a||(a=be(b,c));b.cm?Dg(b.cm,c,f):de(b,c,f);td(b,a,Cb)}}function Dg(b,c,a){var f=b.doc,n=b.display,g=c.from,d=c.to,e=!1,m=g.line;b.options.lineWrapping||(m=ea(Aa(E(f,g.line))),f.iter(m,d.line+1,function(b){if(b==n.maxLine)return e=!0}));-1<f.sel.contains(c.from,c.to)&&yb(b);de(f,c,a,Ne(b));b.options.lineWrapping||(f.iter(m,g.line+c.text.length,function(b){var c=Ba(b);c>n.maxLineLength&&(n.maxLine=b,n.maxLineLength=c,n.maxLineChanged=!0,e=!1)}),e&&(b.curOp.updateMaxLine=
!0));r(f,g.line);Ec(b,400);a=c.text.length-(d.line-g.line)-1;c.full?fb(b):g.line!=d.line||1!=c.text.length||gf(b.doc,c)?fb(b,g.line,d.line+1,a):Jb(b,g.line,"text");a=La(b,"changes");if((f=La(b,"change"))||a)c={from:g,to:d,text:c.text,removed:c.removed,origin:c.origin},f&&Wa(b,"change",b,c),a&&(b.curOp.changeObjs||(b.curOp.changeObjs=[])).push(c);b.display.selForContextMenu=null}function nc(b,c,a,f,n){f||(f=a);0>G(f,a)&&(f=[f,a],a=f[0],f=f[1]);"string"==typeof c&&(c=b.splitLines(c));mc(b,{from:a,to:f,
text:c,origin:n})}function Af(b,c,a,f){a<b.line?b.line+=f:c<b.line&&(b.line=c,b.ch=0)}function Bf(b,c,a,f){for(var n=0;n<b.length;++n){var g=b[n],d=!0;if(g.ranges)for(g.copied||(g=b[n]=g.deepCopy(),g.copied=!0),d=0;d<g.ranges.length;d++)Af(g.ranges[d].anchor,c,a,f),Af(g.ranges[d].head,c,a,f);else{for(var e=0;e<g.changes.length;++e){var m=g.changes[e];if(a<m.from.line)m.from=B(m.from.line+f,m.from.ch),m.to=B(m.to.line+f,m.to.ch);else if(c<=m.to.line){d=!1;break}}d||(b.splice(0,n+1),n=0)}}}function yf(b,
c){var a=c.from.line,f=c.to.line,g=c.text.length-(f-a)-1;Bf(b.done,a,f,g);Bf(b.undone,a,f,g)}function Ic(b,c,a,f){var g=c,d=c;"number"==typeof c?d=E(b,Math.max(b.first,Math.min(c,b.first+b.size-1))):g=ea(c);if(null==g)return null;f(d,g)&&b.cm&&Jb(b.cm,g,a);return d}function Jc(b){this.lines=b;this.parent=null;for(var c=0,a=0;a<b.length;++a)b[a].parent=this,c+=b[a].height;this.height=c}function Kc(b){this.children=b;for(var c=0,a=0,f=0;f<b.length;++f){var g=b[f],c=c+g.chunkSize(),a=a+g.height;g.parent=
this}this.size=c;this.height=a;this.parent=null}function Eg(b,c,a,f){var g=new Lc(b,a,f),d=b.cm;d&&g.noHScroll&&(d.display.alignWidgets=!0);Ic(b,c,"widget",function(c){var a=c.widgets||(c.widgets=[]);null==g.insertAt?a.push(g):a.splice(Math.min(a.length-1,Math.max(0,g.insertAt)),0,g);g.line=c;d&&!ra(b,c)&&(a=Ia(c)<b.scrollTop,ha(c,c.height+xc(g)),a&&ld(d,g.height),d.curOp.forceUpdate=!0);return!0});d&&Wa(d,"lineWidgetAdded",d,g,"number"==typeof c?c:ea(c));return g}function oc(b,c,a,f,g){if(f&&f.shared)return Fg(b,
c,a,f,g);if(b.cm&&!b.cm.curOp)return Ra(b.cm,oc)(b,c,a,f,g);var d=new Lb(b,g);g=G(c,a);f&&l(f,d,!1);if(0<g||0==g&&!1!==d.clearWhenEmpty)return d;d.replacedWith&&(d.collapsed=!0,d.widgetNode=ba("span",[d.replacedWith],"CodeMirror-widget"),f.handleMouseEvents||d.widgetNode.setAttribute("cm-ignore-events","true"),f.insertLeft&&(d.widgetNode.insertLeft=!0));if(d.collapsed){if(rb(b,c.line,c,a,d)||c.line!=a.line&&rb(b,a.line,c,a,d))throw Error("Inserting collapsed marker partially overlapping an existing one");
Hb=!0}d.addToHistory&&mf(b,{from:c,to:a,origin:"markText"},b.sel,NaN);var e=c.line,m=b.cm,h;b.iter(e,a.line+1,function(b){m&&d.collapsed&&!m.options.lineWrapping&&Aa(b)==m.display.maxLine&&(h=!0);d.collapsed&&e!=c.line&&ha(b,0);var f=new Ka(d,e==c.line?c.ch:null,e==a.line?a.ch:null);b.markedSpans=b.markedSpans?b.markedSpans.concat([f]):[f];f.marker.attachLine(b);++e});d.collapsed&&b.iter(c.line,a.line+1,function(c){ra(b,c)&&ha(c,0)});d.clearOnEnter&&Y(d,"beforeCursorEnter",function(){return d.clear()});
d.readOnly&&(wf=!0,(b.history.done.length||b.history.undone.length)&&b.clearHistory());d.collapsed&&(d.id=++Cf,d.atomic=!0);if(m){h&&(m.curOp.updateMaxLine=!0);if(d.collapsed)fb(m,c.line,a.line+1);else if(d.className||d.title||d.startStyle||d.endStyle||d.css)for(f=c.line;f<=a.line;f++)Jb(m,f,"text");d.atomic&&sf(m.doc);Wa(m,"markerAdded",m,d)}return d}function Fg(b,c,a,f,g){f=l(f);f.shared=!1;var d=[oc(b,c,a,f,g)],e=d[0],m=f.widgetNode;Yb(b,function(b){m&&(f.widgetNode=m.cloneNode(!0));d.push(oc(b,
A(b,c),A(b,a),f,g));for(var h=0;h<b.linked.length;++h)if(b.linked[h].isParent)return;e=P(d)});return new Mc(d,e)}function Df(b){return b.findMarks(B(b.first,0),b.clipPos(B(b.lastLine())),function(b){return b.parent})}function Gg(b){for(var c=function(c){c=b[c];var a=[c.primary.doc];Yb(c.primary.doc,function(b){return a.push(b)});for(var k=0;k<c.markers.length;k++){var g=c.markers[k];-1==J(a,g.doc)&&(g.parent=null,c.markers.splice(k--,1))}},a=0;a<b.length;a++)c(a)}function Hg(b){var c=this;Ef(c);if(!na(c,
b)&&!Eb(c.display,b)){Ja(b);la&&(Ff=+new Date);var a=Tb(c,b,!0),f=b.dataTransfer.files;if(a&&!c.isReadOnly())if(f&&f.length&&window.FileReader&&window.File)for(var g=f.length,d=Array(g),e=0,m=function(b,f){if(!c.options.allowDropFileTypes||-1!=J(c.options.allowDropFileTypes,b.type)){var m=new FileReader;m.onload=Ra(c,function(){var b=m.result;/[\x00-\x08\x0e-\x1f]{2}/.test(b)&&(b="");d[f]=b;++e==g&&(a=A(c.doc,a),b={from:a,to:a,text:c.doc.splitLines(d.join(c.doc.lineSeparator())),origin:"paste"},mc(c.doc,
b),pf(c.doc,Fb(a,Kb(b))))});m.readAsText(b)}},h=0;h<g;++h)m(f[h],h);else if(c.state.draggingText&&-1<c.doc.sel.contains(a))c.state.draggingText(b),setTimeout(function(){return c.display.input.focus()},20);else try{if(m=b.dataTransfer.getData("Text")){c.state.draggingText&&!c.state.draggingText.copy&&(h=c.listSelections());td(c.doc,Fb(a,a));if(h)for(f=0;f<h.length;++f)nc(c.doc,"",h[f].anchor,h[f].head,"drag");c.replaceSelection(m,"around","paste");c.display.input.focus()}}catch(t){}}}function Ef(b){b.display.dragCursor&&
(b.display.lineSpace.removeChild(b.display.dragCursor),b.display.dragCursor=null)}function Gf(b){if(document.getElementsByClassName)for(var c=document.getElementsByClassName("CodeMirror"),a=0;a<c.length;a++){var f=c[a].CodeMirror;f&&b(f)}}function Ig(){var b;Y(window,"resize",function(){null==b&&(b=setTimeout(function(){b=null;Gf(Jg)},100))});Y(window,"blur",function(){return Gf(Bc)})}function Jg(b){var c=b.display;if(c.lastWrapHeight!=c.wrapper.clientHeight||c.lastWrapWidth!=c.wrapper.clientWidth)c.cachedCharWidth=
c.cachedTextHeight=c.cachedPaddingH=null,c.scrollbarsClipped=!1,b.setSize()}function Kg(b){var c=b.split(/-(?!$)/);b=c[c.length-1];for(var a,f,g,d,e=0;e<c.length-1;e++){var m=c[e];if(/^(cmd|meta|m)$/i.test(m))d=!0;else if(/^a(lt)?$/i.test(m))a=!0;else if(/^(c|ctrl|control)$/i.test(m))f=!0;else if(/^s(hift)?$/i.test(m))g=!0;else throw Error("Unrecognized modifier name: "+m);}a&&(b="Alt-"+b);f&&(b="Ctrl-"+b);d&&(b="Cmd-"+b);g&&(b="Shift-"+b);return b}function Lg(b){var c={},a;for(a in b)if(b.hasOwnProperty(a)){var f=
b[a];if(!/^(name|fallthrough|(de|at)tach)$/.test(a)){if("..."!=f)for(var g=F(a.split(" "),Kg),d=0;d<g.length;d++){var e=void 0,m=void 0;d==g.length-1?(m=g.join(" "),e=f):(m=g.slice(0,d+1).join(" "),e="...");var h=c[m];if(!h)c[m]=e;else if(h!=e)throw Error("Inconsistent bindings for "+m);}delete b[a]}}for(var t in c)b[t]=c[t];return b}function pc(b,c,a,f){c=vd(c);var g=c.call?c.call(b,f):c[b];if(!1===g)return"nothing";if("..."===g)return"multi";if(null!=g&&a(g))return"handled";if(c.fallthrough){if("[object Array]"!=
Object.prototype.toString.call(c.fallthrough))return pc(b,c.fallthrough,a,f);for(g=0;g<c.fallthrough.length;g++){var d=pc(b,c.fallthrough[g],a,f);if(d)return d}}}function Hf(b){b="string"==typeof b?b:Mb[b.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function If(b,c,a){var f=b;c.altKey&&"Alt"!=f&&(b="Alt-"+b);(Jf?c.metaKey:c.ctrlKey)&&"Ctrl"!=f&&(b="Ctrl-"+b);(Jf?c.ctrlKey:c.metaKey)&&"Cmd"!=f&&(b="Cmd-"+b);!a&&c.shiftKey&&"Shift"!=f&&(b="Shift-"+b);return b}function Kf(b,c){if(wb&&34==
b.keyCode&&b["char"])return!1;var a=Mb[b.keyCode];if(null==a||b.altGraphKey)return!1;3==b.keyCode&&b.code&&(a=b.code);return If(a,b,c)}function vd(b){return"string"==typeof b?Nc[b]:b}function qc(b,c){for(var a=b.doc.sel.ranges,f=[],g=0;g<a.length;g++){for(var d=c(a[g]);f.length&&0>=G(d.from,P(f).to);){var e=f.pop();if(0>G(e.from,d.from)){d.from=e.from;break}}f.push(d)}kb(b,function(){for(var c=f.length-1;0<=c;c--)nc(b.doc,"",f[c].from,f[c].to,"+delete");hc(b)})}function ie(b,c,a){c=d(b.text,c+a,a);
return 0>c||c>b.text.length?null:c}function je(b,c,a){b=ie(b,c.ch,a);return null==b?null:new B(c.line,b,0>a?"after":"before")}function ke(b,c,a,f,g){if(b&&(b=ib(a,c.doc.direction))){b=0>g?P(b):b[0];var d=0>g==(1==b.level)?"after":"before",e;if(0<b.level||"rtl"==c.doc.direction){var m=Qb(c,a);e=0>g?a.text.length-1:0;var h=ub(c,m,e).top;e=u(function(b){return ub(c,m,b).top==h},0>g==(1==b.level)?b.from:b.to-1,e);"before"==d&&(e=ie(a,e,1))}else e=0>g?b.to:b.from;return new B(f,e,d)}return new B(f,0>g?
a.text.length:0,0>g?"before":"after")}function Mg(b,c,a,f){var g=ib(c,b.doc.direction);if(!g)return je(c,a,f);a.ch>=c.text.length?(a.ch=c.text.length,a.sticky="before"):0>=a.ch&&(a.ch=0,a.sticky="after");var d=sa(g,a.ch,a.sticky),e=g[d];if("ltr"==b.doc.direction&&0==e.level%2&&(0<f?e.to>a.ch:e.from<a.ch))return je(c,a,f);var m=function(b,a){return ie(c,b instanceof B?b.ch:b,a)},h,t=function(a){if(!b.options.lineWrapping)return{begin:0,end:c.text.length};h=h||Qb(b,c);return Me(b,c,h,a)},v=t("before"==
a.sticky?m(a,-1):a.ch);if("rtl"==b.doc.direction||1==e.level){var r=1==e.level==0>f,l=m(a,r?1:-1);if(null!=l&&(r?l<=e.to&&l<=v.end:l>=e.from&&l>=v.begin))return new B(a.line,l,r?"before":"after")}e=function(b,c,f){for(var d=function(b,c){return c?new B(a.line,m(b,1),"before"):new B(a.line,b,"after")};0<=b&&b<g.length;b+=c){var e=g[b],h=0<c==(1!=e.level),t=h?f.begin:m(f.end,-1);if(e.from<=t&&t<e.to)return d(t,h);t=h?e.from:m(e.to,-1);if(f.begin<=t&&t<f.end)return d(t,h)}};if(d=e(d+f,f,v))return d;
v=0<f?v.end:m(v.begin,-1);return null==v||0<f&&v==c.text.length||!(d=e(0<f?0:g.length-1,f,t(v)))?null:d}function Lf(b,c){var a=E(b.doc,c),f=Aa(a);f!=a&&(c=ea(f));return ke(!0,b,f,c,1)}function Mf(b,c){var a=Lf(b,c.line),f=E(b.doc,a.line),g=ib(f,b.doc.direction);return g&&0!=g[0].level?a:(f=Math.max(0,f.text.search(/\S/)),B(a.line,c.line==a.line&&c.ch<=f&&c.ch?0:f,a.sticky))}function wd(b,c,a){if("string"==typeof c&&(c=Oc[c],!c))return!1;b.display.input.ensurePolled();var f=b.display.shift,g=!1;try{b.isReadOnly()&&
(b.state.suppressEdits=!0),a&&(b.display.shift=!1),g=c(b)!=xd}finally{b.display.shift=f,b.state.suppressEdits=!1}return g}function Pc(b,c,a,f){var g=b.state.keySeq;if(g){if(Hf(c))return"handled";/\'$/.test(c)?b.state.keySeq=null:Ng.set(50,function(){b.state.keySeq==g&&(b.state.keySeq=null,b.display.input.reset())});if(Nf(b,g+" "+c,a,f))return!0}return Nf(b,c,a,f)}function Nf(b,c,a,f){a:{for(var g=0;g<b.state.keyMaps.length;g++){var d=pc(c,b.state.keyMaps[g],f,b);if(d){f=d;break a}}f=b.options.extraKeys&&
pc(c,b.options.extraKeys,f,b)||pc(c,b.options.keyMap,f,b)}"multi"==f&&(b.state.keySeq=c);"handled"==f&&Wa(b,"keyHandled",b,c,a);if("handled"==f||"multi"==f)Ja(a),Td(b);return!!f}function Of(b,c){var a=Kf(c,!0);return a?c.shiftKey&&!b.state.keySeq?Pc(b,"Shift-"+a,c,function(c){return wd(b,c,!0)})||Pc(b,a,c,function(c){if("string"==typeof c?/^go[A-Z]/.test(c):c.motion)return wd(b,c)}):Pc(b,a,c,function(c){return wd(b,c)}):!1}function Og(b,c,a){return Pc(b,"'"+a+"'",c,function(c){return wd(b,c,!0)})}
function Pf(b){this.curOp.focus=Z();if(!na(this,b)){la&&11>xa&&27==b.keyCode&&(b.returnValue=!1);var c=b.keyCode;this.display.shift=16==c||b.shiftKey;var a=Of(this,b);wb&&(le=a?c:null,!a&&88==c&&!Pg&&(tb?b.metaKey:b.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=c||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Qg(this)}}function Qg(b){function c(b){18!=b.keyCode&&b.altKey||(Ub(a,"CodeMirror-crosshair"),va(document,"keyup",c),va(document,"mouseover",c))}var a=b.display.lineDiv;
da(a,"CodeMirror-crosshair");Y(document,"keyup",c);Y(document,"mouseover",c)}function Qf(b){16==b.keyCode&&(this.doc.sel.shift=!1);na(this,b)}function Rf(b){if(!(Eb(this.display,b)||na(this,b)||b.ctrlKey&&!b.altKey||tb&&b.metaKey)){var c=b.keyCode,a=b.charCode;if(wb&&c==le)le=null,Ja(b);else if(!wb||b.which&&!(10>b.which)||!Of(this,b))if(c=String.fromCharCode(null==a?c:a),"\b"!=c&&!Og(this,b,c))this.display.input.onKeyPress(b)}}function Rg(b,c){var a=+new Date;if(Qc&&Qc.compare(a,b,c))return Rc=Qc=
null,"triple";if(Rc&&Rc.compare(a,b,c))return Qc=new me(a,b,c),Rc=null,"double";Rc=new me(a,b,c);Qc=null;return"single"}function Sf(b){var c=this.display;if(!(na(this,b)||c.activeTouch&&c.input.supportsTouch()))if(c.input.ensurePolled(),c.shift=b.shiftKey,Eb(c,b))Ya||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100));else if(!yd(this,b,"gutterClick",!0)){var a=Tb(this,b),f=Pa(b),g=a?Rg(a,f):"single";window.focus();1==f&&this.state.selectingText&&this.state.selectingText(b);
a&&Sg(this,f,a,g,b)||(1==f?a?Tg(this,a,g,b):(b.target||b.srcElement)==c.scroller&&Ja(b):2==f?(a&&sd(this.doc,a),setTimeout(function(){return c.input.focus()},20)):3==f&&(ne?Tf(this,b):Re(this)))}}function Sg(b,c,a,f,g){var d="Click";"double"==f?d="Double"+d:"triple"==f&&(d="Triple"+d);return Pc(b,If((1==c?"Left":2==c?"Middle":"Right")+d,g),g,function(c){"string"==typeof c&&(c=Oc[c]);if(!c)return!1;var f=!1;try{b.isReadOnly()&&(b.state.suppressEdits=!0),f=c(b,a)!=xd}finally{b.state.suppressEdits=!1}return f})}
function Tg(b,c,a,f){la?setTimeout(fa(Qe,b),0):b.curOp.focus=Z();var g=b.getOption("configureMouse"),g=g?g(b,a,f):{};null==g.unit&&(g.unit=(Ug?f.shiftKey&&f.metaKey:f.altKey)?"rectangle":"single"==a?"char":"double"==a?"word":"line");if(null==g.extend||b.doc.extend)g.extend=b.doc.extend||f.shiftKey;null==g.addNew&&(g.addNew=tb?f.metaKey:f.ctrlKey);null==g.moveOnDrag&&(g.moveOnDrag=!(tb?f.altKey:f.ctrlKey));var d=b.doc.sel,e;b.options.dragDrop&&Vg&&!b.isReadOnly()&&"single"==a&&-1<(e=d.contains(c))&&
(0>G((e=d.ranges[e]).from(),c)||0<c.xRel)&&(0<G(e.to(),c)||0>c.xRel)?Wg(b,f,c,g):Xg(b,f,c,g)}function Wg(b,c,a,f){var g=b.display,d=!1,e=Ra(b,function(c){Ya&&(g.scroller.draggable=!1);b.state.draggingText=!1;va(document,"mouseup",e);va(document,"mousemove",m);va(g.scroller,"dragstart",h);va(g.scroller,"drop",e);d||(Ja(c),f.addNew||sd(b.doc,a,null,null,f.extend),Ya||la&&9==xa?setTimeout(function(){document.body.focus();g.input.focus()},20):g.input.focus())}),m=function(b){d=d||10<=Math.abs(c.clientX-
b.clientX)+Math.abs(c.clientY-b.clientY)},h=function(){return d=!0};Ya&&(g.scroller.draggable=!0);b.state.draggingText=e;e.copy=!f.moveOnDrag;g.scroller.dragDrop&&g.scroller.dragDrop();Y(document,"mouseup",e);Y(document,"mousemove",m);Y(g.scroller,"dragstart",h);Y(g.scroller,"drop",e);Re(b);setTimeout(function(){return g.input.focus()},20)}function Uf(b,c,a){if("char"==a)return new oa(c,c);if("word"==a)return b.findWordAt(c);if("line"==a)return new oa(B(c.line,0),A(b.doc,B(c.line+1,0)));b=a(b,c);
return new oa(b.from,b.to)}function Xg(b,c,a,f){function g(c){if(0!=G(q,c))if(q=c,"rectangle"==f.unit){for(var d=[],n=b.options.tabSize,m=e(E(t,a.line).text,a.ch,n),h=e(E(t,c.line).text,c.ch,n),Da=Math.min(m,h),m=Math.max(m,h),h=Math.min(a.line,c.line),R=Math.min(b.lastLine(),Math.max(a.line,c.line));h<=R;h++){var lb=E(t,h).text,p=W(lb,Da,n);Da==m?d.push(new oa(B(h,p),B(h,p))):lb.length>p&&d.push(new oa(B(h,p),B(h,W(lb,m,n))))}d.length||d.push(new oa(a,a));Xa(t,xb(l.ranges.slice(0,r).concat(d),r),
{origin:"*mouse",scroll:!1});b.scrollIntoView(c)}else d=v,Da=Uf(b,c,f.unit),c=d.anchor,0<G(Da.anchor,c)?(n=Da.head,c=ka(d.from(),Da.anchor)):(n=Da.anchor,c=ja(d.to(),Da.head)),d=l.ranges.slice(0),d[r]=Yg(b,new oa(A(t,c),n)),Xa(t,xb(d,r),oe)}function d(c){var a=++fc,k=Tb(b,c,!0,"rectangle"==f.unit);if(k)if(0!=G(k,q)){b.curOp.focus=Z();g(k);var e=Vd(h,t);(k.line>=e.to||k.line<e.from)&&setTimeout(Ra(b,function(){fc==a&&d(c)}),150)}else{var m=c.clientY<u.top?-20:c.clientY>u.bottom?20:0;m&&setTimeout(Ra(b,
function(){fc==a&&(h.scroller.scrollTop+=m,d(c))}),50)}}function m(c){b.state.selectingText=!1;fc=Infinity;Ja(c);h.input.focus();va(document,"mousemove",C);va(document,"mouseup",sa);t.history.lastSelOrigin=null}var h=b.display,t=b.doc;Ja(c);var v,r,l=t.sel,p=l.ranges;f.addNew&&!f.extend?(r=t.sel.contains(a),v=-1<r?p[r]:new oa(a,a)):(v=t.sel.primary(),r=t.sel.primIndex);"rectangle"==f.unit?(f.addNew||(v=new oa(a,a)),a=Tb(b,c,!0,!0),r=-1):(c=Uf(b,a,f.unit),v=f.extend?fe(v,c.anchor,c.head,f.extend):
c);f.addNew?-1==r?(r=p.length,Xa(t,xb(p.concat([v]),r),{scroll:!1,origin:"*mouse"})):1<p.length&&p[r].empty()&&"char"==f.unit&&!f.extend?(Xa(t,xb(p.slice(0,r).concat(p.slice(r+1)),0),{scroll:!1,origin:"*mouse"}),l=t.sel):ge(t,r,v,oe):(r=0,Xa(t,new ob([v],0),oe),l=t.sel);var q=a,u=h.wrapper.getBoundingClientRect(),fc=0,C=Ra(b,function(b){Pa(b)?d(b):m(b)}),sa=Ra(b,m);b.state.selectingText=sa;Y(document,"mousemove",C);Y(document,"mouseup",sa)}function Yg(b,c){var a=c.anchor,f=c.head,g=E(b.doc,a.line);
if(0==G(a,f)&&a.sticky==f.sticky)return c;g=ib(g);if(!g)return c;var d=sa(g,a.ch,a.sticky),e=g[d];if(e.from!=a.ch&&e.to!=a.ch)return c;var m=d+(e.from==a.ch==(1!=e.level)?0:1);if(0==m||m==g.length)return c;var h;f.line!=a.line?h=0<(f.line-a.line)*("ltr"==b.doc.direction?1:-1):(h=sa(g,f.ch,f.sticky),d=h-d||(f.ch-a.ch)*(1==e.level?-1:1),h=h==m-1||h==m?0>d:0<d);g=g[m+(h?-1:0)];g=(m=h==(1==g.level))?g.from:g.to;m=m?"after":"before";return a.ch==g&&a.sticky==m?c:new oa(new B(a.line,g,m),f)}function yd(b,
c,a,f){var g,d;if(c.touches)g=c.touches[0].clientX,d=c.touches[0].clientY;else try{g=c.clientX,d=c.clientY}catch(e){return!1}if(g>=Math.floor(b.display.gutters.getBoundingClientRect().right))return!1;f&&Ja(c);f=b.display;var m=f.lineDiv.getBoundingClientRect();if(d>m.bottom||!La(b,a))return Db(c);d-=m.top-f.viewOffset;for(m=0;m<b.options.gutters.length;++m){var h=f.gutters.childNodes[m];if(h&&h.getBoundingClientRect().right>=g)return g=Za(b.doc,d),qa(b,a,b,g,b.options.gutters[m],c),Db(c)}}function Tf(b,
c){var a;(a=Eb(b.display,c))||(a=La(b,"gutterContextMenu")?yd(b,c,"gutterContextMenu",!1):!1);if(!a&&!na(b,c,"contextmenu"))b.display.input.onContextMenu(c)}function Vf(b){b.display.wrapper.className=b.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+b.options.theme.replace(/(^|\s)\s*/g," cm-s-");zc(b)}function Sc(b){bf(b);fb(b);Te(b)}function Zg(b,c,a){!c!=!(a&&a!=rc)&&(a=b.display.dragFunctions,c=c?Y:va,c(b.display.scroller,"dragstart",a.start),c(b.display.scroller,"dragenter",a.enter),c(b.display.scroller,
"dragover",a.over),c(b.display.scroller,"dragleave",a.leave),c(b.display.scroller,"drop",a.drop))}function $g(b){b.options.lineWrapping?(da(b.display.wrapper,"CodeMirror-wrap"),b.display.sizer.style.minWidth="",b.display.sizerWidth=null):(Ub(b.display.wrapper,"CodeMirror-wrap"),ua(b));Sd(b);fb(b);zc(b);setTimeout(function(){return ic(b)},100)}function Ca(b,c){var a=this;if(!(this instanceof Ca))return new Ca(b,c);this.options=c=c?l(c):{};l(Wf,c,!1);ae(c);var f=c.value;"string"==typeof f&&(f=new gb(f,
c.mode,null,c.lineSeparator,c.direction));this.doc=f;var g=new Ca.inputStyles[c.inputStyle](this),g=this.display=new db(b,f,g);g.wrapper.CodeMirror=this;bf(this);Vf(this);c.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");Ye(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Zb,keySeq:null,specialChars:null};c.autofocus&&!tc&&g.input.focus();
la&&11>xa&&setTimeout(function(){return a.display.input.reset(!0)},20);ah(this);Xf||(Ig(),Xf=!0);Wb(this);this.curOp.forceUpdate=!0;hf(this,f);c.autofocus&&!tc||this.hasFocus()?setTimeout(fa(Ud,this),20):Bc(this);for(var d in zd)if(zd.hasOwnProperty(d))zd[d](a,c[d],rc);Ue(this);c.finishInit&&c.finishInit(this);for(f=0;f<pe.length;++f)pe[f](a);Xb(this);Ya&&c.lineWrapping&&"optimizelegibility"==getComputedStyle(g.lineDiv).textRendering&&(g.lineDiv.style.textRendering="auto")}function ah(b){function c(){f.activeTouch&&
(g=setTimeout(function(){return f.activeTouch=null},1E3),d=f.activeTouch,d.end=+new Date)}function a(b,c){if(null==c.left)return!0;var f=c.left-b.left,k=c.top-b.top;return 400<f*f+k*k}var f=b.display;Y(f.scroller,"mousedown",Ra(b,Sf));la&&11>xa?Y(f.scroller,"dblclick",Ra(b,function(c){if(!na(b,c)){var a=Tb(b,c);!a||yd(b,c,"gutterClick",!0)||Eb(b.display,c)||(Ja(c),c=b.findWordAt(a),sd(b.doc,c.anchor,c.head))}})):Y(f.scroller,"dblclick",function(c){return na(b,c)||Ja(c)});ne||Y(f.scroller,"contextmenu",
function(c){return Tf(b,c)});var g,d={end:0};Y(f.scroller,"touchstart",function(c){var a;if(a=!na(b,c))1!=c.touches.length?a=!1:(a=c.touches[0],a=1>=a.radiusX&&1>=a.radiusY),a=!a&&!yd(b,c,"gutterClick",!0);a&&(f.input.ensurePolled(),clearTimeout(g),a=+new Date,f.activeTouch={start:a,moved:!1,prev:300>=a-d.end?d:null},1==c.touches.length&&(f.activeTouch.left=c.touches[0].pageX,f.activeTouch.top=c.touches[0].pageY))});Y(f.scroller,"touchmove",function(){f.activeTouch&&(f.activeTouch.moved=!0)});Y(f.scroller,
"touchend",function(g){var d=f.activeTouch;if(d&&!Eb(f,g)&&null!=d.left&&!d.moved&&300>new Date-d.start){var e=b.coordsChar(f.activeTouch,"page"),d=!d.prev||a(d,d.prev)?new oa(e,e):!d.prev.prev||a(d,d.prev.prev)?b.findWordAt(e):new oa(B(e.line,0),A(b.doc,B(e.line+1,0)));b.setSelection(d.anchor,d.head);b.focus();Ja(g)}c()});Y(f.scroller,"touchcancel",c);Y(f.scroller,"scroll",function(){f.scroller.clientHeight&&(Dc(b,f.scroller.scrollTop),Vb(b,f.scroller.scrollLeft,!0),qa(b,"scroll",b))});Y(f.scroller,
"mousewheel",function(c){return df(b,c)});Y(f.scroller,"DOMMouseScroll",function(c){return df(b,c)});Y(f.wrapper,"scroll",function(){return f.wrapper.scrollTop=f.wrapper.scrollLeft=0});f.dragFunctions={enter:function(c){na(b,c)||H(c)},over:function(c){if(!na(b,c)){var a=Tb(b,c);if(a){var f=document.createDocumentFragment();Pe(b,a,f);b.display.dragCursor||(b.display.dragCursor=x("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),b.display.lineSpace.insertBefore(b.display.dragCursor,b.display.cursorDiv));
w(b.display.dragCursor,f)}H(c)}},start:function(c){if(la&&(!b.state.draggingText||100>+new Date-Ff))H(c);else if(!na(b,c)&&!Eb(b.display,c)&&(c.dataTransfer.setData("Text",b.getSelection()),c.dataTransfer.effectAllowed="copyMove",c.dataTransfer.setDragImage&&!Yf)){var a=x("img",null,null,"position: fixed; left: 0; top: 0;");a.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";wb&&(a.width=a.height=1,b.display.wrapper.appendChild(a),a._top=a.offsetTop);c.dataTransfer.setDragImage(a,
0,0);wb&&a.parentNode.removeChild(a)}},drop:Ra(b,Hg),leave:function(c){na(b,c)||Ef(b)}};var e=f.input.getField();Y(e,"keyup",function(c){return Qf.call(b,c)});Y(e,"keydown",Ra(b,Pf));Y(e,"keypress",Ra(b,Rf));Y(e,"focus",function(c){return Ud(b,c)});Y(e,"blur",function(c){return Bc(b,c)})}function Tc(b,c,a,f){var g=b.doc,d;null==a&&(a="add");"smart"==a&&(g.mode.indent?d=V(b,c).state:a="prev");var m=b.options.tabSize,h=E(g,c),t=e(h.text,null,m);h.stateAfter&&(h.stateAfter=null);var v=h.text.match(/^\s*/)[0],
r;if(!f&&!/\S/.test(h.text))r=0,a="not";else if("smart"==a&&(r=g.mode.indent(d,h.text.slice(v.length),h.text),r==xd||150<r)){if(!f)return;a="prev"}"prev"==a?r=c>g.first?e(E(g,c-1).text,null,m):0:"add"==a?r=t+b.options.indentUnit:"subtract"==a?r=t-b.options.indentUnit:"number"==typeof a&&(r=t+a);r=Math.max(0,r);a="";f=0;if(b.options.indentWithTabs)for(b=Math.floor(r/m);b;--b)f+=m,a+="\t";f<r&&(a+=U(r-f));if(a!=v)return nc(g,a,B(c,0),B(c,v.length),"+input"),h.stateAfter=null,!0;for(m=0;m<g.sel.ranges.length;m++)if(h=
g.sel.ranges[m],h.head.line==c&&h.head.ch<v.length){c=B(c,v.length);ge(g,m,new oa(c,c));break}}function Zf(b){pb=b}function qe(b,c,a,f,g){var d=b.doc;b.display.shift=!1;f||(f=d.sel);var e=b.state.pasteIncoming||"paste"==g,m=re(c),h=null;if(e&&1<f.ranges.length)if(pb&&pb.text.join("\n")==c){if(0==f.ranges.length%pb.text.length)for(var h=[],t=0;t<pb.text.length;t++)h.push(d.splitLines(pb.text[t]))}else m.length==f.ranges.length&&b.options.pasteLinesPerSelection&&(h=F(m,function(b){return[b]}));for(var v,
t=f.ranges.length-1;0<=t;t--){v=f.ranges[t];var r=v.from(),l=v.to();v.empty()&&(a&&0<a?r=B(r.line,r.ch-a):b.state.overwrite&&!e?l=B(l.line,Math.min(E(d,l.line).text.length,l.ch+P(m).length)):pb&&pb.lineWise&&pb.text.join("\n")==c&&(r=l=B(r.line,0)));v=b.curOp.updateInput;r={from:r,to:l,text:h?h[t%h.length]:m,origin:g||(e?"paste":b.state.cutIncoming?"cut":"+input")};mc(b.doc,r);Wa(b,"inputRead",b,r)}c&&!e&&$f(b,c);hc(b);b.curOp.updateInput=v;b.curOp.typing=!0;b.state.pasteIncoming=b.state.cutIncoming=
!1}function ag(b,c){var a=b.clipboardData&&b.clipboardData.getData("Text");if(a)return b.preventDefault(),c.isReadOnly()||c.options.disableInput||kb(c,function(){return qe(c,a,0,null,"paste")}),!0}function $f(b,c){if(b.options.electricChars&&b.options.smartIndent)for(var a=b.doc.sel,f=a.ranges.length-1;0<=f;f--){var g=a.ranges[f];if(!(100<g.head.ch||f&&a.ranges[f-1].head.line==g.head.line)){var d=b.getModeAt(g.head),e=!1;if(d.electricChars)for(var m=0;m<d.electricChars.length;m++){if(-1<c.indexOf(d.electricChars.charAt(m))){e=
Tc(b,g.head.line,"smart");break}}else d.electricInput&&d.electricInput.test(E(b.doc,g.head.line).text.slice(0,g.head.ch))&&(e=Tc(b,g.head.line,"smart"));e&&Wa(b,"electricInput",b,g.head.line)}}}function bg(b){for(var c=[],a=[],f=0;f<b.doc.sel.ranges.length;f++){var g=b.doc.sel.ranges[f].head.line,g={anchor:B(g,0),head:B(g+1,0)};a.push(g);c.push(b.getRange(g.anchor,g.head))}return{text:c,ranges:a}}function cg(b,c){b.setAttribute("autocorrect","off");b.setAttribute("autocapitalize","off");b.setAttribute("spellcheck",
!!c)}function dg(){var b=x("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),c=x("div",[b],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");Ya?b.style.width="1000px":b.setAttribute("wrap","off");Uc&&(b.style.border="1px solid black");cg(b);return c}function se(b,c,a,f,g){function d(f){var e;e=g?Mg(b.cm,t,c,a):je(t,c,a);if(null==e){if(f=!f)f=c.line+a,f<b.first||f>=b.first+b.size?f=!1:(c=new B(f,c.ch,c.sticky),f=t=E(b,
f));if(f)c=ke(g,b.cm,t,c.line,a);else return!1}else c=e;return!0}var e=c,m=a,t=E(b,c.line);if("char"==f)d();else if("column"==f)d(!0);else if("word"==f||"group"==f){var v=null;f="group"==f;for(var r=b.cm&&b.cm.getHelper(c,"wordChars"),l=!0;!(0>a)||d(!l);l=!1){var p=t.text.charAt(c.ch)||"\n",p=h(p,r)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";!f||l||p||(p="s");if(v&&v!=p){0>a&&(a=1,d(),c.sticky="after");break}p&&(v=p);if(0<a&&!d(!l))break}}m=he(b,c,e,m,!0);za(e,m)&&(m.hitSide=!0);return m}function eg(b,
c,a,f){var g=b.doc,d=c.left,e;"page"==f?(f=Math.min(b.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),f=Math.max(f-0.5*Rb(b.display),3),e=(0<a?c.bottom:c.top)+a*f):"line"==f&&(e=0<a?c.bottom+3:c.top-3);for(var m;;){m=Pd(b,d,e);if(!m.outside)break;if(0>a?0>=e:e>=g.height){m.hitSide=!0;break}e+=5*a}return m}function fg(b,c){var a=Jd(b,c.line);if(!a||a.hidden)return null;var f=E(b.doc,c.line),a=Ce(a,f,c.line),f=ib(f,b.doc.direction),g="left";f&&(g=sa(f,c.ch)%2?
"right":"left");a=De(a.map,c.ch,g);a.offset="right"==a.collapse?a.end:a.start;return a}function bh(b){for(;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}function sc(b,c){c&&(b.bad=!0);return b}function ch(b,c,a,f,g){function d(b){return function(c){return c.id==b}}function e(b){b&&(t&&(h+=v,t=!1),h+=b)}function m(c){if(1==c.nodeType){var a=c.getAttribute("cm-text");if(null!=a)e(a||c.textContent.replace(/\u200b/g,""));else{var a=c.getAttribute("cm-marker"),k;if(a)c=
b.findMarks(B(f,0),B(g+1,0),d(+a)),c.length&&(k=c[0].find(0))&&e(Oa(b.doc,k.from,k.to).join(v));else if("false"!=c.getAttribute("contenteditable")){(k=/^(pre|div|p)$/i.test(c.nodeName))&&t&&(h+=v,t=!1);for(a=0;a<c.childNodes.length;a++)m(c.childNodes[a]);k&&(t=!0)}}}else 3==c.nodeType&&e(c.nodeValue)}for(var h="",t=!1,v=b.doc.lineSeparator();;){m(c);if(c==a)break;c=c.nextSibling}return h}function Ad(b,c,a){var f;if(c==b.display.lineDiv){f=b.display.lineDiv.childNodes[a];if(!f)return sc(b.clipPos(B(b.display.viewTo-
1)),!0);c=null;a=0}else for(f=c;;f=f.parentNode){if(!f||f==b.display.lineDiv)return null;if(f.parentNode&&f.parentNode==b.display.lineDiv)break}for(var g=0;g<b.display.view.length;g++){var d=b.display.view[g];if(d.node==f)return dh(d,c,a)}}function dh(b,c,a){function f(c,a,f){for(var g=-1;g<(t?t.length:0);g++)for(var k=0>g?h.map:t[g],d=0;d<k.length;d+=3){var e=k[d+2];if(e==c||e==a){a=ea(0>g?b.line:b.rest[g]);g=k[d]+f;if(0>f||e!=c)g=k[d+(f?1:0)];return B(a,g)}}}var g=b.text.firstChild,d=!1;if(!c||
!ca(g,c))return sc(B(ea(b.line),0),!0);if(c==g&&(d=!0,c=g.childNodes[a],a=0,!c))return a=b.rest?P(b.rest):b.line,sc(B(ea(a),a.text.length),d);var e=3==c.nodeType?c:null,m=c;e||1!=c.childNodes.length||3!=c.firstChild.nodeType||(e=c.firstChild,a&&(a=e.nodeValue.length));for(;m.parentNode!=g;)m=m.parentNode;var h=b.measure,t=h.maps;if(c=f(e,m,a))return sc(c,d);g=m.nextSibling;for(e=e?e.nodeValue.length-a:0;g;g=g.nextSibling){if(c=f(g,g.firstChild,0))return sc(B(c.line,c.ch-e),d);e+=g.textContent.length}for(m=
m.previousSibling;m;m=m.previousSibling){if(c=f(m,m.firstChild,-1))return sc(B(c.line,c.ch+a),d);a+=m.textContent.length}}var cb=navigator.userAgent,gg=navigator.platform,Gb=/gecko\/\d/i.test(cb),hg=/MSIE \d/.test(cb),ig=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(cb),Vc=/Edge\/(\d+)/.exec(cb),la=hg||ig||Vc,xa=la&&(hg?document.documentMode||6:+(Vc||ig)[1]),Ya=!Vc&&/WebKit\//.test(cb),eh=Ya&&/Qt\/\d+\.\d+/.test(cb),gd=!Vc&&/Chrome\//.test(cb),wb=/Opera\//.test(cb),Yf=/Apple Computer/.test(navigator.vendor),
fh=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(cb),wg=/PhantomJS/.test(cb),Uc=!Vc&&/AppleWebKit/.test(cb)&&/Mobile\/\w+/.test(cb),hd=/Android/.test(cb),tc=Uc||hd||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(cb),tb=Uc||/Mac/.test(gg),Ug=/\bCrOS\b/.test(cb),gh=/win/i.test(gg),$b=wb&&cb.match(/Version\/(\d*\.\d*)/);$b&&($b=Number($b[1]));$b&&15<=$b&&(wb=!1,Ya=!0);var Jf=tb&&(eh||wb&&(null==$b||12.11>$b)),ne=Gb||la&&9<=xa,Ub=function(b,c){var a=b.className,f=s(c).exec(a);if(f){var g=a.slice(f.index+
f[0].length);b.className=a.slice(0,f.index)+(g?f[1]+g:"")}},ec;ec=document.createRange?function(b,c,a,f){var g=document.createRange();g.setEnd(f||b,a);g.setStart(b,c);return g}:function(b,c,a){var f=document.body.createTextRange();try{f.moveToElementText(b.parentNode)}catch(g){return f}f.collapse(!0);f.moveEnd("character",a);f.moveStart("character",c);return f};var Wc=function(b){b.select()};Uc?Wc=function(b){b.selectionStart=0;b.selectionEnd=b.value.length}:la&&(Wc=function(b){try{b.select()}catch(c){}});
var Zb=function(){this.id=null};Zb.prototype.set=function(b,c){clearTimeout(this.id);this.id=setTimeout(c,b)};var te=30,xd={toString:function(){return"CodeMirror.Pass"}},Cb={scroll:!1},oe={origin:"*mouse"},Xc={origin:"+move"},bd=[""],jg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,kg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
wf=!1,Hb=!1,uc=null,lg=function(){function b(b){return 247>=b?a.charAt(b):1424<=b&&1524>=b?"R":1536<=b&&1785>=b?f.charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function c(b,c,a){this.level=b;this.from=c;this.to=a}var a="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",f="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",
g=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,m=/[Lb1n]/,h=/[1n]/;return function(a,f){var k="ltr"==f?"L":"R";if(0==a.length||"ltr"==f&&!g.test(a))return!1;for(var t=a.length,v=[],r=0;r<t;++r)v.push(b(a.charCodeAt(r)));for(var r=0,l=k;r<t;++r){var p=v[r];"m"==p?v[r]=l:l=p}r=0;for(l=k;r<t;++r)p=v[r],"1"==p&&"r"==l?v[r]="n":e.test(p)&&(l=p,"r"==p&&(v[r]="R"));r=1;for(l=v[0];r<t-1;++r)p=v[r],"+"==p&&"1"==l&&"1"==v[r+1]?v[r]="1":","!=p||l!=v[r+1]||"1"!=l&&"n"!=l||(v[r]=l),l=p;for(r=
0;r<t;++r)if(l=v[r],","==l)v[r]="N";else if("%"==l){l=void 0;for(l=r+1;l<t&&"%"==v[l];++l);for(p=r&&"!"==v[r-1]||l<t&&"1"==v[l]?"1":"N";r<l;++r)v[r]=p;r=l-1}r=0;for(l=k;r<t;++r)p=v[r],"L"==l&&"1"==p?v[r]="L":e.test(p)&&(l=p);for(l=0;l<t;++l)if(d.test(v[l])){r=void 0;for(r=l+1;r<t&&d.test(v[r]);++r);p="L"==(l?v[l-1]:k);for(p=p==("L"==(r<t?v[r]:k))?p?"L":"R":k;l<r;++l)v[l]=p;l=r-1}for(var k=[],q,r=0;r<t;)if(m.test(v[r])){l=r;for(++r;r<t&&m.test(v[r]);++r);k.push(new c(0,l,r))}else{var u=r,l=k.length;
for(++r;r<t&&"L"!=v[r];++r);for(p=u;p<r;)if(h.test(v[p])){u<p&&k.splice(l,0,new c(1,u,p));u=p;for(++p;p<r&&h.test(v[p]);++p);k.splice(l,0,new c(2,u,p));u=p}else++p;u<r&&k.splice(l,0,new c(1,u,r))}"ltr"==f&&(1==k[0].level&&(q=a.match(/^\s+/))&&(k[0].from=q[0].length,k.unshift(new c(0,0,q[0].length))),1==P(k).level&&(q=a.match(/\s+$/))&&(P(k).to-=q[0].length,k.push(new c(0,t-q[0].length,t))));return"rtl"==f?k.reverse():k}}(),cd=[],Y=function(b,c,a){b.addEventListener?b.addEventListener(c,a,!1):b.attachEvent?
b.attachEvent("on"+c,a):(b=b._handlers||(b._handlers={}),b[c]=(b[c]||cd).concat(a))},Vg=function(){if(la&&9>xa)return!1;var b=x("div");return"draggable"in b||"dragDrop"in b}(),Cd,Ed,re=3!="\n\nb".split(/\n/).length?function(b){for(var c=0,a=[],f=b.length;c<=f;){var g=b.indexOf("\n",c);-1==g&&(g=b.length);var d=b.slice(c,"\r"==b.charAt(g-1)?g-1:g),e=d.indexOf("\r");-1!=e?(a.push(d.slice(0,e)),c+=e+1):(a.push(d),c=g+1)}return a}:function(b){return b.split(/\r\n?|\n/)},hh=window.getSelection?function(b){try{return b.selectionStart!=
b.selectionEnd}catch(c){return!1}}:function(b){var c;try{c=b.ownerDocument.selection.createRange()}catch(a){}return c&&c.parentElement()==b?0!=c.compareEndPoints("StartToEnd",c):!1},Pg=function(){var b=x("div");if("oncopy"in b)return!0;b.setAttribute("oncopy","return;");return"function"==typeof b.oncopy}(),Ld=null,Dd={},cc={},dc={},Ma=function(b,c,a){this.pos=this.start=0;this.string=b;this.tabSize=c||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0;this.lineOracle=a};Ma.prototype.eol=function(){return this.pos>=
this.string.length};Ma.prototype.sol=function(){return this.pos==this.lineStart};Ma.prototype.peek=function(){return this.string.charAt(this.pos)||void 0};Ma.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)};Ma.prototype.eat=function(b){var c=this.string.charAt(this.pos);if("string"==typeof b?c==b:c&&(b.test?b.test(c):b(c)))return++this.pos,c};Ma.prototype.eatWhile=function(b){for(var c=this.pos;this.eat(b););return this.pos>c};Ma.prototype.eatSpace=function(){for(var b=
this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>b};Ma.prototype.skipToEnd=function(){this.pos=this.string.length};Ma.prototype.skipTo=function(b){b=this.string.indexOf(b,this.pos);if(-1<b)return this.pos=b,!0};Ma.prototype.backUp=function(b){this.pos-=b};Ma.prototype.column=function(){this.lastColumnPos<this.start&&(this.lastColumnValue=e(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-
(this.lineStart?e(this.string,this.lineStart,this.tabSize):0)};Ma.prototype.indentation=function(){return e(this.string,null,this.tabSize)-(this.lineStart?e(this.string,this.lineStart,this.tabSize):0)};Ma.prototype.match=function(b,c,a){if("string"==typeof b){var f=function(b){return a?b.toLowerCase():b},g=this.string.substr(this.pos,b.length);if(f(g)==f(b))return!1!==c&&(this.pos+=b.length),!0}else{if((b=this.string.slice(this.pos).match(b))&&0<b.index)return null;b&&!1!==c&&(this.pos+=b[0].length);
return b}};Ma.prototype.current=function(){return this.string.slice(this.start,this.pos)};Ma.prototype.hideFirstChars=function(b,c){this.lineStart+=b;try{return c()}finally{this.lineStart-=b}};Ma.prototype.lookAhead=function(b){var c=this.lineOracle;return c&&c.lookAhead(b)};Ma.prototype.baseToken=function(){var b=this.lineOracle;return b&&b.baseToken(this.pos)};var dd=function(b,c){this.state=b;this.lookAhead=c},Ab=function(b,c,a,f){this.state=c;this.doc=b;this.line=a;this.maxLookAhead=f||0;this.baseTokens=
null;this.baseTokenPos=1};Ab.prototype.lookAhead=function(b){var c=this.doc.getLine(this.line+b);null!=c&&b>this.maxLookAhead&&(this.maxLookAhead=b);return c};Ab.prototype.baseToken=function(b){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=b;)this.baseTokenPos+=2;var c=this.baseTokens[this.baseTokenPos+1];return{type:c&&c.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-b}};Ab.prototype.nextLine=function(){this.line++;0<this.maxLookAhead&&this.maxLookAhead--};
Ab.fromSaved=function(b,c,a){return c instanceof dd?new Ab(b,mb(b.mode,c.state),a,c.lookAhead):new Ab(b,mb(b.mode,c),a)};Ab.prototype.save=function(b){b=!1!==b?mb(this.doc.mode,this.state):this.state;return 0<this.maxLookAhead?new dd(b,this.maxLookAhead):b};var ue=function(b,c,a){this.start=b.start;this.end=b.pos;this.string=b.current();this.type=c||null;this.state=a},jc=function(b,c,a){this.text=b;Ta(this,c);this.height=a?a(this):1};jc.prototype.lineNo=function(){return ea(this)};Va(jc);var ng={},
mg={},gc=null,vc=null,Ee={left:0,right:0,top:0,bottom:0},Sb,ac=function(b,c,a){this.cm=a;var f=this.vert=x("div",[x("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),g=this.horiz=x("div",[x("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");b(f);b(g);Y(f,"scroll",function(){f.clientHeight&&c(f.scrollTop,"vertical")});Y(g,"scroll",function(){g.clientWidth&&c(g.scrollLeft,"horizontal")});this.checkedZeroWidth=!1;la&&8>xa&&(this.horiz.style.minHeight=this.vert.style.minWidth=
"18px")};ac.prototype.update=function(b){var c=b.scrollWidth>b.clientWidth+1,a=b.scrollHeight>b.clientHeight+1,f=b.nativeBarWidth;a?(this.vert.style.display="block",this.vert.style.bottom=c?f+"px":"0",this.vert.firstChild.style.height=Math.max(0,b.scrollHeight-b.clientHeight+(b.viewHeight-(c?f:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");c?(this.horiz.style.display="block",this.horiz.style.right=a?f+"px":"0",this.horiz.style.left=b.barLeft+"px",this.horiz.firstChild.style.width=
Math.max(0,b.scrollWidth-b.clientWidth+(b.viewWidth-b.barLeft-(a?f:0)))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedZeroWidth&&0<b.clientHeight&&(0==f&&this.zeroWidthHack(),this.checkedZeroWidth=!0);return{right:a?f:0,bottom:c?f:0}};ac.prototype.setScrollLeft=function(b){this.horiz.scrollLeft!=b&&(this.horiz.scrollLeft=b);this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")};ac.prototype.setScrollTop=function(b){this.vert.scrollTop!=
b&&(this.vert.scrollTop=b);this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")};ac.prototype.zeroWidthHack=function(){this.horiz.style.height=this.vert.style.width=tb&&!fh?"12px":"18px";this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new Zb;this.disableVert=new Zb};ac.prototype.enableZeroWidthBar=function(b,c,a){function f(){var g=b.getBoundingClientRect();("vert"==a?document.elementFromPoint(g.right-1,(g.top+g.bottom)/2):document.elementFromPoint((g.right+
g.left)/2,g.bottom-1))!=b?b.style.pointerEvents="none":c.set(1E3,f)}b.style.pointerEvents="auto";c.set(1E3,f)};ac.prototype.clear=function(){var b=this.horiz.parentNode;b.removeChild(this.horiz);b.removeChild(this.vert)};var Yc=function(){};Yc.prototype.update=function(){return{bottom:0,right:0}};Yc.prototype.setScrollLeft=function(){};Yc.prototype.setScrollTop=function(){};Yc.prototype.clear=function(){};var Ze={"native":ac,"null":Yc},vg=0,nd=function(b,c,a){var f=b.display;this.viewport=c;this.visible=
Vd(f,b.doc,c);this.editorIsHidden=!f.wrapper.offsetWidth;this.wrapperHeight=f.wrapper.clientHeight;this.wrapperWidth=f.wrapper.clientWidth;this.oldDisplayWidth=Ob(b);this.force=a;this.dims=Kd(b);this.events=[]};nd.prototype.signal=function(b,c){La(b,c)&&this.events.push(arguments)};nd.prototype.finish=function(){for(var b=0;b<this.events.length;b++)qa.apply(null,this.events[b])};var pd=0,nb=null;la?nb=-0.53:Gb?nb=15:gd?nb=-0.7:Yf&&(nb=-1/3);var ob=function(b,c){this.ranges=b;this.primIndex=c};ob.prototype.primary=
function(){return this.ranges[this.primIndex]};ob.prototype.equals=function(b){if(b==this)return!0;if(b.primIndex!=this.primIndex||b.ranges.length!=this.ranges.length)return!1;for(var c=0;c<this.ranges.length;c++){var a=this.ranges[c],f=b.ranges[c];if(!za(a.anchor,f.anchor)||!za(a.head,f.head))return!1}return!0};ob.prototype.deepCopy=function(){for(var b=[],c=0;c<this.ranges.length;c++)b[c]=new oa(O(this.ranges[c].anchor),O(this.ranges[c].head));return new ob(b,this.primIndex)};ob.prototype.somethingSelected=
function(){for(var b=0;b<this.ranges.length;b++)if(!this.ranges[b].empty())return!0;return!1};ob.prototype.contains=function(b,c){c||(c=b);for(var a=0;a<this.ranges.length;a++){var f=this.ranges[a];if(0<=G(c,f.from())&&0>=G(b,f.to()))return a}return-1};var oa=function(b,c){this.anchor=b;this.head=c};oa.prototype.from=function(){return ka(this.anchor,this.head)};oa.prototype.to=function(){return ja(this.anchor,this.head)};oa.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==
this.anchor.ch};Jc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(b,c){for(var a=b,f=b+c;a<f;++a){var g=this.lines[a];this.height-=g.height;var d=g;d.parent=null;hb(d);Wa(g,"delete")}this.lines.splice(b,c)},collapse:function(b){b.push.apply(b,this.lines)},insertInner:function(b,c,a){this.height+=a;this.lines=this.lines.slice(0,b).concat(c).concat(this.lines.slice(b));for(b=0;b<c.length;++b)c[b].parent=this},iterN:function(b,c,a){for(c=b+c;b<c;++b)if(a(this.lines[b]))return!0}};
Kc.prototype={chunkSize:function(){return this.size},removeInner:function(b,c){this.size-=c;for(var a=0;a<this.children.length;++a){var f=this.children[a],g=f.chunkSize();if(b<g){var d=Math.min(c,g-b),e=f.height;f.removeInner(b,d);this.height-=e-f.height;g==d&&(this.children.splice(a--,1),f.parent=null);if(0==(c-=d))break;b=0}else b-=g}25>this.size-c&&(1<this.children.length||!(this.children[0]instanceof Jc))&&(a=[],this.collapse(a),this.children=[new Jc(a)],this.children[0].parent=this)},collapse:function(b){for(var c=
0;c<this.children.length;++c)this.children[c].collapse(b)},insertInner:function(b,c,a){this.size+=c.length;this.height+=a;for(var f=0;f<this.children.length;++f){var g=this.children[f],d=g.chunkSize();if(b<=d){g.insertInner(b,c,a);if(g.lines&&50<g.lines.length){for(c=b=g.lines.length%25+25;c<g.lines.length;)a=new Jc(g.lines.slice(c,c+=25)),g.height-=a.height,this.children.splice(++f,0,a),a.parent=this;g.lines=g.lines.slice(0,b);this.maybeSpill()}break}b-=d}},maybeSpill:function(){if(!(10>=this.children.length)){var b=
this;do{var c=b.children.splice(b.children.length-5,5),c=new Kc(c);if(b.parent){b.size-=c.size;b.height-=c.height;var a=J(b.parent.children,b);b.parent.children.splice(a+1,0,c)}else a=new Kc(b.children),a.parent=b,b.children=[a,c],b=a;c.parent=b.parent}while(10<b.children.length);b.parent.maybeSpill()}},iterN:function(b,c,a){for(var f=0;f<this.children.length;++f){var g=this.children[f],d=g.chunkSize();if(b<d){d=Math.min(c,d-b);if(g.iterN(b,d,a))return!0;if(0==(c-=d))break;b=0}else b-=d}}};var Lc=
function(b,c,a){if(a)for(var f in a)a.hasOwnProperty(f)&&(this[f]=a[f]);this.doc=b;this.node=c};Lc.prototype.clear=function(){var b=this.doc.cm,c=this.line.widgets,a=this.line,f=ea(a);if(null!=f&&c){for(var g=0;g<c.length;++g)c[g]==this&&c.splice(g--,1);c.length||(a.widgets=null);var d=xc(this);ha(a,Math.max(0,a.height-d));b&&(kb(b,function(){var c=-d;Ia(a)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&ld(b,c);Jb(b,f,"widget")}),Wa(b,"lineWidgetCleared",b,this,f))}};Lc.prototype.changed=function(){var b=
this,c=this.height,a=this.doc.cm,f=this.line;this.height=null;var g=xc(this)-c;g&&(ha(f,f.height+g),a&&kb(a,function(){a.curOp.forceUpdate=!0;Ia(f)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&ld(a,g);Wa(a,"lineWidgetChanged",a,b,ea(f))}))};Va(Lc);var Cf=0,Lb=function(b,c){this.lines=[];this.type=c;this.doc=b;this.id=++Cf};Lb.prototype.clear=function(){if(!this.explicitlyCleared){var b=this.doc.cm,c=b&&!b.curOp;c&&Wb(b);if(La(this,"clear")){var a=this.find();a&&Wa(this,"clear",a.from,a.to)}for(var f=
a=null,g=0;g<this.lines.length;++g){var d=this.lines[g],e=$a(d.markedSpans,this);b&&!this.collapsed?Jb(b,ea(d),"text"):b&&(null!=e.to&&(f=ea(d)),null!=e.from&&(a=ea(d)));for(var m=d,h=d.markedSpans,t=e,v=void 0,r=0;r<h.length;++r)h[r]!=t&&(v||(v=[])).push(h[r]);m.markedSpans=v;null==e.from&&this.collapsed&&!ra(this.doc,d)&&b&&ha(d,Rb(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(g=0;g<this.lines.length;++g)d=Aa(this.lines[g]),e=Ba(d),e>b.display.maxLineLength&&(b.display.maxLine=d,
b.display.maxLineLength=e,b.display.maxLineChanged=!0);null!=a&&b&&this.collapsed&&fb(b,a,f+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&sf(b.doc));b&&Wa(b,"markerCleared",b,this,a,f);c&&Xb(b);this.parent&&this.parent.clear()}};Lb.prototype.find=function(b,c){null==b&&"bookmark"==this.type&&(b=1);for(var a,f,g=0;g<this.lines.length;++g){var d=this.lines[g],e=$a(d.markedSpans,this);if(null!=e.from&&(a=B(c?d:ea(d),e.from),-1==b))return a;
if(null!=e.to&&(f=B(c?d:ea(d),e.to),1==b))return f}return a&&{from:a,to:f}};Lb.prototype.changed=function(){var b=this,c=this.find(-1,!0),a=this,f=this.doc.cm;c&&f&&kb(f,function(){var g=c.line,d=ea(c.line);if(d=Jd(f,d))Fe(d),f.curOp.selectionChanged=f.curOp.forceUpdate=!0;f.curOp.updateMaxLine=!0;ra(a.doc,g)||null==a.height||(d=a.height,a.height=null,(d=xc(a)-d)&&ha(g,g.height+d));Wa(f,"markerChanged",f,b)})};Lb.prototype.attachLine=function(b){if(!this.lines.length&&this.doc.cm){var c=this.doc.cm.curOp;
c.maybeHiddenMarkers&&-1!=J(c.maybeHiddenMarkers,this)||(c.maybeUnhiddenMarkers||(c.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(b)};Lb.prototype.detachLine=function(b){this.lines.splice(J(this.lines,b),1);!this.lines.length&&this.doc.cm&&(b=this.doc.cm.curOp,(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this))};Va(Lb);var Mc=function(b,c){this.markers=b;this.primary=c;for(var a=0;a<b.length;++a)b[a].parent=this};Mc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var b=0;b<this.markers.length;++b)this.markers[b].clear();Wa(this,"clear")}};Mc.prototype.find=function(b,c){return this.primary.find(b,c)};Va(Mc);var ih=0,gb=function(b,c,a,f,g){if(!(this instanceof gb))return new gb(b,c,a,f,g);null==a&&(a=0);Kc.call(this,[new Jc([new jc("",null)])]);this.first=a;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.modeFrontier=this.highlightFrontier=a;a=B(a,0);this.sel=Fb(a);this.history=new qd(null);this.id=++ih;this.modeOption=
c;this.lineSep=f;this.direction="rtl"==g?"rtl":"ltr";this.extend=!1;"string"==typeof b&&(b=this.splitLines(b));de(this,{from:a,to:a,text:b});Xa(this,Fb(a),Cb)};gb.prototype=y(Kc.prototype,{constructor:gb,iter:function(b,c,a){a?this.iterN(b-this.first,c-b,a):this.iterN(this.first,this.first+this.size,b)},insert:function(b,c){for(var a=0,f=0;f<c.length;++f)a+=c[f].height;this.insertInner(b-this.first,c,a)},remove:function(b,c){this.removeInner(b-this.first,c)},getValue:function(b){var c=ia(this,this.first,
this.first+this.size);return!1===b?c:c.join(b||this.lineSeparator())},setValue:Sa(function(b){var c=B(this.first,0),a=this.first+this.size-1;mc(this,{from:c,to:B(a,E(this,a).text.length),text:this.splitLines(b),origin:"setValue",full:!0},!0);this.cm&&Cc(this.cm,0,0);Xa(this,Fb(c),Cb)}),replaceRange:function(b,c,a,f){c=A(this,c);a=a?A(this,a):c;nc(this,b,c,a,f)},getRange:function(b,c,a){b=Oa(this,A(this,b),A(this,c));return!1===a?b:b.join(a||this.lineSeparator())},getLine:function(b){return(b=this.getLineHandle(b))&&
b.text},getLineHandle:function(b){if(ta(this,b))return E(this,b)},getLineNumber:function(b){return ea(b)},getLineHandleVisualStart:function(b){"number"==typeof b&&(b=E(this,b));return Aa(b)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(b){return A(this,b)},getCursor:function(b){var c=this.sel.primary();return null==b||"head"==b?c.head:"anchor"==b?c.anchor:"end"==b||"to"==b||!1===b?c.to():c.from()},
listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Sa(function(b,c,a){b=A(this,"number"==typeof b?B(b,c||0):b);Xa(this,Fb(b,null),a)}),setSelection:Sa(function(b,c,a){var f=A(this,b);b=A(this,c||b);Xa(this,Fb(f,b),a)}),extendSelection:Sa(function(b,c,a){sd(this,A(this,b),c&&A(this,c),a)}),extendSelections:Sa(function(b,c){of(this,ga(this,b),c)}),extendSelectionsBy:Sa(function(b,c){var a=F(this.sel.ranges,b);of(this,ga(this,
a),c)}),setSelections:Sa(function(b,c,a){if(b.length){for(var f=[],g=0;g<b.length;g++)f[g]=new oa(A(this,b[g].anchor),A(this,b[g].head));null==c&&(c=Math.min(b.length-1,this.sel.primIndex));Xa(this,xb(f,c),a)}}),addSelection:Sa(function(b,c,a){var f=this.sel.ranges.slice(0);f.push(new oa(A(this,b),A(this,c||b)));Xa(this,xb(f,f.length-1),a)}),getSelection:function(b){for(var c=this.sel.ranges,a,f=0;f<c.length;f++){var g=Oa(this,c[f].from(),c[f].to());a=a?a.concat(g):g}return!1===b?a:a.join(b||this.lineSeparator())},
getSelections:function(b){for(var c=[],a=this.sel.ranges,f=0;f<a.length;f++){var g=Oa(this,a[f].from(),a[f].to());!1!==b&&(g=g.join(b||this.lineSeparator()));c[f]=g}return c},replaceSelection:function(b,c,a){for(var f=[],g=0;g<this.sel.ranges.length;g++)f[g]=b;this.replaceSelections(f,c,a||"+input")},replaceSelections:Sa(function(b,c,a){for(var f=[],g=this.sel,d=0;d<g.ranges.length;d++){var e=g.ranges[d];f[d]={from:e.from(),to:e.to(),text:this.splitLines(b[d]),origin:a}}if(b=c)if(b="end"!=c){b=[];
g=a=B(this.first,0);for(d=0;d<f.length;d++){var m=f[d],e=ff(m.from,a,g),h=ff(Kb(m),a,g);a=m.to;g=h;"around"==c?(m=this.sel.ranges[d],m=0>G(m.head,m.anchor),b[d]=new oa(m?h:e,m?e:h)):b[d]=new oa(e,e)}b=new ob(b,this.sel.primIndex)}c=b;for(b=f.length-1;0<=b;b--)mc(this,f[b]);c?pf(this,c):this.cm&&hc(this.cm)}),undo:Sa(function(){ud(this,"undo")}),redo:Sa(function(){ud(this,"redo")}),undoSelection:Sa(function(){ud(this,"undo",!0)}),redoSelection:Sa(function(){ud(this,"redo",!0)}),setExtending:function(b){this.extend=
b},getExtending:function(){return this.extend},historySize:function(){for(var b=this.history,c=0,a=0,f=0;f<b.done.length;f++)b.done[f].ranges||++c;for(f=0;f<b.undone.length;f++)b.undone[f].ranges||++a;return{undo:c,redo:a}},clearHistory:function(){this.history=new qd(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(b){b&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},
isClean:function(b){return this.history.generation==(b||this.cleanGeneration)},getHistory:function(){return{done:kc(this.history.done),undone:kc(this.history.undone)}},setHistory:function(b){var c=this.history=new qd(this.history.maxGeneration);c.done=kc(b.done.slice(0),null,!0);c.undone=kc(b.undone.slice(0),null,!0)},setGutterMarker:Sa(function(b,c,a){return Ic(this,b,"gutter",function(b){var g=b.gutterMarkers||(b.gutterMarkers={});g[c]=a;!a&&$(g)&&(b.gutterMarkers=null);return!0})}),clearGutter:Sa(function(b){var c=
this;this.iter(function(a){a.gutterMarkers&&a.gutterMarkers[b]&&Ic(c,a,"gutter",function(){a.gutterMarkers[b]=null;$(a.gutterMarkers)&&(a.gutterMarkers=null);return!0})})}),lineInfo:function(b){var c;if("number"==typeof b){if(!ta(this,b))return null;c=b;b=E(this,b);if(!b)return null}else if(c=ea(b),null==c)return null;return{line:c,handle:b,text:b.text,gutterMarkers:b.gutterMarkers,textClass:b.textClass,bgClass:b.bgClass,wrapClass:b.wrapClass,widgets:b.widgets}},addLineClass:Sa(function(b,c,a){return Ic(this,
b,"gutter"==c?"gutter":"class",function(b){var g="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[g]){if(s(a).test(b[g]))return!1;b[g]+=" "+a}else b[g]=a;return!0})}),removeLineClass:Sa(function(b,c,a){return Ic(this,b,"gutter"==c?"gutter":"class",function(b){var g="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",d=b[g];if(d)if(null==a)b[g]=null;else{var e=d.match(s(a));if(!e)return!1;var m=e.index+e[0].length;b[g]=d.slice(0,
e.index)+(e.index&&m!=d.length?" ":"")+d.slice(m)||null}else return!1;return!0})}),addLineWidget:Sa(function(b,c,a){return Eg(this,b,c,a)}),removeLineWidget:function(b){b.clear()},markText:function(b,c,a){return oc(this,A(this,b),A(this,c),a,a&&a.type||"range")},setBookmark:function(b,c){var a={replacedWith:c&&(null==c.nodeType?c.widget:c),insertLeft:c&&c.insertLeft,clearWhenEmpty:!1,shared:c&&c.shared,handleMouseEvents:c&&c.handleMouseEvents};b=A(this,b);return oc(this,b,b,a,"bookmark")},findMarksAt:function(b){b=
A(this,b);var c=[],a=E(this,b.line).markedSpans;if(a)for(var f=0;f<a.length;++f){var g=a[f];(null==g.from||g.from<=b.ch)&&(null==g.to||g.to>=b.ch)&&c.push(g.marker.parent||g.marker)}return c},findMarks:function(b,a,g){b=A(this,b);a=A(this,a);var f=[],d=b.line;this.iter(b.line,a.line+1,function(e){if(e=e.markedSpans)for(var m=0;m<e.length;m++){var h=e[m];null!=h.to&&d==b.line&&b.ch>=h.to||null==h.from&&d!=b.line||null!=h.from&&d==a.line&&h.from>=a.ch||g&&!g(h.marker)||f.push(h.marker.parent||h.marker)}++d});
return f},getAllMarks:function(){var b=[];this.iter(function(a){if(a=a.markedSpans)for(var g=0;g<a.length;++g)null!=a[g].from&&b.push(a[g].marker)});return b},posFromIndex:function(b){var a,g=this.first,f=this.lineSeparator().length;this.iter(function(d){d=d.text.length+f;if(d>b)return a=b,!0;b-=d;++g});return A(this,B(g,a))},indexFromPos:function(b){b=A(this,b);var a=b.ch;if(b.line<this.first||0>b.ch)return 0;var g=this.lineSeparator().length;this.iter(this.first,b.line,function(b){a+=b.text.length+
g});return a},copy:function(b){var a=new gb(ia(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);a.scrollTop=this.scrollTop;a.scrollLeft=this.scrollLeft;a.sel=this.sel;a.extend=!1;b&&(a.history.undoDepth=this.history.undoDepth,a.setHistory(this.getHistory()));return a},linkedDoc:function(b){b||(b={});var a=this.first,g=this.first+this.size;null!=b.from&&b.from>a&&(a=b.from);null!=b.to&&b.to<g&&(g=b.to);a=new gb(ia(this,a,g),b.mode||this.modeOption,a,this.lineSep,
this.direction);b.sharedHist&&(a.history=this.history);(this.linked||(this.linked=[])).push({doc:a,sharedHist:b.sharedHist});a.linked=[{doc:this,isParent:!0,sharedHist:b.sharedHist}];b=Df(this);for(g=0;g<b.length;g++){var f=b[g],d=f.find(),e=a.clipPos(d.from),d=a.clipPos(d.to);G(e,d)&&(e=oc(a,e,d,f.primary,f.primary.type),f.markers.push(e),e.parent=f)}return a},unlinkDoc:function(b){b instanceof Ca&&(b=b.doc);if(this.linked)for(var a=0;a<this.linked.length;++a)if(this.linked[a].doc==b){this.linked.splice(a,
1);b.unlinkDoc(this);Gg(Df(this));break}if(b.history==this.history){var g=[b.id];Yb(b,function(b){return g.push(b.id)},!0);b.history=new qd(null);b.history.done=kc(this.history.done,g);b.history.undone=kc(this.history.undone,g)}},iterLinkedDocs:function(b){Yb(this,b)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(b){return this.lineSep?b.split(this.lineSep):re(b)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Sa(function(b){"rtl"!=
b&&(b="ltr");b!=this.direction&&(this.direction=b,this.iter(function(b){return b.order=null}),this.cm&&Ag(this.cm))})});gb.prototype.eachLine=gb.prototype.iter;for(var Ff=0,Xf=!1,Mb={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",
127:"Delete",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Zc=0;10>Zc;Zc++)Mb[Zc+48]=Mb[Zc+96]=String(Zc);for(var Bd=65;90>=Bd;Bd++)Mb[Bd]=String.fromCharCode(Bd);for(var $c=1;12>=$c;$c++)Mb[$c+111]=Mb[$c+63235]="F"+$c;var Nc={basic:{Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},pcDefault:{"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},emacsy:{"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",
"Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},macDefault:{"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft",
"Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",
fallthrough:["basic","emacsy"]}};Nc["default"]=tb?Nc.macDefault:Nc.pcDefault;var Oc={selectAll:uf,singleSelection:function(b){return b.setSelection(b.getCursor("anchor"),b.getCursor("head"),Cb)},killLine:function(b){return qc(b,function(a){if(a.empty()){var g=E(b.doc,a.head.line).text.length;return a.head.ch==g&&a.head.line<b.lastLine()?{from:a.head,to:B(a.head.line+1,0)}:{from:a.head,to:B(a.head.line,g)}}return{from:a.from(),to:a.to()}})},deleteLine:function(b){return qc(b,function(a){return{from:B(a.from().line,
0),to:A(b.doc,B(a.to().line+1,0))}})},delLineLeft:function(b){return qc(b,function(b){return{from:B(b.from().line,0),to:b.from()}})},delWrappedLineLeft:function(b){return qc(b,function(a){var g=b.charCoords(a.head,"div").top+5;return{from:b.coordsChar({left:0,top:g},"div"),to:a.from()}})},delWrappedLineRight:function(b){return qc(b,function(a){var g=b.charCoords(a.head,"div").top+5,g=b.coordsChar({left:b.display.lineDiv.offsetWidth+100,top:g},"div");return{from:a.from(),to:g}})},undo:function(b){return b.undo()},
redo:function(b){return b.redo()},undoSelection:function(b){return b.undoSelection()},redoSelection:function(b){return b.redoSelection()},goDocStart:function(b){return b.extendSelection(B(b.firstLine(),0))},goDocEnd:function(b){return b.extendSelection(B(b.lastLine()))},goLineStart:function(b){return b.extendSelectionsBy(function(a){return Lf(b,a.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(b){return b.extendSelectionsBy(function(a){return Mf(b,a.head)},{origin:"+move",bias:1})},
goLineEnd:function(b){return b.extendSelectionsBy(function(a){a=a.head.line;var g=E(b.doc,a),f;f=g;for(var d;d=Ga(f,!1);)f=d.find(1,!0).line;f!=g&&(a=ea(f));return ke(!0,b,g,a,-1)},{origin:"+move",bias:-1})},goLineRight:function(b){return b.extendSelectionsBy(function(a){a=b.cursorCoords(a.head,"div").top+5;return b.coordsChar({left:b.display.lineDiv.offsetWidth+100,top:a},"div")},Xc)},goLineLeft:function(b){return b.extendSelectionsBy(function(a){a=b.cursorCoords(a.head,"div").top+5;return b.coordsChar({left:0,
top:a},"div")},Xc)},goLineLeftSmart:function(b){return b.extendSelectionsBy(function(a){var g=b.cursorCoords(a.head,"div").top+5,g=b.coordsChar({left:0,top:g},"div");return g.ch<b.getLine(g.line).search(/\S/)?Mf(b,a.head):g},Xc)},goLineUp:function(b){return b.moveV(-1,"line")},goLineDown:function(b){return b.moveV(1,"line")},goPageUp:function(b){return b.moveV(-1,"page")},goPageDown:function(b){return b.moveV(1,"page")},goCharLeft:function(b){return b.moveH(-1,"char")},goCharRight:function(b){return b.moveH(1,
"char")},goColumnLeft:function(b){return b.moveH(-1,"column")},goColumnRight:function(b){return b.moveH(1,"column")},goWordLeft:function(b){return b.moveH(-1,"word")},goGroupRight:function(b){return b.moveH(1,"group")},goGroupLeft:function(b){return b.moveH(-1,"group")},goWordRight:function(b){return b.moveH(1,"word")},delCharBefore:function(b){return b.deleteH(-1,"char")},delCharAfter:function(b){return b.deleteH(1,"char")},delWordBefore:function(b){return b.deleteH(-1,"word")},delWordAfter:function(b){return b.deleteH(1,
"word")},delGroupBefore:function(b){return b.deleteH(-1,"group")},delGroupAfter:function(b){return b.deleteH(1,"group")},indentAuto:function(b){return b.indentSelection("smart")},indentMore:function(b){return b.indentSelection("add")},indentLess:function(b){return b.indentSelection("subtract")},insertTab:function(b){return b.replaceSelection("\t")},insertSoftTab:function(b){for(var a=[],g=b.listSelections(),f=b.options.tabSize,d=0;d<g.length;d++){var m=g[d].from(),m=e(b.getLine(m.line),m.ch,f);a.push(U(f-
m%f))}b.replaceSelections(a)},defaultTab:function(b){b.somethingSelected()?b.indentSelection("add"):b.execCommand("insertTab")},transposeChars:function(b){return kb(b,function(){for(var a=b.listSelections(),g=[],f=0;f<a.length;f++)if(a[f].empty()){var d=a[f].head,e=E(b.doc,d.line).text;if(e)if(d.ch==e.length&&(d=new B(d.line,d.ch-1)),0<d.ch)d=new B(d.line,d.ch+1),b.replaceRange(e.charAt(d.ch-1)+e.charAt(d.ch-2),B(d.line,d.ch-2),d,"+transpose");else if(d.line>b.doc.first){var m=E(b.doc,d.line-1).text;
m&&(d=new B(d.line,1),b.replaceRange(e.charAt(0)+b.doc.lineSeparator()+m.charAt(m.length-1),B(d.line-1,m.length-1),d,"+transpose"))}g.push(new oa(d,d))}b.setSelections(g)})},newlineAndIndent:function(b){return kb(b,function(){for(var a=b.listSelections(),g=a.length-1;0<=g;g--)b.replaceRange(b.doc.lineSeparator(),a[g].anchor,a[g].head,"+input");a=b.listSelections();for(g=0;g<a.length;g++)b.indentLine(a[g].from().line,null,!0);hc(b)})},openLine:function(b){return b.replaceSelection("\n","start")},toggleOverwrite:function(b){return b.toggleOverwrite()}},
Ng=new Zb,le=null,me=function(b,a,g){this.time=b;this.pos=a;this.button=g};me.prototype.compare=function(b,a,g){return this.time+400>b&&0==G(a,this.pos)&&g==this.button};var Rc,Qc,rc={toString:function(){return"CodeMirror.Init"}},Wf={},zd={};Ca.defaults=Wf;Ca.optionHandlers=zd;var pe=[];Ca.defineInitHook=function(b){return pe.push(b)};var pb=null,wa=function(b){this.cm=b;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new Zb;this.composing=null;
this.gracePeriod=!1;this.readDOMTimeout=null};wa.prototype.init=function(b){function a(b){if(!na(d,b)){if(d.somethingSelected())Zf({lineWise:!1,text:d.getSelections()}),"cut"==b.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var c=bg(d);Zf({lineWise:!0,text:c.text});"cut"==b.type&&d.operation(function(){d.setSelections(c.ranges,0,Cb);d.replaceSelection("",null,"cut")})}else return;if(b.clipboardData){b.clipboardData.clearData();var g=pb.text.join("\n");b.clipboardData.setData("Text",
g);if(b.clipboardData.getData("Text")==g){b.preventDefault();return}}var k=dg();b=k.firstChild;d.display.lineSpace.insertBefore(k,d.display.lineSpace.firstChild);b.value=pb.text.join("\n");var m=document.activeElement;Wc(b);setTimeout(function(){d.display.lineSpace.removeChild(k);m.focus();m==e&&f.showPrimarySelection()},50)}}var g=this,f=this,d=f.cm,e=f.div=b.lineDiv;cg(e,d.options.spellcheck);Y(e,"paste",function(b){na(d,b)||ag(b,d)||11>=xa&&setTimeout(Ra(d,function(){return g.updateFromDOM()}),
20)});Y(e,"compositionstart",function(b){g.composing={data:b.data,done:!1}});Y(e,"compositionupdate",function(b){g.composing||(g.composing={data:b.data,done:!1})});Y(e,"compositionend",function(b){g.composing&&(b.data!=g.composing.data&&g.readFromDOMSoon(),g.composing.done=!0)});Y(e,"touchstart",function(){return f.forceCompositionEnd()});Y(e,"input",function(){g.composing||g.readFromDOMSoon()});Y(e,"copy",a);Y(e,"cut",a)};wa.prototype.prepareSelection=function(){var b=Oe(this.cm,!1);b.focus=this.cm.state.focused;
return b};wa.prototype.showSelection=function(b,a){b&&this.cm.display.view.length&&((b.focus||a)&&this.showPrimarySelection(),this.showMultipleSelections(b))};wa.prototype.showPrimarySelection=function(){var b=window.getSelection(),a=this.cm,g=a.doc.sel.primary(),f=g.from(),g=g.to();if(a.display.viewTo==a.display.viewFrom||f.line>=a.display.viewTo||g.line<a.display.viewFrom)b.removeAllRanges();else{var d=Ad(a,b.anchorNode,b.anchorOffset),e=Ad(a,b.focusNode,b.focusOffset);if(!d||d.bad||!e||e.bad||
0!=G(ka(d,e),f)||0!=G(ja(d,e),g))if(d=a.display.view,f=f.line>=a.display.viewFrom&&fg(a,f)||{node:d[0].measure.map[2],offset:0},g=g.line<a.display.viewTo&&fg(a,g),g||(g=d[d.length-1].measure,g=g.maps?g.maps[g.maps.length-1]:g.map,g={node:g[g.length-1],offset:g[g.length-2]-g[g.length-3]}),f&&g){var d=b.rangeCount&&b.getRangeAt(0),m;try{m=ec(f.node,f.offset,g.offset,g.node)}catch(h){}m&&(!Gb&&a.state.focused?(b.collapse(f.node,f.offset),m.collapsed||(b.removeAllRanges(),b.addRange(m))):(b.removeAllRanges(),
b.addRange(m)),d&&null==b.anchorNode?b.addRange(d):Gb&&this.startGracePeriod());this.rememberSelection()}else b.removeAllRanges()}};wa.prototype.startGracePeriod=function(){var b=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){b.gracePeriod=!1;b.selectionChanged()&&b.cm.operation(function(){return b.cm.curOp.selectionChanged=!0})},20)};wa.prototype.showMultipleSelections=function(b){w(this.cm.display.cursorDiv,b.cursors);w(this.cm.display.selectionDiv,b.selection)};wa.prototype.rememberSelection=
function(){var b=window.getSelection();this.lastAnchorNode=b.anchorNode;this.lastAnchorOffset=b.anchorOffset;this.lastFocusNode=b.focusNode;this.lastFocusOffset=b.focusOffset};wa.prototype.selectionInEditor=function(){var b=window.getSelection();if(!b.rangeCount)return!1;b=b.getRangeAt(0).commonAncestorContainer;return ca(this.div,b)};wa.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())};wa.prototype.blur=
function(){this.div.blur()};wa.prototype.getField=function(){return this.div};wa.prototype.supportsTouch=function(){return!0};wa.prototype.receivedFocus=function(){function b(){a.cm.state.focused&&(a.pollSelection(),a.polling.set(a.cm.options.pollInterval,b))}var a=this;this.selectionInEditor()?this.pollSelection():kb(this.cm,function(){return a.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,b)};wa.prototype.selectionChanged=function(){var b=window.getSelection();return b.anchorNode!=
this.lastAnchorNode||b.anchorOffset!=this.lastAnchorOffset||b.focusNode!=this.lastFocusNode||b.focusOffset!=this.lastFocusOffset};wa.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var b=window.getSelection(),a=this.cm;if(hd&&gd&&this.cm.options.gutters.length&&bh(b.anchorNode))this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();else if(!this.composing){this.rememberSelection();var g=Ad(a,
b.anchorNode,b.anchorOffset),f=Ad(a,b.focusNode,b.focusOffset);g&&f&&kb(a,function(){Xa(a.doc,Fb(g,f),Cb);if(g.bad||f.bad)a.curOp.selectionChanged=!0})}}};wa.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var b=this.cm,a=b.display,g=b.doc.sel.primary(),f=g.from(),d=g.to();0==f.ch&&f.line>b.firstLine()&&(f=B(f.line-1,E(b.doc,f.line-1).length));d.ch==E(b.doc,d.line).text.length&&d.line<b.lastLine()&&(d=B(d.line+1,0));if(f.line<
a.viewFrom||d.line>a.viewTo-1)return!1;var e;f.line==a.viewFrom||0==(e=Pb(b,f.line))?(g=ea(a.view[0].line),e=a.view[0].node):(g=ea(a.view[e].line),e=a.view[e-1].node.nextSibling);var m=Pb(b,d.line);m==a.view.length-1?(d=a.viewTo-1,a=a.lineDiv.lastChild):(d=ea(a.view[m+1].line)-1,a=a.view[m+1].node.previousSibling);if(!e)return!1;a=b.doc.splitLines(ch(b,e,a,g,d));for(e=Oa(b.doc,B(g,0),B(d,E(b.doc,d).text.length));1<a.length&&1<e.length;)if(P(a)==P(e))a.pop(),e.pop(),d--;else if(a[0]==e[0])a.shift(),
e.shift(),g++;else break;for(var h=0,m=0,t=a[0],v=e[0],r=Math.min(t.length,v.length);h<r&&t.charCodeAt(h)==v.charCodeAt(h);)++h;t=P(a);v=P(e);for(r=Math.min(t.length-(1==a.length?h:0),v.length-(1==e.length?h:0));m<r&&t.charCodeAt(t.length-m-1)==v.charCodeAt(v.length-m-1);)++m;if(1==a.length&&1==e.length&&g==f.line)for(;h&&h>f.ch&&t.charCodeAt(t.length-m-1)==v.charCodeAt(v.length-m-1);)h--,m++;a[a.length-1]=t.slice(0,t.length-m).replace(/^\u200b+/,"");a[0]=a[0].slice(h).replace(/\u200b+$/,"");f=B(g,
h);g=B(d,e.length?P(e).length-m:0);if(1<a.length||a[0]||G(f,g))return nc(b.doc,a,f,g,"+input"),!0};wa.prototype.ensurePolled=function(){this.forceCompositionEnd()};wa.prototype.reset=function(){this.forceCompositionEnd()};wa.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())};wa.prototype.readFromDOMSoon=function(){var b=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){b.readDOMTimeout=
null;if(b.composing)if(b.composing.done)b.composing=null;else return;b.updateFromDOM()},80))};wa.prototype.updateFromDOM=function(){var b=this;!this.cm.isReadOnly()&&this.pollContent()||kb(this.cm,function(){return fb(b.cm)})};wa.prototype.setUneditable=function(b){b.contentEditable="false"};wa.prototype.onKeyPress=function(b){0!=b.charCode&&(b.preventDefault(),this.cm.isReadOnly()||Ra(this.cm,qe)(this.cm,String.fromCharCode(null==b.charCode?b.keyCode:b.charCode),0))};wa.prototype.readOnlyChanged=
function(b){this.div.contentEditable=String("nocursor"!=b)};wa.prototype.onContextMenu=function(){};wa.prototype.resetPosition=function(){};wa.prototype.needsContentAttribute=!0;var Na=function(b){this.cm=b;this.prevInput="";this.pollingFast=!1;this.polling=new Zb;this.hasSelection=!1;this.composing=null};Na.prototype.init=function(b){function a(b){if(!na(d,b)){if(d.somethingSelected())pb={lineWise:!1,text:d.getSelections()};else if(d.options.lineWiseCopyCut){var c=bg(d);pb={lineWise:!0,text:c.text};
"cut"==b.type?d.setSelections(c.ranges,null,Cb):(f.prevInput="",m.value=c.text.join("\n"),Wc(m))}else return;"cut"==b.type&&(d.state.cutIncoming=!0)}}var g=this,f=this,d=this.cm,e=this.wrapper=dg(),m=this.textarea=e.firstChild;b.wrapper.insertBefore(e,b.wrapper.firstChild);Uc&&(m.style.width="0px");Y(m,"input",function(){la&&9<=xa&&g.hasSelection&&(g.hasSelection=null);f.poll()});Y(m,"paste",function(b){na(d,b)||ag(b,d)||(d.state.pasteIncoming=!0,f.fastPoll())});Y(m,"cut",a);Y(m,"copy",a);Y(b.scroller,
"paste",function(a){Eb(b,a)||na(d,a)||(d.state.pasteIncoming=!0,f.focus())});Y(b.lineSpace,"selectstart",function(a){Eb(b,a)||Ja(a)});Y(m,"compositionstart",function(){var b=d.getCursor("from");f.composing&&f.composing.range.clear();f.composing={start:b,range:d.markText(b,d.getCursor("to"),{className:"CodeMirror-composing"})}});Y(m,"compositionend",function(){f.composing&&(f.poll(),f.composing.range.clear(),f.composing=null)})};Na.prototype.prepareSelection=function(){var b=this.cm,a=b.display,g=
b.doc,f=Oe(b);if(b.options.moveInputWithCursor){var b=vb(b,g.sel.primary().head,"div"),g=a.wrapper.getBoundingClientRect(),d=a.lineDiv.getBoundingClientRect();f.teTop=Math.max(0,Math.min(a.wrapper.clientHeight-10,b.top+d.top-g.top));f.teLeft=Math.max(0,Math.min(a.wrapper.clientWidth-10,b.left+d.left-g.left))}return f};Na.prototype.showSelection=function(b){var a=this.cm.display;w(a.cursorDiv,b.cursors);w(a.selectionDiv,b.selection);null!=b.teTop&&(this.wrapper.style.top=b.teTop+"px",this.wrapper.style.left=
b.teLeft+"px")};Na.prototype.reset=function(b){if(!this.contextMenuPending&&!this.composing){var a=this.cm;a.somethingSelected()?(this.prevInput="",b=a.getSelection(),this.textarea.value=b,a.state.focused&&Wc(this.textarea),la&&9<=xa&&(this.hasSelection=b)):b||(this.prevInput=this.textarea.value="",la&&9<=xa&&(this.hasSelection=null))}};Na.prototype.getField=function(){return this.textarea};Na.prototype.supportsTouch=function(){return!1};Na.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&
(!tc||Z()!=this.textarea))try{this.textarea.focus()}catch(b){}};Na.prototype.blur=function(){this.textarea.blur()};Na.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Na.prototype.receivedFocus=function(){this.slowPoll()};Na.prototype.slowPoll=function(){var b=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){b.poll();b.cm.state.focused&&b.slowPoll()})};Na.prototype.fastPoll=function(){function b(){g.poll()||a?(g.pollingFast=!1,g.slowPoll()):
(a=!0,g.polling.set(60,b))}var a=!1,g=this;g.pollingFast=!0;g.polling.set(20,b)};Na.prototype.poll=function(){var b=this,a=this.cm,g=this.textarea,f=this.prevInput;if(this.contextMenuPending||!a.state.focused||hh(g)&&!f&&!this.composing||a.isReadOnly()||a.options.disableInput||a.state.keySeq)return!1;var d=g.value;if(d==f&&!a.somethingSelected())return!1;if(la&&9<=xa&&this.hasSelection===d||tb&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=
d.charCodeAt(0);8203!=e||f||(f="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}for(var m=0,e=Math.min(f.length,d.length);m<e&&f.charCodeAt(m)==d.charCodeAt(m);)++m;kb(a,function(){qe(a,d.slice(m),f.length-m,null,b.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?g.value=b.prevInput="":b.prevInput=d;b.composing&&(b.composing.range.clear(),b.composing.range=a.markText(b.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0};Na.prototype.ensurePolled=
function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)};Na.prototype.onKeyPress=function(){la&&9<=xa&&(this.hasSelection=null);this.fastPoll()};Na.prototype.onContextMenu=function(b){function a(){if(null!=m.selectionStart){var b=d.somethingSelected(),c="\u200b"+(b?m.value:"");m.value="\u21da";m.value=c;f.prevInput=b?"":"\u200b";m.selectionStart=1;m.selectionEnd=c.length;e.selForContextMenu=d.doc.sel}}function g(){f.contextMenuPending=!1;f.wrapper.style.cssText=r;m.style.cssText=v;la&&9>xa&&
e.scrollbars.setScrollTop(e.scroller.scrollTop=t);if(null!=m.selectionStart){(!la||la&&9>xa)&&a();var b=0,k=function(){e.selForContextMenu==d.doc.sel&&0==m.selectionStart&&0<m.selectionEnd&&"\u200b"==f.prevInput?Ra(d,uf)(d):10>b++?e.detectingSelectAll=setTimeout(k,500):(e.selForContextMenu=null,e.input.reset())};e.detectingSelectAll=setTimeout(k,200)}}var f=this,d=f.cm,e=d.display,m=f.textarea,h=Tb(d,b),t=e.scroller.scrollTop;if(h&&!wb){d.options.resetSelectionOnContextMenu&&-1==d.doc.sel.contains(h)&&
Ra(d,Xa)(d.doc,Fb(h),Cb);var v=m.style.cssText,r=f.wrapper.style.cssText;f.wrapper.style.cssText="position: absolute";h=f.wrapper.getBoundingClientRect();m.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(b.clientY-h.top-5)+"px; left: "+(b.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(la?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var l;Ya&&(l=
window.scrollY);e.input.focus();Ya&&window.scrollTo(null,l);e.input.reset();d.somethingSelected()||(m.value=f.prevInput=" ");f.contextMenuPending=!0;e.selForContextMenu=d.doc.sel;clearTimeout(e.detectingSelectAll);la&&9<=xa&&a();if(ne){H(b);var p=function(){va(window,"mouseup",p);setTimeout(g,20)};Y(window,"mouseup",p)}else setTimeout(g,50)}};Na.prototype.readOnlyChanged=function(b){b||this.reset();this.textarea.disabled="nocursor"==b};Na.prototype.setUneditable=function(){};Na.prototype.needsContentAttribute=
!1;(function(b){function a(c,d,e,m){b.defaults[c]=d;e&&(g[c]=m?function(b,a,c){c!=rc&&e(b,a,c)}:e)}var g=b.optionHandlers;b.defineOption=a;b.Init=rc;a("value","",function(b,a){return b.setValue(a)},!0);a("mode",null,function(b,a){b.doc.modeOption=a;ce(b)},!0);a("indentUnit",2,ce,!0);a("indentWithTabs",!1);a("smartIndent",!0);a("tabSize",4,function(b){Gc(b);zc(b);fb(b)},!0);a("lineSeparator",null,function(b,a){if(b.doc.lineSep=a){var c=[],g=b.doc.first;b.doc.iter(function(b){for(var f=0;;){var d=b.text.indexOf(a,
f);if(-1==d)break;f=d+a.length;c.push(B(g,d))}g++});for(var d=c.length-1;0<=d;d--)nc(b.doc,a,c[d],B(c[d].line,c[d].ch+a.length))}});a("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(b,a,c){b.state.specialChars=RegExp(a.source+(a.test("\t")?"":"|\t"),"g");c!=rc&&b.refresh()});a("specialCharPlaceholder",Fd,function(b){return b.refresh()},!0);a("electricChars",!0);a("inputStyle",tc?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");
},!0);a("spellcheck",!1,function(b,a){return b.getInputField().spellcheck=a},!0);a("rtlMoveVisually",!gh);a("wholeLineUpdateBefore",!0);a("theme","default",function(b){Vf(b);Sc(b)},!0);a("keyMap","default",function(b,a,c){a=vd(a);(c=c!=rc&&vd(c))&&c.detach&&c.detach(b,a);a.attach&&a.attach(b,c||null)});a("extraKeys",null);a("configureMouse",null);a("lineWrapping",!1,$g,!0);a("gutters",[],function(b){ae(b.options);Sc(b)},!0);a("fixedGutter",!0,function(b,a){b.display.gutters.style.left=a?Rd(b.display)+
"px":"0";b.refresh()},!0);a("coverGutterNextToScrollbar",!1,function(b){return ic(b)},!0);a("scrollbarStyle","native",function(b){Ye(b);ic(b);b.display.scrollbars.setScrollTop(b.doc.scrollTop);b.display.scrollbars.setScrollLeft(b.doc.scrollLeft)},!0);a("lineNumbers",!1,function(b){ae(b.options);Sc(b)},!0);a("firstLineNumber",1,Sc,!0);a("lineNumberFormatter",function(b){return b},Sc,!0);a("showCursorWhenSelecting",!1,Ac,!0);a("resetSelectionOnContextMenu",!0);a("lineWiseCopyCut",!0);a("pasteLinesPerSelection",
!0);a("readOnly",!1,function(b,a){"nocursor"==a&&(Bc(b),b.display.input.blur());b.display.input.readOnlyChanged(a)});a("disableInput",!1,function(b,a){a||b.display.input.reset()},!0);a("dragDrop",!0,Zg);a("allowDropFileTypes",null);a("cursorBlinkRate",530);a("cursorScrollMargin",0);a("cursorHeight",1,Ac,!0);a("singleCursorHeightPerLine",!0,Ac,!0);a("workTime",100);a("workDelay",100);a("flattenSpans",!0,Gc,!0);a("addModeClass",!1,Gc,!0);a("pollInterval",100);a("undoDepth",200,function(b,a){return b.doc.history.undoDepth=
a});a("historyEventDelay",1250);a("viewportMargin",10,function(b){return b.refresh()},!0);a("maxHighlightLength",1E4,Gc,!0);a("moveInputWithCursor",!0,function(b,a){a||b.display.input.resetPosition()});a("tabindex",null,function(b,a){return b.display.input.getField().tabIndex=a||""});a("autofocus",null);a("direction","ltr",function(b,a){return b.doc.setDirection(a)},!0)})(Ca);(function(b){var a=b.optionHandlers,g=b.helpers={};b.prototype={constructor:b,focus:function(){window.focus();this.display.input.focus()},
setOption:function(b,g){var d=this.options,e=d[b];if(d[b]!=g||"mode"==b)d[b]=g,a.hasOwnProperty(b)&&Ra(this,a[b])(this,g,e),qa(this,"optionChange",this,b)},getOption:function(b){return this.options[b]},getDoc:function(){return this.doc},addKeyMap:function(b,a){this.state.keyMaps[a?"push":"unshift"](vd(b))},removeKeyMap:function(b){for(var a=this.state.keyMaps,c=0;c<a.length;++c)if(a[c]==b||a[c].name==b)return a.splice(c,1),!0},addOverlay:bb(function(a,c){var g=a.token?a:b.getMode(this.options,a);
if(g.startState)throw Error("Overlays may not be stateful.");K(this.state.overlays,{mode:g,modeSpec:a,opaque:c&&c.opaque,priority:c&&c.priority||0},function(b){return b.priority});this.state.modeGen++;fb(this)}),removeOverlay:bb(function(b){for(var a=this.state.overlays,c=0;c<a.length;++c){var g=a[c].modeSpec;if(g==b||"string"==typeof b&&g.name==b){a.splice(c,1);this.state.modeGen++;fb(this);break}}}),indentLine:bb(function(b,a,c){"string"!=typeof a&&"number"!=typeof a&&(a=null==a?this.options.smartIndent?
"smart":"prev":a?"add":"subtract");ta(this.doc,b)&&Tc(this,b,a,c)}),indentSelection:bb(function(b){for(var a=this.doc.sel.ranges,c=-1,g=0;g<a.length;g++){var d=a[g];if(d.empty())d.head.line>c&&(Tc(this,d.head.line,b,!0),c=d.head.line,g==this.doc.sel.primIndex&&hc(this));else{for(var e=d.from(),d=d.to(),m=Math.max(c,e.line),c=Math.min(this.lastLine(),d.line-(d.ch?0:1))+1,d=m;d<c;++d)Tc(this,d,b);d=this.doc.sel.ranges;0==e.ch&&a.length==d.length&&0<d[g].from().ch&&ge(this.doc,g,new oa(e,d[g].to()),
Cb)}}}),getTokenAt:function(b,a){return z(this,b,a)},getLineTokens:function(b,a){return z(this,B(b),a,!0)},getTokenTypeAt:function(b){b=A(this.doc,b);var a=X(this,E(this.doc,b.line)),c=0,g=(a.length-1)/2;b=b.ch;var d;if(0==b)d=a[2];else for(;;){var e=c+g>>1;if((e?a[2*e-1]:0)>=b)g=e;else if(a[2*e+1]<b)c=e+1;else{d=a[2*e+2];break}}a=d?d.indexOf("overlay "):-1;return 0>a?d:0==a?null:d.slice(0,a-1)},getModeAt:function(a){var c=this.doc.mode;return c.innerMode?b.innerMode(c,this.getTokenAt(a).state).mode:
c},getHelper:function(b,a){return this.getHelpers(b,a)[0]},getHelpers:function(b,a){var c=[];if(!g.hasOwnProperty(a))return c;var d=g[a],e=this.getModeAt(b);if("string"==typeof e[a])d[e[a]]&&c.push(d[e[a]]);else if(e[a])for(var m=0;m<e[a].length;m++){var h=d[e[a][m]];h&&c.push(h)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(m=0;m<d._global.length;m++)h=d._global[m],h.pred(e,this)&&-1==J(c,h.val)&&c.push(h.val);return c},getStateAfter:function(b,a){var c=
this.doc;b=Math.max(c.first,Math.min(null==b?c.first+c.size-1:b,c.first+c.size-1));return V(this,b+1,a).state},cursorCoords:function(b,a){var c;c=this.doc.sel.primary();c=null==b?c.head:"object"==typeof b?A(this.doc,b):b?c.from():c.to();return vb(this,c,a||"page")},charCoords:function(b,a){return Nd(this,A(this.doc,b),a||"page")},coordsChar:function(b,a){b=Je(this,b,a||"page");return Pd(this,b.left,b.top)},lineAtHeight:function(b,a){b=Je(this,{top:b,left:0},a||"page").top;return Za(this.doc,b+this.display.viewOffset)},
heightAtLine:function(b,a,c){var g=!1;if("number"==typeof b){var d=this.doc.first+this.doc.size-1;b<this.doc.first?b=this.doc.first:b>d&&(b=d,g=!0);b=E(this.doc,b)}return id(this,b,{top:0,left:0},a||"page",c||g).top+(g?this.doc.height-Ia(b):0)},defaultTextHeight:function(){return Rb(this.display)},defaultCharWidth:function(){return yc(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(b,a,c,g,d){var e=this.display;b=vb(this,A(this.doc,
b));var m=b.bottom,k=b.left;a.style.position="absolute";a.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(a);e.sizer.appendChild(a);if("over"==g)m=b.top;else if("above"==g||"near"==g){var h=Math.max(e.wrapper.clientHeight,this.doc.height),t=Math.max(e.sizer.clientWidth,e.lineSpace.clientWidth);("above"==g||b.bottom+a.offsetHeight>h)&&b.top>a.offsetHeight?m=b.top-a.offsetHeight:b.bottom+a.offsetHeight<=h&&(m=b.bottom);k+a.offsetWidth>t&&(k=t-a.offsetWidth)}a.style.top=m+"px";
a.style.left=a.style.right="";"right"==d?(k=e.sizer.clientWidth-a.offsetWidth,a.style.right="0px"):("left"==d?k=0:"middle"==d&&(k=(e.sizer.clientWidth-a.offsetWidth)/2),a.style.left=k+"px");c&&(b=Xd(this,{left:k,top:m,right:k+a.offsetWidth,bottom:m+a.offsetHeight}),null!=b.scrollTop&&Dc(this,b.scrollTop),null!=b.scrollLeft&&Vb(this,b.scrollLeft))},triggerOnKeyDown:bb(Pf),triggerOnKeyPress:bb(Rf),triggerOnKeyUp:Qf,triggerOnMouseDown:bb(Sf),execCommand:function(b){if(Oc.hasOwnProperty(b))return Oc[b].call(null,
this)},triggerElectric:bb(function(b){$f(this,b)}),findPosH:function(b,a,c,g){var d=1;0>a&&(d=-1,a=-a);b=A(this.doc,b);for(var e=0;e<a&&(b=se(this.doc,b,d,c,g),!b.hitSide);++e);return b},moveH:bb(function(b,a){var c=this;this.extendSelectionsBy(function(g){return c.display.shift||c.doc.extend||g.empty()?se(c.doc,g.head,b,a,c.options.rtlMoveVisually):0>b?g.from():g.to()},Xc)}),deleteH:bb(function(b,a){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):qc(this,function(g){var d=
se(c,g.head,b,a,!1);return 0>b?{from:d,to:g.head}:{from:g.head,to:d}})}),findPosV:function(b,a,c,g){var d=1;0>a&&(d=-1,a=-a);var e=A(this.doc,b);for(b=0;b<a&&(e=vb(this,e,"div"),null==g?g=e.left:e.left=g,e=eg(this,e,d,c),!e.hitSide);++b);return e},moveV:bb(function(b,a){var c=this,g=this.doc,d=[],e=!this.display.shift&&!g.extend&&g.sel.somethingSelected();g.extendSelectionsBy(function(m){if(e)return 0>b?m.from():m.to();var k=vb(c,m.head,"div");null!=m.goalColumn&&(k.left=m.goalColumn);d.push(k.left);
var h=eg(c,k,b,a);"page"==a&&m==g.sel.primary()&&ld(c,Nd(c,h,"div").top-k.top);return h},Xc);if(d.length)for(var m=0;m<g.sel.ranges.length;m++)g.sel.ranges[m].goalColumn=d[m]}),findWordAt:function(b){var a=E(this.doc,b.line).text,c=b.ch,g=b.ch;if(a){var d=this.getHelper(b,"wordChars");"before"!=b.sticky&&g!=a.length||!c?++g:--c;for(var e=a.charAt(c),e=h(e,d)?function(b){return h(b,d)}:/\s/.test(e)?function(b){return/\s/.test(b)}:function(b){return!/\s/.test(b)&&!h(b)};0<c&&e(a.charAt(c-1));)--c;for(;g<
a.length&&e(a.charAt(g));)++g}return new oa(B(b.line,c),B(b.line,g))},toggleOverwrite:function(b){if(null==b||b!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?da(this.display.cursorDiv,"CodeMirror-overwrite"):Ub(this.display.cursorDiv,"CodeMirror-overwrite"),qa(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==Z()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:bb(function(b,a){Cc(this,
b,a)}),getScrollInfo:function(){var b=this.display.scroller;return{left:b.scrollLeft,top:b.scrollTop,height:b.scrollHeight-Bb(this)-this.display.barHeight,width:b.scrollWidth-Bb(this)-this.display.barWidth,clientHeight:Id(this),clientWidth:Ob(this)}},scrollIntoView:bb(function(b,a){null==b?(b={from:this.doc.sel.primary().head,to:null},null==a&&(a=this.options.cursorScrollMargin)):"number"==typeof b?b={from:B(b,0),to:null}:null==b.from&&(b={from:b,to:null});b.to||(b.to=b.from);b.margin=a||0;if(null!=
b.from.line){var c=b;md(this);this.curOp.scrollToPos=c}else Ve(this,b.from,b.to,b.margin)}),setSize:bb(function(b,a){var c=this,g=function(b){return"number"==typeof b||/^\d+$/.test(String(b))?b+"px":b};null!=b&&(this.display.wrapper.style.width=g(b));null!=a&&(this.display.wrapper.style.height=g(a));this.options.lineWrapping&&Ge(this);var d=this.display.viewFrom;this.doc.iter(d,this.display.viewTo,function(b){if(b.widgets)for(var a=0;a<b.widgets.length;a++)if(b.widgets[a].noHScroll){Jb(c,d,"widget");
break}++d});this.curOp.forceUpdate=!0;qa(this,"refresh",this)}),operation:function(b){return kb(this,b)},startOperation:function(){return Wb(this)},endOperation:function(){return Xb(this)},refresh:bb(function(){var b=this.display.cachedTextHeight;fb(this);this.curOp.forceUpdate=!0;zc(this);Cc(this,this.doc.scrollLeft,this.doc.scrollTop);Wd(this);(null==b||0.5<Math.abs(b-Rb(this.display)))&&Sd(this);qa(this,"refresh",this)}),swapDoc:bb(function(b){var a=this.doc;a.cm=null;hf(this,b);zc(this);this.display.input.reset();
Cc(this,b.scrollLeft,b.scrollTop);this.curOp.forceScroll=!0;Wa(this,"swapDoc",this,a);return a}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Va(b);b.registerHelper=function(a,c,d){g.hasOwnProperty(a)||(g[a]=b[a]={_global:[]});g[a][c]=d};b.registerGlobalHelper=function(a,c,d,e){b.registerHelper(a,c,e);g[a]._global.push({pred:d,
val:e})}})(Ca);var jh="iter insert remove copy getEditor constructor".split(" "),ad;for(ad in gb.prototype)gb.prototype.hasOwnProperty(ad)&&0>J(jh,ad)&&(Ca.prototype[ad]=function(b){return function(){return b.apply(this.doc,arguments)}}(gb.prototype[ad]));Va(gb);Ca.inputStyles={textarea:Na,contenteditable:wa};Ca.defineMode=function(b){Ca.defaults.mode||"null"==b||(Ca.defaults.mode=b);N.apply(this,arguments)};Ca.defineMIME=function(b,a){cc[b]=a};Ca.defineMode("null",function(){return{token:function(b){return b.skipToEnd()}}});
Ca.defineMIME("text/plain","null");Ca.defineExtension=function(b,a){Ca.prototype[b]=a};Ca.defineDocExtension=function(b,a){gb.prototype[b]=a};Ca.fromTextArea=function(b,a){function g(){b.value=v.getValue()}a=a?l(a):{};a.value=b.value;!a.tabindex&&b.tabIndex&&(a.tabindex=b.tabIndex);!a.placeholder&&b.placeholder&&(a.placeholder=b.placeholder);if(null==a.autofocus){var d=Z();a.autofocus=d==b||null!=b.getAttribute("autofocus")&&d==document.body}var e;if(b.form&&(Y(b.form,"submit",g),!a.leaveSubmitMethodAlone)){var m=
b.form;e=m.submit;try{var h=m.submit=function(){g();m.submit=e;m.submit();m.submit=h}}catch(t){}}a.finishInit=function(a){a.save=g;a.getTextArea=function(){return b};a.toTextArea=function(){a.toTextArea=isNaN;g();b.parentNode.removeChild(a.getWrapperElement());b.style.display="";b.form&&(va(b.form,"submit",g),"function"==typeof b.form.submit&&(b.form.submit=e))}};b.style.display="none";var v=Ca(function(a){return b.parentNode.insertBefore(a,b.nextSibling)},a);return v};(function(b){b.off=va;b.on=
Y;b.wheelEventPixels=zg;b.Doc=gb;b.splitLines=re;b.countColumn=e;b.findColumn=W;b.isWordChar=q;b.Pass=xd;b.signal=qa;b.Line=jc;b.changeEnd=Kb;b.scrollbarModel=Ze;b.Pos=B;b.cmpPos=G;b.modes=Dd;b.mimeModes=cc;b.resolveMode=eb;b.getMode=jb;b.modeExtensions=dc;b.extendMode=Q;b.copyState=mb;b.startState=aa;b.innerMode=D;b.commands=Oc;b.keyMap=Nc;b.keyName=Kf;b.isModifierKey=Hf;b.lookupKey=pc;b.normalizeKeyMap=Lg;b.StringStream=Ma;b.SharedTextMarker=Mc;b.TextMarker=Lb;b.LineWidget=Lc;b.e_preventDefault=
Ja;b.e_stopPropagation=zb;b.e_stop=H;b.addClass=da;b.contains=ca;b.rmClass=Ub;b.keyNames=Mb})(Ca);Ca.version="5.34.1";return Ca});(function(s){"object"==typeof exports&&"object"==typeof module?s(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],s):s(CodeMirror)})(function(s){function I(s){var w={};s=s.split(" ");for(var x=0;x<s.length;++x)w[s[x]]=!0;return w}s.defineMode("glsl",function(s,ca){function Z(e,l){var a=e.next();if(K[a]){var d=K[a](e,l);if(!1!==d)return d}if('"'==a||"'"==a)return l.tokenize=da(a),l.tokenize(e,l);if(/[\[\]{}\(\),;\:\.]/.test(a))return q=a,"bracket";
if(/\d/.test(a))return e.eatWhile(/[\w\.]/),"number";if("/"==a){if(e.eat("*"))return l.tokenize=pa,pa(e,l);if(e.eat("/"))return e.skipToEnd(),"comment"}if("#"==a)return e.eatWhile(/[\S]+/),e.eatWhile(/[\s]+/),e.eatWhile(/[\S]+/),e.eatWhile(/[\s]+/),"comment";if(y.test(a))return e.eatWhile(y),"operator";e.eatWhile(/[\w\$_]/);a=e.current();return W.propertyIsEnumerable(a)?(P.propertyIsEnumerable(a)&&(q="newstatement"),"keyword"):U.propertyIsEnumerable(a)?"builtin":F.propertyIsEnumerable(a)?"atom":"word"}
function da(e){return function(l,a){for(var d=!1,q,y=!1;null!=(q=l.next());){if(q==e&&!d){y=!0;break}d=!d&&"\\"==q}if(y||!d&&!S)a.tokenize=Z;return"string"}}function pa(e,l){for(var a=!1,d;d=e.next();){if("/"==d&&a){l.tokenize=Z;break}a="*"==d}return"comment"}function fa(e,l,a,d,q){this.indented=e;this.column=l;this.type=a;this.align=d;this.prev=q}function l(e,l,a){return e.context=new fa(e.indented,l,a,null,e.context)}function e(e){var l=e.context.type;if(")"==l||"]"==l||"}"==l)e.indented=e.context.indented;
return e.context=e.context.prev}var J=s.indentUnit,W=ca.keywords||I(w),U=ca.builtins||I(x),P=ca.blockKeywords||I("case do else for if switch while struct"),F=ca.atoms||I("null"),K=ca.hooks||{},S=ca.multiLineStrings,y=/[+\-*&%=<>!?|\/]/,q;return{startState:function(e){return{tokenize:null,context:new fa((e||0)-J,0,"top",!1),indented:0,startOfLine:!0}},token:function(h,y){var a=y.context;h.sol()&&(null==a.align&&(a.align=!1),y.indented=h.indentation(),y.startOfLine=!0);if(h.eatSpace())return null;q=
null;var d=(y.tokenize||Z)(h,y);if("comment"==d||"meta"==d)return d;null==a.align&&(a.align=!0);if(";"!=q&&":"!=q||"statement"!=a.type)if("{"==q)l(y,h.column(),"}");else if("["==q)l(y,h.column(),"]");else if("("==q)l(y,h.column(),")");else if("}"==q){for(;"statement"==a.type;)a=e(y);for("}"==a.type&&(a=e(y));"statement"==a.type;)a=e(y)}else q==a.type?e(y):("}"==a.type||"top"==a.type||"statement"==a.type&&"newstatement"==q)&&l(y,h.column(),"statement");else e(y);y.startOfLine=!1;return d},indent:function(e,
l){if(e.tokenize!=Z&&null!=e.tokenize)return 0;var a=l&&l.charAt(0),d=e.context,q=a==d.type;return"statement"==d.type?d.indented+("{"==a?0:J):d.align?d.column+(q?0:1):d.indented+(q?0:J)},electricChars:"{}"}});var w="attribute const uniform varying break continue do for while if else in out inout float int void bool true false lowp mediump highp precision invariant discard return mat2 mat3 mat4 vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 sampler2D samplerCube struct gl_FragCoord gl_FragColor",
x="radians degrees sin cos tan asin acos atan pow exp log exp2 log2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not dFdx dFdy fwidth texture2D texture2DProj texture2DLod texture2DProjLod textureCube textureCubeLod require export";s.defineMIME("text/x-glsl",{name:"glsl",keywords:I(w),builtins:I(x),blockKeywords:I("case do else for if switch while struct"),
atoms:I("null"),hooks:{"#":function(s,w){if(!w.startOfLine)return!1;s.skipToEnd();return"meta"}}})});(function(s){"object"==typeof exports&&"object"==typeof module?s(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],s):s(CodeMirror)})(function(s){s.defineMode("javascript",function(I,w){function x(a,g,d){m=a;v=d;return g}function ba(a,g){var d=a.next();if('"'==d||"'"==d)return g.tokenize=ca(d),g.tokenize(a,g);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return x("number","number");if("."==d&&a.match(".."))return x("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return x(d);
if("="==d&&a.eat(">"))return x("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),x("number","number");if("0"==d&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),x("number","number");if("0"==d&&a.eat(/b/i))return a.eatWhile(/[01]/i),x("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),x("number","number");if("/"==d){if(a.eat("*"))return g.tokenize=Z,Z(a,g);if(a.eat("/"))return a.skipToEnd(),x("comment","comment");if(D(a,g,1)){a:for(var d=!1,e,m=!1;null!=
(e=a.next());){if(!d){if("/"==e&&!m)break a;"["==e?m=!0:m&&"]"==e&&(m=!1)}d=!d&&"\\"==e}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return x("regexp","string-2")}a.eat("=");return x("operator","operator",a.current())}if("`"==d)return g.tokenize=da,da(a,g);if("#"==d)return a.skipToEnd(),x("error","error");if(z.test(d))return">"==d&&g.lexical&&">"==g.lexical.type||(a.eat("=")?"!"!=d&&"="!=d||a.eat("="):/[<>*+\-]/.test(d)&&(a.eat(d),">"==d&&a.eat(d))),x("operator","operator",a.current());if(L.test(d)){a.eatWhile(L);
d=a.current();if("."!=g.lastType){if(M.propertyIsEnumerable(d))return e=M[d],x(e.type,e.style,d);if("async"==d&&a.match(/^(\s|\/\*.*?\*\/)*[\(\w]/,!1))return x("async","keyword",d)}return x("variable","variable",d)}}function ca(a){return function(d,e){var m=!1,h;if(X&&"@"==d.peek()&&d.match(g))return e.tokenize=ba,x("jsonld-keyword","meta");for(;null!=(h=d.next())&&(h!=a||m);)m=!m&&"\\"==h;m||(e.tokenize=ba);return x("string","string")}}function Z(a,g){for(var d=!1,e;e=a.next();){if("/"==e&&d){g.tokenize=
ba;break}d="*"==e}return x("comment","comment")}function da(a,g){for(var d=!1,e;null!=(e=a.next());){if(!d&&("`"==e||"$"==e&&a.eat("{"))){g.tokenize=ba;break}d=!d&&"\\"==e}return x("quasi","string-2",a.current())}function pa(a,g){g.fatArrowAt&&(g.fatArrowAt=null);var d=a.string.indexOf("=>",a.start);if(!(0>d)){if(T){var e=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,d));e&&(d=e.index)}for(var e=0,m=!1,d=d-1;0<=d;--d){var h=a.string.charAt(d),v=r.indexOf(h);if(0<=v&&3>v){if(!e){++d;
break}if(0==--e){"("==h&&(m=!0);break}}else if(3<=v&&6>v)++e;else if(L.test(h))m=!0;else{if(/["'\/]/.test(h))return;if(m&&!e){++d;break}}}m&&!e&&(g.fatArrowAt=d)}}function fa(a,g,d,e,m,h){this.indented=a;this.column=g;this.type=d;this.prev=m;this.info=h;null!=e&&(this.align=e)}function l(){for(var a=arguments.length-1;0<=a;a--)C.cc.push(arguments[a])}function e(){l.apply(null,arguments);return!0}function J(a){function g(d){for(;d;d=d.next)if(d.name==a)return!0;return!1}var d=C.state;C.marked="def";
d.context?g(d.localVars)||(d.localVars={name:a,next:d.localVars}):!g(d.globalVars)&&w.globalVars&&(d.globalVars={name:a,next:d.globalVars})}function W(a){return"public"==a||"private"==a||"protected"==a||"abstract"==a||"readonly"==a}function U(){C.state.context={prev:C.state.context,vars:C.state.localVars};C.state.localVars=Fd}function P(){C.state.localVars=C.state.context.vars;C.state.context=C.state.context.prev}function F(a,g){var d=function(){var d=C.state,e=d.indented;if("stat"==d.lexical.type)e=
d.lexical.indented;else for(var m=d.lexical;m&&")"==m.type&&m.align;m=m.prev)e=m.indented;d.lexical=new fa(e,C.stream.column(),a,null,d.lexical,g)};d.lex=!0;return d}function K(){var a=C.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function S(a){function g(d){return d==a?e():";"==a?l():e(g)}return g}function y(a,g){return"var"==a?e(F("vardef",g.length),Aa,S(";"),K):"keyword a"==a?e(F("form"),$,y,K):"keyword b"==a?e(F("form"),y,K):"keyword d"==
a?C.stream.match(/^\s*$/,!1)?e():e(F("stat"),d,S(";"),K):"debugger"==a?e(S(";")):"{"==a?e(F("}"),A,K):";"==a?e():"if"==a?("else"==C.state.lexical.info&&C.state.cc[C.state.cc.length-1]==K&&C.state.cc.pop()(),e(F("form"),$,y,K,Ia)):"function"==a?e(va):"for"==a?e(F("form"),Ba,y,K):"class"==a||T&&"interface"==g?(C.marked="keyword",e(F("form"),yb,K)):"variable"==a?T&&"declare"==g?(C.marked="keyword",e(y)):T&&("module"==g||"enum"==g||"type"==g)&&C.stream.match(/^\s*\w/,!1)?(C.marked="keyword","enum"==g?
e(Q):"type"==g?e(ma,S("operator"),ma,S(";")):e(F("form"),Ha,S("{"),F("}"),A,K,K)):T&&"namespace"==g?(C.marked="keyword",e(F("form"),q,A,K)):e(F("stat"),ya):"switch"==a?e(F("form"),$,S("{"),F("}","switch"),A,K,K):"case"==a?e(q,S(":")):"default"==a?e(S(":")):"catch"==a?e(F("form"),U,S("("),qa,S(")"),y,K,P):"export"==a?e(F("stat"),zb,K):"import"==a?e(F("stat"),H,K):"async"==a?e(y):"@"==g?e(q,y):l(F("stat"),q,S(";"),K)}function q(g,d){return a(g,d,!1)}function h(g,d){return a(g,d,!0)}function $(a){return"("!=
a?l():e(F(")"),q,S(")"),K)}function a(a,g,m){if(C.state.fatArrowAt==C.stream.start){var v=m?ha:ia;if("("==a)return e(U,F(")"),ja(qa,")"),K,S("=>"),v,P);if("variable"==a)return l(U,Ha,S("=>"),v,P)}v=m?db:u;return ed.hasOwnProperty(a)?e(v):"function"==a?e(va,v):"class"==a||T&&"interface"==g?(C.marked="keyword",e(F("form"),na,K)):"keyword c"==a||"async"==a?e(m?h:q):"("==a?e(F(")"),d,S(")"),K,v):"operator"==a||"spread"==a?e(m?h:q):"["==a?e(F("]"),jb,K,v):"{"==a?ka(G,"}",null,v):"quasi"==a?l(E,v):"new"==
a?e(ea(m)):e()}function d(a){return a.match(/[;\}\)\],]/)?l():l(q)}function u(a,g){return","==a?e(q):db(a,g,!1)}function db(a,g,m){var v=!1==m?u:db,r=!1==m?q:h;if("=>"==a)return e(U,m?ha:ia,P);if("operator"==a)return/\+\+|--/.test(g)||T&&"!"==g?e(v):T&&"<"==g&&C.stream.match(/^([^>]|<.*?>)*>\s*\(/,!1)?e(F(">"),ja(ma,">"),K,v):"?"==g?e(q,S(":"),r):e(r);if("quasi"==a)return l(E,v);if(";"!=a){if("("==a)return ka(h,")","call",v);if("."==a)return e(B,v);if("["==a)return e(F("]"),d,S("]"),K,v);if(T&&"as"==
g)return C.marked="keyword",e(ma,v);if("regexp"==a)return C.state.lastType=C.marked="operator",C.stream.backUp(C.stream.pos-C.stream.start-1),e(r)}}function E(a,g){return"quasi"!=a?l():"${"!=g.slice(g.length-2)?e(E):e(q,Oa)}function Oa(a){if("}"==a)return C.marked="string-2",C.state.tokenize=da,e(E)}function ia(a){pa(C.stream,C.state);return l("{"==a?y:q)}function ha(a){pa(C.stream,C.state);return l("{"==a?y:h)}function ea(a){return function(g){return"."==g?e(a?ta:Za):"variable"==g&&T?e(qb,a?db:u):
l(a?h:q)}}function Za(a,g){if("target"==g)return C.marked="keyword",e(u)}function ta(a,g){if("target"==g)return C.marked="keyword",e(db)}function ya(a){return":"==a?e(K,y):l(u,S(";"),K)}function B(a){if("variable"==a)return C.marked="property",e()}function G(a,g){if("async"==a)return C.marked="property",e(G);if("variable"==a||"keyword"==C.style){C.marked="property";if("get"==g||"set"==g)return e(za);var d;T&&C.state.fatArrowAt==C.stream.start&&(d=C.stream.match(/^\s*:\s*/,!1))&&(C.state.fatArrowAt=
C.stream.pos+d[0].length);return e(O)}if("number"==a||"string"==a)return C.marked=X?"property":C.style+" property",e(O);if("jsonld-keyword"==a)return e(O);if(T&&W(g))return C.marked="keyword",e(G);if("["==a)return e(q,ga,S("]"),O);if("spread"==a)return e(h,O);if("*"==g)return C.marked="keyword",e(G);if(":"==a)return l(O)}function za(a){if("variable"!=a)return l(O);C.marked="property";return e(va)}function O(a){if(":"==a)return e(h);if("("==a)return l(va)}function ja(a,g,d){function m(h,v){if(d?-1<
d.indexOf(h):","==h){var r=C.state.lexical;"call"==r.info&&(r.pos=(r.pos||0)+1);return e(function(d,e){return d==g||e==g?l():l(a)},m)}return h==g||v==g?e():e(S(g))}return function(d,h){return d==g||h==g?e():l(a,m)}}function ka(a,g,d){for(var m=3;m<arguments.length;m++)C.cc.push(arguments[m]);return e(F(g,d),ja(a,g),K)}function A(a){return"}"==a?e():l(y,A)}function ga(a,g){if(T){if(":"==a)return e(ma);if("?"==g)return e(ga)}}function Ka(a){if(T&&":"==a)return C.stream.match(/^\s*\w+\s+is\b/,!1)?e(q,
$a,ma):e(ma)}function $a(a,g){if("is"==g)return C.marked="keyword",e()}function ma(a,g){if("variable"==a||"void"==g){if("keyof"==g)return C.marked="keyword",e(ma);C.marked="type";return e(Ta)}if("string"==a||"number"==a||"atom"==a)return e(Ta);if("["==a)return e(F("]"),ja(ma,"]",","),K,Ta);if("{"==a)return e(F("}"),ja(ab,"}",",;"),K,Ta);if("("==a)return e(ja(hb,")"),Ea)}function Ea(a){if("=>"==a)return e(ma)}function ab(a,g){if("variable"==a||"keyword"==C.style)return C.marked="property",e(ab);if("?"==
g)return e(ab);if(":"==a)return e(ma);if("["==a)return e(q,ga,S("]"),ab)}function hb(a){if("variable"==a)return e(hb);if(":"==a)return e(ma)}function Ta(a,g){if("<"==g)return e(F(">"),ja(ma,">"),K,Ta);if("|"==g||"."==a||"&"==g)return e(ma);if("["==a)return e(S("]"),Ta);if("extends"==g||"implements"==g)return C.marked="keyword",e(ma)}function qb(a,g){if("<"==g)return e(F(">"),ja(ma,">"),K,Ta)}function Ga(){return l(ma,rb)}function rb(a,g){if("="==g)return e(ma)}function Aa(a,g){return"enum"==g?(C.marked=
"keyword",e(Q)):l(Ha,ga,ra,sb)}function Ha(a,g){if(T&&W(g))return C.marked="keyword",e(Ha);if("variable"==a)return J(g),e();if("spread"==a)return e(Ha);if("["==a)return ka(Ha,"]");if("{"==a)return ka(Ua,"}")}function Ua(a,g){if("variable"==a&&!C.stream.match(/^\s*:/,!1))return J(g),e(ra);"variable"==a&&(C.marked="property");return"spread"==a?e(Ha):"}"==a?l():e(S(":"),Ha,ra)}function ra(a,g){if("="==g)return e(h)}function sb(a){if(","==a)return e(Aa)}function Ia(a,g){if("keyword b"==a&&"else"==g)return e(F("form",
"else"),y,K)}function Ba(a){if("("==a)return e(F(")"),ua,S(")"),K)}function ua(a){return"var"==a?e(Aa,S(";"),sa):";"==a?e(sa):"variable"==a?e(Fa):l(q,S(";"),sa)}function Fa(a,g){return"in"==g||"of"==g?(C.marked="keyword",e(q)):e(u,sa)}function sa(a,g){return";"==a?e(ib):"in"==g||"of"==g?(C.marked="keyword",e(q)):l(q,S(";"),ib)}function ib(a){")"!=a&&e(q)}function va(a,g){if("*"==g)return C.marked="keyword",e(va);if("variable"==a)return J(g),e(va);if("("==a)return e(U,F(")"),ja(qa,")"),K,Ka,y,P);if(T&&
"<"==g)return e(F(">"),ja(Ga,">"),K,va)}function qa(a,g){"@"==g&&e(q,qa);return"spread"==a?e(qa):T&&W(g)?(C.marked="keyword",e(qa)):l(Ha,ga,ra)}function na(a,g){return"variable"==a?yb(a,g):La(a,g)}function yb(a,g){if("variable"==a)return J(g),e(La)}function La(a,g){if("<"==g)return e(F(">"),ja(Ga,">"),K,La);if("extends"==g||"implements"==g||T&&","==a)return"implements"==g&&(C.marked="keyword"),e(T?ma:q,La);if("{"==a)return e(F("}"),Va,K)}function Va(a,g){if("async"==a||"variable"==a&&("static"==g||
"get"==g||"set"==g||T&&W(g))&&C.stream.match(/^\s+[\w$\xa1-\uffff]/,!1))return C.marked="keyword",e(Va);if("variable"==a||"keyword"==C.style)return C.marked="property",e(T?Ja:va,Va);if("["==a)return e(q,ga,S("]"),T?Ja:va,Va);if("*"==g)return C.marked="keyword",e(Va);if(";"==a)return e(Va);if("}"==a)return e();if("@"==g)return e(q,Va)}function Ja(a,g){return"?"==g?e(Ja):":"==a?e(ma,ra):"="==g?e(h):l(va)}function zb(a,g){return"*"==g?(C.marked="keyword",e(eb,S(";"))):"default"==g?(C.marked="keyword",
e(q,S(";"))):"{"==a?e(ja(Db,"}"),eb,S(";")):l(y)}function Db(a,g){if("as"==g)return C.marked="keyword",e(S("variable"));if("variable"==a)return l(h,Db)}function H(a){return"string"==a?e():l(Pa,Nb,eb)}function Pa(a,g){if("{"==a)return ka(Pa,"}");"variable"==a&&J(g);"*"==g&&(C.marked="keyword");return e(N)}function Nb(a){if(","==a)return e(Pa,Nb)}function N(a,g){if("as"==g)return C.marked="keyword",e(Pa)}function eb(a,g){if("from"==g)return C.marked="keyword",e(q)}function jb(a){return"]"==a?e():l(ja(h,
"]"))}function Q(){return l(F("form"),Ha,S("{"),F("}"),ja(mb,"}"),K,K)}function mb(){return l(Ha,ra)}function D(a,g,d){return g.tokenize==ba&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(g.lastType)||"quasi"==g.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(d||0)))}var aa=I.indentUnit,p=w.statementIndent,X=w.jsonld,V=w.json||X,T=w.typescript,L=w.wordCharacters||/[\w$\xa1-\uffff]/,M=function(){function a(g){return{type:g,style:"keyword"}}var g=a("keyword a"),
d=a("keyword b"),e=a("keyword c"),m=a("keyword d"),h=a("operator"),v={type:"atom",style:"atom"};return{"if":a("if"),"while":g,"with":g,"else":d,"do":d,"try":d,"finally":d,"return":m,"break":m,"continue":m,"new":a("new"),"delete":e,"void":e,"throw":e,"debugger":a("debugger"),"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":h,"typeof":h,"instanceof":h,"true":v,"false":v,"null":v,
undefined:v,NaN:v,Infinity:v,"this":a("this"),"class":a("class"),"super":a("atom"),yield:e,"export":a("export"),"import":a("import"),"extends":e,await:e}}(),z=/[+\-*&%=<>!?|~^@]/,g=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,m,v,r="([{}])",ed={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},C={state:null,column:null,marked:null,cc:null},Fd={name:"this",next:{name:"arguments"}};K.lex=!0;return{startState:function(a){a={tokenize:ba,
lastType:"sof",cc:[],lexical:new fa((a||0)-aa,0,"block",!1),localVars:w.localVars,context:w.localVars&&{vars:w.localVars},indented:a||0};w.globalVars&&"object"==typeof w.globalVars&&(a.globalVars=w.globalVars);return a},token:function(a,g){a.sol()&&(g.lexical.hasOwnProperty("align")||(g.lexical.align=!1),g.indented=a.indentation(),pa(a,g));if(g.tokenize!=Z&&a.eatSpace())return null;var d=g.tokenize(a,g);if("comment"==m)return d;g.lastType="operator"!=m||"++"!=v&&"--"!=v?m:"incdec";a:{var e=m,h=v,
r=g.cc;C.state=g;C.stream=a;C.marked=null;C.cc=r;C.style=d;g.lexical.hasOwnProperty("align")||(g.lexical.align=!0);for(;;)if((r.length?r.pop():V?q:y)(e,h)){for(;r.length&&r[r.length-1].lex;)r.pop()();if(C.marked){d=C.marked;break a}if(e="variable"==e)b:{for(e=g.localVars;e;e=e.next)if(e.name==h){e=!0;break b}for(r=g.context;r;r=r.prev)for(e=r.vars;e;e=e.next)if(e.name==h){e=!0;break b}e=void 0}if(e){d="variable-2";break a}break a}d=void 0}return d},indent:function(a,g){if(a.tokenize==Z)return s.Pass;
if(a.tokenize!=ba)return 0;var d=g&&g.charAt(0),e=a.lexical,m;if(!/^\s*else\b/.test(g))for(var h=a.cc.length-1;0<=h;--h){var v=a.cc[h];if(v==K)e=e.prev;else if(v!=Ia)break}for(;!("stat"!=e.type&&"form"!=e.type||"}"!=d&&(!(m=a.cc[a.cc.length-1])||m!=u&&m!=db||/^[,\.=+\-*:?[\(]/.test(g)));)e=e.prev;p&&")"==e.type&&"stat"==e.prev.type&&(e=e.prev);m=e.type;h=d==m;return"vardef"==m?e.indented+("operator"==a.lastType||","==a.lastType?e.info+1:0):"form"==m&&"{"==d?e.indented:"form"==m?e.indented+aa:"stat"==
m?(d=e.indented,e="operator"==a.lastType||","==a.lastType||z.test(g.charAt(0))||/[,.]/.test(g.charAt(0)),d+(e?p||aa:0)):"switch"!=e.info||h||!1==w.doubleIndentSwitch?e.align?e.column+(h?0:1):e.indented+(h?0:aa):e.indented+(/^(?:case|default)\b/.test(g)?aa:2*aa)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:V?null:"/*",blockCommentEnd:V?null:"*/",blockCommentContinue:V?null:" * ",lineComment:V?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:V?"json":"javascript",
jsonldMode:X,jsonMode:V,expressionAllowed:D,skipExpression:function(a){var g=a.cc[a.cc.length-1];g!=q&&g!=h||a.cc.pop()}}});s.registerHelper("wordChars","javascript",/[\w$]/);s.defineMIME("text/javascript","javascript");s.defineMIME("text/ecmascript","javascript");s.defineMIME("application/javascript","javascript");s.defineMIME("application/x-javascript","javascript");s.defineMIME("application/ecmascript","javascript");s.defineMIME("application/json",{name:"javascript",json:!0});s.defineMIME("application/x-json",
{name:"javascript",json:!0});s.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});s.defineMIME("text/typescript",{name:"javascript",typescript:!0});s.defineMIME("application/typescript",{name:"javascript",typescript:!0})});(function(s){"object"==typeof exports&&"object"==typeof module?s(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],s):s(CodeMirror)})(function(s){function I(s){for(var w=0;w<s.state.activeLines.length;w++)s.removeLineClass(s.state.activeLines[w],"wrap",ca),s.removeLineClass(s.state.activeLines[w],"background",Z),s.removeLineClass(s.state.activeLines[w],"gutter",da)}function w(s,w){if(s.length!=w.length)return!1;for(var l=0;l<s.length;l++)if(s[l]!=
w[l])return!1;return!0}function x(s,x){for(var l=[],e=0;e<x.length;e++){var J=x[e],W=s.getOption("styleActiveLine");if("object"==typeof W&&W.nonEmpty?J.anchor.line==J.head.line:J.empty())J=s.getLineHandleVisualStart(J.head.line),l[l.length-1]!=J&&l.push(J)}w(s.state.activeLines,l)||s.operation(function(){I(s);for(var e=0;e<l.length;e++)s.addLineClass(l[e],"wrap",ca),s.addLineClass(l[e],"background",Z),s.addLineClass(l[e],"gutter",da);s.state.activeLines=l})}function ba(s,w){x(s,w.ranges)}var ca="CodeMirror-activeline",
Z="CodeMirror-activeline-background",da="CodeMirror-activeline-gutter";s.defineOption("styleActiveLine",!1,function(w,fa,l){l=l==s.Init?!1:l;fa!=l&&(l&&(w.off("beforeSelectionChange",ba),I(w),delete w.state.activeLines),fa&&(w.state.activeLines=[],x(w,w.listSelections()),w.on("beforeSelectionChange",ba)))})});(function(s){"object"==typeof exports&&"object"==typeof module?s(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],s):s(CodeMirror)})(function(s){function I(s,x,l){var e=s.getLineHandle(x.line),J=x.ch-1,W=l&&l.afterCursor;null==W&&(W=/(^| )cm-fat-cursor($| )/.test(s.getWrapperElement().className));e=!W&&0<=J&&da[e.text.charAt(J)]||da[e.text.charAt(++J)];if(!e)return null;W=">"==e.charAt(1)?1:-1;if(l&&l.strict&&0<W!=(J==x.ch))return null;var U=s.getTokenTypeAt(Z(x.line,
J+1));s=w(s,Z(x.line,J+(0<W?1:0)),W,U||null,l);return null==s?null:{from:Z(x.line,J),to:s&&s.pos,match:s&&s.ch==e.charAt(0),forward:0<W}}function w(s,w,l,e,x){var W=x&&x.maxScanLineLength||1E4,U=x&&x.maxScanLines||1E3,I=[];x=x&&x.bracketRegex?x.bracketRegex:/[(){}[\]]/;for(var U=0<l?Math.min(w.line+U,s.lastLine()+1):Math.max(s.firstLine()-1,w.line-U),F=w.line;F!=U;F+=l){var K=s.getLine(F);if(K){var S=0<l?0:K.length-1,y=0<l?K.length:-1;if(!(K.length>W))for(F==w.line&&(S=w.ch-(0>l?1:0));S!=y;S+=l){var q=
K.charAt(S);if(x.test(q)&&(void 0===e||s.getTokenTypeAt(Z(F,S+1))==e))if(">"==da[q].charAt(1)==0<l)I.push(q);else if(I.length)I.pop();else return{pos:Z(F,S),ch:q}}}}return F-l==(0<l?s.lastLine():s.firstLine())?!1:null}function x(s,w,l){for(var e=s.state.matchBrackets.maxHighlightLineLength||1E3,x=[],W=s.listSelections(),U=0;U<W.length;U++){var P=W[U].empty()&&I(s,W[U].head,l);if(P&&s.getLine(P.from.line).length<=e){var F=P.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";x.push(s.markText(P.from,
Z(P.from.line,P.from.ch+1),{className:F}));P.to&&s.getLine(P.to.line).length<=e&&x.push(s.markText(P.to,Z(P.to.line,P.to.ch+1),{className:F}))}}if(x.length)if(ca&&s.state.focused&&s.focus(),l=function(){s.operation(function(){for(var e=0;e<x.length;e++)x[e].clear()})},w)setTimeout(l,800);else return l}function ba(s){s.operation(function(){s.state.matchBrackets.currentlyHighlighted&&(s.state.matchBrackets.currentlyHighlighted(),s.state.matchBrackets.currentlyHighlighted=null);s.state.matchBrackets.currentlyHighlighted=
x(s,!1,s.state.matchBrackets)})}var ca=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),Z=s.Pos,da={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};s.defineOption("matchBrackets",!1,function(w,x,l){l&&l!=s.Init&&(w.off("cursorActivity",ba),w.state.matchBrackets&&w.state.matchBrackets.currentlyHighlighted&&(w.state.matchBrackets.currentlyHighlighted(),w.state.matchBrackets.currentlyHighlighted=null));x&&(w.state.matchBrackets="object"==typeof x?x:{},
w.on("cursorActivity",ba))});s.defineExtension("matchBrackets",function(){x(this,!0)});s.defineExtension("findMatchingBracket",function(s,w,l){if(l||"boolean"==typeof w)l?(l.strict=w,w=l):w=w?{strict:!0}:null;return I(this,s,w)});s.defineExtension("scanForBracket",function(s,x,l,e){return w(this,s,x,l,e)})});(function(s){"object"==typeof exports&&"object"==typeof module?s(require("../../lib/codemirror"),require("./matchesonscrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./matchesonscrollbar"],s):s(CodeMirror)})(function(s){function I(l){this.options={};for(var e in fa)this.options[e]=(l&&l.hasOwnProperty(e)?l:fa)[e];this.matchesonscroll=this.overlay=this.timeout=null;this.active=!1}function w(l){var e=l.state.matchHighlighter;(e.active||l.hasFocus())&&ba(l,e)}function x(l){var e=
l.state.matchHighlighter;e.active||(e.active=!0,ba(l,e))}function ba(l,e){clearTimeout(e.timeout);e.timeout=setTimeout(function(){da(l)},e.options.delay)}function ca(l,e,s,w){var x=l.state.matchHighlighter;l.addOverlay(x.overlay=pa(e,s,w));x.options.annotateScrollbar&&l.showMatchesOnScrollbar&&(x.matchesonscroll=l.showMatchesOnScrollbar(s?RegExp("\\b"+e+"\\b"):e,!1,{className:"CodeMirror-selection-highlight-scrollbar"}))}function Z(l){var e=l.state.matchHighlighter;e.overlay&&(l.removeOverlay(e.overlay),
e.overlay=null,e.matchesonscroll&&(e.matchesonscroll.clear(),e.matchesonscroll=null))}function da(l){l.operation(function(){var e=l.state.matchHighlighter;Z(l);if(!l.somethingSelected()&&e.options.showToken){for(var s=!0===e.options.showToken?/[\w$]/:e.options.showToken,w=l.getCursor(),x=l.getLine(w.line),I=w=w.ch;w&&s.test(x.charAt(w-1));)--w;for(;I<x.length&&s.test(x.charAt(I));)++I;w<I&&ca(l,x.slice(w,I),s,e.options.style)}else if(s=l.getCursor("from"),x=l.getCursor("to"),s.line==x.line){if(w=
e.options.wordsOnly){a:if(null!==l.getRange(s,x).match(/^\w+$/)){if(0<s.ch&&(w={line:s.line,ch:s.ch-1},w=l.getRange(w,s),null===w.match(/\W/))){w=!1;break a}if(x.ch<l.getLine(s.line).length&&(w={line:x.line,ch:x.ch+1},w=l.getRange(x,w),null===w.match(/\W/))){w=!1;break a}w=!0}else w=!1;w=!w}w||(s=l.getRange(s,x),e.options.trim&&(s=s.replace(/^\s+|\s+$/g,"")),s.length>=e.options.minChars&&ca(l,s,!1,e.options.style))}})}function pa(l,e,s){return{token:function(w){var x;if(x=w.match(l))(x=!e)||(x=(!w.start||
!e.test(w.string.charAt(w.start-1)))&&(w.pos==w.string.length||!e.test(w.string.charAt(w.pos))));if(x)return s;w.next();w.skipTo(l.charAt(0))||w.skipToEnd()}}}var fa={style:"matchhighlight",minChars:2,delay:100,wordsOnly:!1,annotateScrollbar:!1,showToken:!1,trim:!0};s.defineOption("highlightSelectionMatches",!1,function(l,e,J){J&&J!=s.Init&&(Z(l),clearTimeout(l.state.matchHighlighter.timeout),l.state.matchHighlighter=null,l.off("cursorActivity",w),l.off("focus",x));if(e){e=l.state.matchHighlighter=
new I(e);if(l.hasFocus())e.active=!0,da(l);else l.on("focus",x);l.on("cursorActivity",w)}})});(function(s,I){"function"===typeof define&&define.amd?define(["exports"],I):"undefined"!==typeof exports?I(exports):I(s.esprima={})})(this,function(s){function I(a,d){if(!a)throw Error("ASSERT: "+d);}function w(a){return 48<=a&&57>=a}function x(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function ba(a){return 0<="01234567".indexOf(a)}function ca(a){return 10===a||13===a||8232===a||8233===a}function Z(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&mb.NonAsciiIdentifierStart.test(String.fromCharCode(a))}
function da(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&mb.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function pa(a){switch(a){case "implements":case "interface":case "package":case "private":case "protected":case "public":case "static":case "yield":case "let":return!0;default:return!1}}function fa(a){return"eval"===a||"arguments"===a}function l(a){if(aa&&pa(a))return!0;switch(a.length){case 2:return"if"===a||"in"===a||"do"===a;case 3:return"var"===
a||"for"===a||"new"===a||"try"===a||"let"===a;case 4:return"this"===a||"else"===a||"case"===a||"void"===a||"with"===a||"enum"===a;case 5:return"while"===a||"break"===a||"catch"===a||"throw"===a||"const"===a||"yield"===a||"class"===a||"super"===a;case 6:return"return"===a||"typeof"===a||"delete"===a||"switch"===a||"export"===a||"import"===a;case 7:return"default"===a||"finally"===a||"extends"===a;case 8:return"function"===a||"continue"===a||"debugger"===a;case 10:return"instanceof"===a;default:return!1}}
function e(a,d,e,h,l){I("number"===typeof e,"Comment must have valid position");M.lastCommentStart>=e||(M.lastCommentStart=e,a={type:a,value:d},z.range&&(a.range=[e,h]),z.loc&&(a.loc=l),z.comments.push(a),z.attachComment&&(z.leadingComments.push(a),z.trailingComments.push(a)))}function J(a){var d,h,r;d=p-a;for(h={start:{line:X,column:p-V-a}};p<T;)if(r=D.charCodeAt(p),++p,ca(r)){z.comments&&(a=D.slice(d+a,p-1),h.end={line:X,column:p-V-1},e("Line",a,d,p-1,h));13===r&&10===D.charCodeAt(p)&&++p;++X;V=
p;return}z.comments&&(a=D.slice(d+a,p),h.end={line:X,column:p-V},e("Line",a,d,p,h))}function W(){var a,d;for(d=0===p;p<T;)if(a=D.charCodeAt(p),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++p;else if(ca(a))++p,13===a&&10===D.charCodeAt(p)&&++p,++X,V=p,d=!0;else if(47===a)if(a=D.charCodeAt(p+1),47===a)++p,++p,J(2),d=!0;else if(42===a){++p;++p;a:{var h=a=void 0,r=void 0,r=void 0;z.comments&&(a=
p-2,h={start:{line:X,column:p-V-2}});for(;p<T;)if(r=D.charCodeAt(p),ca(r))13===r&&10===D.charCodeAt(p+1)&&++p,++X,++p,V=p,p>=T&&G();else{if(42===r&&47===D.charCodeAt(p+1)){++p;++p;z.comments&&(r=D.slice(a+2,p-2),h.end={line:X,column:p-V},e("Block",r,a,p,h));break a}++p}G()}}else break;else if(d&&45===a)if(45===D.charCodeAt(p+1)&&62===D.charCodeAt(p+2))p+=3,J(3);else break;else if(60===a)if("!--"===D.slice(p+1,p+4))++p,++p,++p,++p,J(4);else break;else break}function U(a){var d,e,h=0;d="u"===a?4:2;
for(a=0;a<d;++a)if(p<T&&x(D[p]))e=D[p++],h=16*h+"0123456789abcdef".indexOf(e.toLowerCase());else return"";return String.fromCharCode(h)}function P(){var a,d;a=D.charCodeAt(p++);d=String.fromCharCode(a);92===a&&(117!==D.charCodeAt(p)&&G(),++p,(a=U("u"))&&"\\"!==a&&Z(a.charCodeAt(0))||G(),d=a);for(;p<T;){a=D.charCodeAt(p);if(!da(a))break;++p;d+=String.fromCharCode(a);92===a&&(d=d.substr(0,d.length-1),117!==D.charCodeAt(p)&&G(),++p,(a=U("u"))&&"\\"!==a&&da(a.charCodeAt(0))||G(),d+=a)}return d}function F(){var a=
p,d=D.charCodeAt(p),e,h=D[p];switch(d){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++p,z.tokenize&&(40===d?z.openParenToken=z.tokens.length:123===d&&(z.openCurlyToken=z.tokens.length)),{type:H.Punctuator,value:String.fromCharCode(d),lineNumber:X,lineStart:V,start:a,end:p};default:if(e=D.charCodeAt(p+1),61===e)switch(d){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return p+=2,{type:H.Punctuator,value:String.fromCharCode(d)+
String.fromCharCode(e),lineNumber:X,lineStart:V,start:a,end:p};case 33:case 61:return p+=2,61===D.charCodeAt(p)&&++p,{type:H.Punctuator,value:D.slice(a,p),lineNumber:X,lineStart:V,start:a,end:p}}}d=D.substr(p,4);if(">>>="===d)return p+=4,{type:H.Punctuator,value:d,lineNumber:X,lineStart:V,start:a,end:p};d=d.substr(0,3);if(">>>"===d||"<<="===d||">>="===d)return p+=3,{type:H.Punctuator,value:d,lineNumber:X,lineStart:V,start:a,end:p};d=d.substr(0,2);if(h===d[1]&&0<="+-<>&|".indexOf(h)||"=>"===d)return p+=
2,{type:H.Punctuator,value:d,lineNumber:X,lineStart:V,start:a,end:p};if(0<="<>=!+-*%&|^/".indexOf(h))return++p,{type:H.Punctuator,value:h,lineNumber:X,lineStart:V,start:a,end:p};G()}function K(){var a,d,e;e=D[p];I(w(e.charCodeAt(0))||"."===e,"Numeric literal must start with a decimal digit or a decimal point");d=p;a="";if("."!==e){a=D[p++];e=D[p];if("0"===a){if("x"===e||"X"===e){++p;for(a="";p<T&&x(D[p]);)a+=D[p++];0===a.length&&G();Z(D.charCodeAt(p))&&G();return{type:H.NumericLiteral,value:parseInt("0x"+
a,16),lineNumber:X,lineStart:V,start:d,end:p}}if("b"===e||"B"===e){++p;for(e="";p<T;){a=D[p];if("0"!==a&&"1"!==a)break;e+=D[p++]}0===e.length&&G();p<T&&(a=D.charCodeAt(p),(Z(a)||w(a))&&G());return{type:H.NumericLiteral,value:parseInt(e,2),lineNumber:X,lineStart:V,start:d,end:p}}var h;if(!(h="o"===e||"O"===e)&&(h=ba(e)))a:{var l;for(h=p+1;h<T;++h){l=D[h];if("8"===l||"9"===l){h=!1;break a}if(!ba(l))break}h=!0}if(h){ba(e)?(e=!0,a="0"+D[p++]):(e=!1,++p,a="");for(;p<T&&ba(D[p]);)a+=D[p++];e||0!==a.length||
G();(Z(D.charCodeAt(p))||w(D.charCodeAt(p)))&&G();return{type:H.NumericLiteral,value:parseInt(a,8),octal:e,lineNumber:X,lineStart:V,start:d,end:p}}}for(;w(D.charCodeAt(p));)a+=D[p++];e=D[p]}if("."===e){for(a+=D[p++];w(D.charCodeAt(p));)a+=D[p++];e=D[p]}if("e"===e||"E"===e){a+=D[p++];e=D[p];if("+"===e||"-"===e)a+=D[p++];if(w(D.charCodeAt(p)))for(;w(D.charCodeAt(p));)a+=D[p++];else G()}Z(D.charCodeAt(p))&&G();return{type:H.NumericLiteral,value:parseFloat(a),lineNumber:X,lineStart:V,start:d,end:p}}function S(a,
d){var e=a;0<=d.indexOf("u")&&(e=e.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(a,g){if(1114111>=parseInt(g,16))return"x";ta(Q.InvalidRegExp)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{return RegExp(a,d)}catch(h){return null}}function y(){var a,d,e,h,l,q;L=null;W();l=p;e=D[p];I("/"===e,"Regular expression literal must start with a slash");h=D[p++];for(a=d=!1;p<T;)if(e=D[p++],h+=e,"\\"===e)e=D[p++],ca(e.charCodeAt(0))&&ta(Q.UnterminatedRegExp),h+=e;else if(ca(e.charCodeAt(0)))ta(Q.UnterminatedRegExp);
else if(d)"]"===e&&(d=!1);else if("/"===e){a=!0;break}else"["===e&&(d=!0);a||ta(Q.UnterminatedRegExp);e=h.substr(1,h.length-2);var s;for(q=d="";p<T;){a=D[p];if(!da(a.charCodeAt(0)))break;++p;if("\\"===a&&p<T){a=D[p];if("u"===a)if(++p,s=p,a=U("u"))for(q+=a,d+="\\u";s<p;++s)d+=D[s];else p=s,q+="u",d+="\\u";else d+="\\";za()}else q+=a,d+=a}a=q;q=S(e,a);return z.tokenize?{type:H.RegularExpression,value:q,regex:{pattern:e,flags:a},lineNumber:X,lineStart:V,start:l,end:p}:{literal:h+d,value:q,regex:{pattern:e,
flags:a},start:l,end:p}}function q(){var a,d,e,h;W();a=p;d={start:{line:X,column:p-V}};e=y();d.end={line:X,column:p-V};z.tokenize||(0<z.tokens.length&&(h=z.tokens[z.tokens.length-1],h.range[0]===a&&"Punctuator"===h.type&&("/"!==h.value&&"/="!==h.value||z.tokens.pop())),z.tokens.push({type:"RegularExpression",value:e.literal,regex:e.regex,range:[a,p],loc:d}));return e}function h(){var a;a=z.tokens[z.tokens.length-1];if(!a)return q();if("Punctuator"===a.type){if("]"===a.value)return F();if(")"===a.value)return a=
z.tokens[z.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value&&"while"!==a.value&&"for"!==a.value&&"with"!==a.value?F():q();if("}"===a.value){if(z.tokens[z.openCurlyToken-3]&&"Keyword"===z.tokens[z.openCurlyToken-3].type){if(a=z.tokens[z.openCurlyToken-4],!a)return F()}else if(z.tokens[z.openCurlyToken-4]&&"Keyword"===z.tokens[z.openCurlyToken-4].type){if(a=z.tokens[z.openCurlyToken-5],!a)return q()}else return F();if(0<=Nb.indexOf(a.value))return F()}return q()}return"Keyword"===a.type&&"this"!==
a.value?q():F()}function $(){var a;W();if(p>=T)return{type:H.EOF,lineNumber:X,lineStart:V,start:p,end:p};a=D.charCodeAt(p);if(Z(a)){var d;a=p;if(92===D.charCodeAt(p))d=P();else a:{var e;for(d=p++;p<T;){e=D.charCodeAt(p);if(92===e){p=d;d=P();break a}if(da(e))++p;else break}d=D.slice(d,p)}return{type:1===d.length?H.Identifier:l(d)?H.Keyword:"null"===d?H.NullLiteral:"true"===d||"false"===d?H.BooleanLiteral:H.Identifier,value:d,lineNumber:X,lineStart:V,start:a,end:p}}if(40===a||41===a||59===a)return F();
if(39===a||34===a){var r="",q,s,u;e=!1;var t,y;t=X;y=V;a=D[p];I("'"===a||'"'===a,"String literal must starts with a quote");d=p;for(++p;p<T;)if(q=D[p++],q===a){a="";break}else if("\\"===q)if((q=D[p++])&&ca(q.charCodeAt(0)))++X,"\r"===q&&"\n"===D[p]&&++p,V=p;else switch(q){case "u":case "x":if("{"===D[p]){++p;s=q=s=void 0;s=D[p];q=0;for("}"===s&&G();p<T;){s=D[p++];if(!x(s))break;q=16*q+"0123456789abcdef".indexOf(s.toLowerCase())}(1114111<q||"}"!==s)&&G();65535>=q?q=String.fromCharCode(q):(s=(q-65536>>
10)+55296,q=String.fromCharCode(s,(q-65536&1023)+56320));r+=q}else u=p,(s=U(q))?r+=s:(p=u,r+=q);break;case "n":r+="\n";break;case "r":r+="\r";break;case "t":r+="\t";break;case "b":r+="\b";break;case "f":r+="\f";break;case "v":r+="\x0B";break;default:ba(q)?(s="01234567".indexOf(q),0!==s&&(e=!0),p<T&&ba(D[p])&&(e=!0,s=8*s+"01234567".indexOf(D[p++]),0<="0123".indexOf(q)&&p<T&&ba(D[p])&&(s=8*s+"01234567".indexOf(D[p++]))),r+=String.fromCharCode(s)):r+=q}else if(ca(q.charCodeAt(0)))break;else r+=q;""!==
a&&G();return{type:H.StringLiteral,value:r,octal:e,startLineNumber:t,startLineStart:y,lineNumber:X,lineStart:V,start:d,end:p}}return 46===a?w(D.charCodeAt(p+1))?K():F():w(a)?K():z.tokenize&&47===a?h():F()}function a(){var a,d,e;W();a={start:{line:X,column:p-V}};d=$();a.end={line:X,column:p-V};d.type!==H.EOF&&(e=D.slice(d.start,d.end),a={type:Pa[d.type],value:e,range:[d.start,d.end],loc:a},d.regex&&(a.regex={pattern:d.regex.pattern,flags:d.regex.flags}),z.tokens.push(a));return d}function d(){var d;
d=L;p=d.end;X=d.lineNumber;V=d.lineStart;L="undefined"!==typeof z.tokens?a():$();p=d.end;X=d.lineNumber;V=d.lineStart;return d}function u(){var d,e,h;d=p;e=X;h=V;L="undefined"!==typeof z.tokens?a():$();p=d;X=e;V=h}function db(){this.line=X;this.column=p-V}function E(){this.start=new db;this.end=null}function Oa(a){this.start=a.type===H.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function ia(){p=L.start;L.type===
H.StringLiteral?(X=L.startLineNumber,V=L.startLineStart):(X=L.lineNumber,V=L.lineStart);z.range&&(this.range=[p,0]);z.loc&&(this.loc=new E)}function ha(a){z.range&&(this.range=[a.start,0]);z.loc&&(this.loc=new Oa(a))}function ea(){var a,d,e,h;a=p;d=X;e=V;W();h=X!==d;p=a;X=d;V=e;return h}function Za(a,d,e){var h=Error("Line "+a+": "+e);h.index=d;h.lineNumber=a;h.column=d-V+1;h.description=e;return h}function ta(a){var d,e;d=Array.prototype.slice.call(arguments,1);e=a.replace(/%(\d)/g,function(a,g){I(g<
d.length,"Message reference must be in range");return d[g]});throw Za(X,p,e);}function ya(a){var d,e;d=Array.prototype.slice.call(arguments,1);e=a.replace(/%(\d)/g,function(a,g){I(g<d.length,"Message reference must be in range");return d[g]});e=Za(X,p,e);if(z.errors)z.errors.push(e);else throw e;}function B(a,d){var e=Q.UnexpectedToken;if(a&&(e=d?d:a.type===H.EOF?Q.UnexpectedEOS:a.type===H.Identifier?Q.UnexpectedIdentifier:a.type===H.NumericLiteral?Q.UnexpectedNumber:a.type===H.StringLiteral?Q.UnexpectedString:
Q.UnexpectedToken,a.type===H.Keyword)){var h;a:switch(a.value){case "class":case "enum":case "export":case "extends":case "import":case "super":h=!0;break a;default:h=!1}h?e=Q.UnexpectedReserved:aa&&pa(a.value)&&(e=Q.StrictReservedWord)}e=e.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?Za(a.lineNumber,a.start,e):Za(X,p,e)}function G(a,d){throw B(a,d);}function za(a,d){var e=B(a,d);if(z.errors)z.errors.push(e);else throw e;}function O(a){var e=d();e.type===H.Punctuator&&
e.value===a||G(e)}function ja(){var a;z.errors?(a=L,a.type===H.Punctuator&&","===a.value?d():a.type===H.Punctuator&&";"===a.value?(d(),za(a)):za(a,Q.UnexpectedToken)):O(",")}function ka(a){var e=d();e.type===H.Keyword&&e.value===a||G(e)}function A(a){return L.type===H.Punctuator&&L.value===a}function ga(a){return L.type===H.Keyword&&L.value===a}function Ka(){var a,e=p,h=X,r=V,l=L;59===D.charCodeAt(p)||A(";")?d():(a=X,W(),X!==a?(p=e,X=h,V=r,L=l):L.type===H.EOF||A("}")||G(L))}function $a(a){return a.type===
N.Identifier||a.type===N.MemberExpression}function ma(a,d){var e,h,l=new ia;e=aa;h=yb();d&&aa&&fa(a[0].name)&&za(d,Q.StrictParamName);aa=e;return l.finishFunctionExpression(null,a,[],h)}function Ea(){var a,d;a=aa;aa=!0;d=Va();d=ma(d.params);aa=a;return d}function ab(){var a,e=new ia;a=d();return a.type===H.StringLiteral||a.type===H.NumericLiteral?(aa&&a.octal&&za(a,Q.StrictOctalLiteral),e.finishLiteral(a)):e.finishIdentifier(a.value)}function hb(){var a,e,h,r=new ia;a=L;if(a.type===H.Identifier)return e=
ab(),"get"!==a.value||A(":")||A("(")?"set"!==a.value||A(":")||A("(")?A(":")?(d(),a=Ba(),r.finishProperty("init",e,a,!1,!1)):A("(")?(a=Ea(),r.finishProperty("init",e,a,!0,!1)):r.finishProperty("init",e,e,!1,!0):(e=ab(),O("("),a=L,a.type!==H.Identifier?(O(")"),za(a),a=ma([])):(h=[sa()],O(")"),a=ma(h,a)),r.finishProperty("set",e,a,!1,!1)):(e=ab(),O("("),O(")"),a=ma([]),r.finishProperty("get",e,a,!1,!1));if(a.type===H.EOF||a.type===H.Punctuator)G(a);else{e=ab();if(A(":"))return d(),a=Ba(),r.finishProperty("init",
e,a,!1,!1);if(A("("))return a=Ea(),r.finishProperty("init",e,a,!0,!1);G(d())}}function Ta(){var a,e,h,r;if(A("("))return O("("),A(")")?(d(),e=eb.ArrowParameterPlaceHolder):(++M.parenthesisCount,e=ua(),O(")")),e;if(A("[")){e=[];var l=new ia;for(O("[");!A("]");)A(",")?(d(),e.push(null)):(e.push(Ba()),A("]")||O(","));d();return l.finishArrayExpression(e)}if(A("{")){e=[];var p;a={};h=String;var s=new ia;for(O("{");!A("}");)l=hb(),p=l.key.type===N.Identifier?l.key.name:h(l.key.value),r="init"===l.kind?
jb.Data:"get"===l.kind?jb.Get:jb.Set,p="$"+p,Object.prototype.hasOwnProperty.call(a,p)?(a[p]===jb.Data?aa&&r===jb.Data?ya(Q.StrictDuplicateProperty):r!==jb.Data&&ya(Q.AccessorDataProperty):r===jb.Data?ya(Q.AccessorDataProperty):a[p]&r&&ya(Q.AccessorGetSet),a[p]|=r):a[p]=r,e.push(l),A("}")||ja();O("}");return s.finishObjectExpression(e)}a=L.type;r=new ia;if(a===H.Identifier)h=r.finishIdentifier(d().value);else if(a===H.StringLiteral||a===H.NumericLiteral)aa&&L.octal&&za(L,Q.StrictOctalLiteral),h=r.finishLiteral(d());
else if(a===H.Keyword){if(ga("function")){r=null;var t,s=[];p=[];var w;a=new ia;ka("function");A("(")||(h=L,r=sa(),aa?fa(h.value)&&za(h,Q.StrictFunctionName):fa(h.value)?(e=h,l=Q.StrictFunctionName):pa(h.value)&&(e=h,l=Q.StrictReservedWord));t=Va(e);s=t.params;p=t.defaults;h=t.stricted;e=t.firstRestricted;t.message&&(l=t.message);w=aa;t=yb();aa&&e&&G(e,l);aa&&h&&za(h,l);aa=w;return a.finishFunctionExpression(r,s,p,t)}ga("this")?(d(),h=r.finishThisExpression()):G(d())}else a===H.BooleanLiteral?(e=
d(),e.value="true"===e.value,h=r.finishLiteral(e)):a===H.NullLiteral?(e=d(),e.value=null,h=r.finishLiteral(e)):A("/")||A("/=")?(h="undefined"!==typeof z.tokens?r.finishLiteral(q()):r.finishLiteral(y()),u()):G(d());return h}function qb(){var a=[];O("(");if(!A(")"))for(;p<T;){a.push(Ba());if(A(")"))break;ja()}O(")");return a}function Ga(){O(".");var a,e=new ia;a=d();a.type===H.Identifier||a.type===H.Keyword||a.type===H.BooleanLiteral||a.type===H.NullLiteral||G(a);return e.finishIdentifier(a.value)}
function rb(){var a;O("[");a=ua();O("]");return a}function Aa(){var a,d,e=new ia;ka("new");var h;I(M.allowIn,"callee of new expression always allow in keyword.");h=L;for(a=ga("new")?Aa():Ta();;)if(A("["))d=rb(),a=(new ha(h)).finishMemberExpression("[",a,d);else if(A("."))d=Ga(),a=(new ha(h)).finishMemberExpression(".",a,d);else break;d=A("(")?qb():[];return e.finishNewExpression(a,d)}function Ha(){var a,e,h=L,r,l=M.allowIn;e=L;M.allowIn=!0;for(a=ga("new")?Aa():Ta();;)if(A("."))r=Ga(),a=(new ha(e)).finishMemberExpression(".",
a,r);else if(A("("))r=qb(),a=(new ha(e)).finishCallExpression(a,r);else if(A("["))r=rb(),a=(new ha(e)).finishMemberExpression("[",a,r);else break;M.allowIn=l;L.type!==H.Punctuator||!A("++")&&!A("--")||ea()||(aa&&a.type===N.Identifier&&fa(a.name)&&ya(Q.StrictLHSPostfix),$a(a)||ya(Q.InvalidLHSInAssignment),e=d(),a=(new ha(h)).finishPostfixExpression(e.value,a));return a}function Ua(){var a,e,h;L.type!==H.Punctuator&&L.type!==H.Keyword?e=Ha():A("++")||A("--")?(h=L,a=d(),e=Ua(),aa&&e.type===N.Identifier&&
fa(e.name)&&ya(Q.StrictLHSPrefix),$a(e)||ya(Q.InvalidLHSInAssignment),e=(new ha(h)).finishUnaryExpression(a.value,e)):A("+")||A("-")||A("~")||A("!")?(h=L,a=d(),e=Ua(),e=(new ha(h)).finishUnaryExpression(a.value,e)):ga("delete")||ga("void")||ga("typeof")?(h=L,a=d(),e=Ua(),e=(new ha(h)).finishUnaryExpression(a.value,e),aa&&"delete"===e.operator&&e.argument.type===N.Identifier&&ya(Q.StrictDelete)):e=Ha();return e}function ra(a,d){var e=0;if(a.type!==H.Punctuator&&a.type!==H.Keyword)return 0;switch(a.value){case "||":e=
1;break;case "&&":e=2;break;case "|":e=3;break;case "^":e=4;break;case "&":e=5;break;case "==":case "!=":case "===":case "!==":e=6;break;case "<":case ">":case "<=":case ">=":case "instanceof":e=7;break;case "in":e=d?7:0;break;case "<<":case ">>":case ">>>":e=8;break;case "+":case "-":e=9;break;case "*":case "/":case "%":e=11}return e}function sb(){var a,e,h,r,l,p;a=L;e=Ua();if(e===eb.ArrowParameterPlaceHolder)return e;h=L;r=ra(h,M.allowIn);if(0===r)return e;h.prec=r;d();a=[a,L];p=Ua();for(l=[e,h,
p];0<(r=ra(L,M.allowIn));){for(;2<l.length&&r<=l[l.length-2].prec;)p=l.pop(),h=l.pop().value,e=l.pop(),a.pop(),e=(new ha(a[a.length-1])).finishBinaryExpression(h,e,p),l.push(e);h=d();h.prec=r;l.push(h);a.push(L);e=Ua();l.push(e)}r=l.length-1;e=l[r];for(a.pop();1<r;)e=(new ha(a.pop())).finishBinaryExpression(l[r-1].value,l[r-2],e),r-=2;return e}function Ia(a){var d,e,h,l,p,q,t;l=[];p=[];q=0;t={paramSet:{}};d=0;for(e=a.length;d<e;d+=1)if(h=a[d],h.type===N.Identifier)l.push(h),p.push(null),La(t,h,h.name);
else if(h.type===N.AssignmentExpression)l.push(h.left),p.push(h.right),++q,La(t,h.left,h.left.name);else return null;t.message===Q.StrictParamDupe&&(a=aa?t.stricted:t.firstRestricted,G(a,t.message));0===q&&(p=[]);return{params:l,defaults:p,rest:null,stricted:t.stricted,firstRestricted:t.firstRestricted,message:t.message}}function Ba(){var a,e,h,l,p;a=M.parenthesisCount;e=p=L;var q,s,t;t=L;h=sb();h!==eb.ArrowParameterPlaceHolder&&A("?")&&(d(),q=M.allowIn,M.allowIn=!0,s=Ba(),M.allowIn=q,O(":"),q=Ba(),
h=(new ha(t)).finishConditionalExpression(h,s,q));if(h===eb.ArrowParameterPlaceHolder||A("=>"))if(M.parenthesisCount===a||M.parenthesisCount===a+1)if(h.type===N.Identifier?l=Ia([h]):h.type===N.AssignmentExpression?l=Ia([h]):h.type===N.SequenceExpression?l=Ia(h.expressions):h===eb.ArrowParameterPlaceHolder&&(l=Ia([])),l)return e=l,p=new ha(p),O("=>"),a=aa,l=A("{")?yb():Ba(),aa&&e.firstRestricted&&G(e.firstRestricted,e.message),aa&&e.stricted&&za(e.stricted,e.message),aa=a,p.finishArrowFunctionExpression(e.params,
e.defaults,l,l.type!==N.BlockStatement);L.type!==H.Punctuator?a=!1:(a=L.value,a="="===a||"*="===a||"/="===a||"%="===a||"+="===a||"-="===a||"<<="===a||">>="===a||">>>="===a||"&="===a||"^="===a||"|="===a);a&&($a(h)||ya(Q.InvalidLHSInAssignment),aa&&h.type===N.Identifier&&fa(h.name)&&za(e,Q.StrictLHSAssignment),e=d(),a=Ba(),h=(new ha(p)).finishAssignmentExpression(e.value,h,a));return h}function ua(){var a,e=L;a=Ba();if(A(",")){for(a=[a];p<T&&A(",");)d(),a.push(Ba());a=(new ha(e)).finishSequenceExpression(a)}return a}
function Fa(){var a=new ia;O("{");for(var d=[],e;p<T&&!A("}");){e=zb();if("undefined"===typeof e)break;d.push(e)}O("}");return a.finishBlockStatement(d)}function sa(){var a,e=new ia;a=d();a.type!==H.Identifier&&(aa&&a.type===H.Keyword&&pa(a.value)?za(a,Q.StrictReservedWord):G(a));return e.finishIdentifier(a.value)}function ib(a){var e=null,h,l=new ia;h=sa();aa&&fa(h.name)&&ya(Q.StrictVarName);"const"===a?(O("="),e=Ba()):A("=")&&(d(),e=Ba());return l.finishVariableDeclarator(h,e)}function va(a){var e=
[];do{e.push(ib(a));if(!A(","))break;d()}while(p<T);return e}function qa(){var a,d,e=new ia;ka("catch");O("(");A(")")&&G(L);a=sa();aa&&fa(a.name)&&ya(Q.StrictCatchVariable);O(")");d=Fa();return e.finishCatchClause(a,d)}function na(){var a=L.type,e,h,l;a===H.EOF&&G(L);if(a===H.Punctuator&&"{"===L.value)return Fa();l=new ia;if(a===H.Punctuator)switch(L.value){case ";":return l=new ia,O(";"),l.finishEmptyStatement();case "(":return e=ua(),Ka(),l.finishExpressionStatement(e)}else if(a===H.Keyword)switch(L.value){case "break":return e=
null,ka("break"),59===D.charCodeAt(p)?(d(),M.inIteration||M.inSwitch||ta(Q.IllegalBreak),l=l.finishBreakStatement(null)):ea()?(M.inIteration||M.inSwitch||ta(Q.IllegalBreak),l=l.finishBreakStatement(null)):(L.type===H.Identifier&&(e=sa(),h="$"+e.name,Object.prototype.hasOwnProperty.call(M.labelSet,h)||ta(Q.UnknownLabel,e.name)),Ka(),null!==e||M.inIteration||M.inSwitch||ta(Q.IllegalBreak),l=l.finishBreakStatement(e)),l;case "continue":return e=null,ka("continue"),59===D.charCodeAt(p)?(d(),M.inIteration||
ta(Q.IllegalContinue),l=l.finishContinueStatement(null)):ea()?(M.inIteration||ta(Q.IllegalContinue),l=l.finishContinueStatement(null)):(L.type===H.Identifier&&(e=sa(),h="$"+e.name,Object.prototype.hasOwnProperty.call(M.labelSet,h)||ta(Q.UnknownLabel,e.name)),Ka(),null!==e||M.inIteration||ta(Q.IllegalContinue),l=l.finishContinueStatement(e)),l;case "debugger":return ka("debugger"),Ka(),l.finishDebuggerStatement();case "do":return ka("do"),h=M.inIteration,M.inIteration=!0,e=na(),M.inIteration=h,ka("while"),
O("("),h=ua(),O(")"),A(";")&&d(),l.finishDoWhileStatement(e,h);case "for":var q,s,u,t;u=M.allowIn;q=a=s=null;ka("for");O("(");if(A(";"))d();else{if(ga("var")||ga("let")){M.allowIn=!1;var w=new ia;q=d();t=va();q=w.finishVariableDeclaration(t,q.value);M.allowIn=u;1===q.declarations.length&&ga("in")&&(d(),e=q,h=ua(),q=null)}else M.allowIn=!1,q=ua(),M.allowIn=u,ga("in")&&($a(q)||ya(Q.InvalidLHSInForIn),d(),e=q,h=ua(),q=null);"undefined"===typeof e&&O(";")}"undefined"===typeof e&&(A(";")||(a=ua()),O(";"),
A(")")||(s=ua()));O(")");t=M.inIteration;M.inIteration=!0;u=na();M.inIteration=t;return"undefined"===typeof e?l.finishForStatement(q,a,s,u):l.finishForInStatement(e,h,u);case "function":return Ja(l);case "if":return ka("if"),O("("),e=ua(),O(")"),h=na(),ga("else")?(d(),a=na()):a=null,l.finishIfStatement(e,h,a);case "return":return e=null,ka("return"),M.inFunctionBody||ya(Q.IllegalReturn),32===D.charCodeAt(p)&&Z(D.charCodeAt(p+1))?(e=ua(),Ka(),l=l.finishReturnStatement(e)):ea()?l=l.finishReturnStatement(null):
(A(";")||A("}")||L.type===H.EOF||(e=ua()),Ka(),l=l.finishReturnStatement(e)),l;case "switch":ka("switch");O("(");e=ua();O(")");O("{");h=[];if(A("}"))d();else{a=M.inSwitch;M.inSwitch=!0;for(s=!1;p<T&&!A("}");){u=void 0;q=[];t=void 0;w=new ia;ga("default")?(d(),u=null):(ka("case"),u=ua());for(O(":");p<T&&!(A("}")||ga("default")||ga("case"));)t=na(),q.push(t);u=w.finishSwitchCase(u,q);null===u.test&&(s&&ta(Q.MultipleDefaultsInSwitch),s=!0);h.push(u)}M.inSwitch=a;O("}")}l=l.finishSwitchStatement(e,h);
return l;case "throw":return ka("throw"),ea()&&ta(Q.NewlineAfterThrow),e=ua(),Ka(),l.finishThrowStatement(e);case "try":return h=[],a=null,ka("try"),e=Fa(),ga("catch")&&h.push(qa()),ga("finally")&&(d(),a=Fa()),0!==h.length||a||ta(Q.NoCatchOrFinally),l.finishTryStatement(e,[],h,a);case "var":return ka("var"),e=va(),Ka(),l.finishVariableDeclaration(e,"var");case "while":return ka("while"),O("("),e=ua(),O(")"),a=M.inIteration,M.inIteration=!0,h=na(),M.inIteration=a,l.finishWhileStatement(e,h);case "with":return aa&&
(W(),ya(Q.StrictModeWith)),ka("with"),O("("),e=ua(),O(")"),h=na(),l.finishWithStatement(e,h)}e=ua();if(e.type===N.Identifier&&A(":"))return d(),a="$"+e.name,Object.prototype.hasOwnProperty.call(M.labelSet,a)&&ta(Q.Redeclaration,"Label",e.name),M.labelSet[a]=!0,h=na(),delete M.labelSet[a],l.finishLabeledStatement(e,h);Ka();return l.finishExpressionStatement(e)}function yb(){var a,d=[],e,h,l,q,s,t=new ia;for(O("{");p<T&&L.type===H.StringLiteral;){e=L;a=zb();d.push(a);if(a.expression.type!==N.Literal)break;
a=D.slice(e.start+1,e.end-1);"use strict"===a?(aa=!0,h&&za(h,Q.StrictOctalLiteral)):!h&&e.octal&&(h=e)}e=M.labelSet;h=M.inIteration;l=M.inSwitch;q=M.inFunctionBody;s=M.parenthesizedCount;M.labelSet={};M.inIteration=!1;M.inSwitch=!1;M.inFunctionBody=!0;for(M.parenthesizedCount=0;p<T&&!A("}");){a=zb();if("undefined"===typeof a)break;d.push(a)}O("}");M.labelSet=e;M.inIteration=h;M.inSwitch=l;M.inFunctionBody=q;M.parenthesizedCount=s;return t.finishBlockStatement(d)}function La(a,d,e){var h="$"+e;aa?
(fa(e)&&(a.stricted=d,a.message=Q.StrictParamName),Object.prototype.hasOwnProperty.call(a.paramSet,h)&&(a.stricted=d,a.message=Q.StrictParamDupe)):a.firstRestricted||(fa(e)?(a.firstRestricted=d,a.message=Q.StrictParamName):pa(e)?(a.firstRestricted=d,a.message=Q.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,h)&&(a.firstRestricted=d,a.message=Q.StrictParamDupe));a.paramSet[h]=!0}function Va(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};O("(");if(!A(")"))for(a.paramSet=
{};p<T;){var e=a,h=void 0,l=void 0,q=void 0,h=L,l=sa();La(e,h,h.value);A("=")&&(d(),q=Ba(),++e.defaultCount);e.params.push(l);e.defaults.push(q);if(A(")"))break;O(",")}O(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Ja(){var a,d=[],e=[],h,l,p,q,s,u=new ia;ka("function");d=L;a=sa();aa?fa(d.value)&&za(d,Q.StrictFunctionName):fa(d.value)?(p=d,q=Q.StrictFunctionName):pa(d.value)&&(p=
d,q=Q.StrictReservedWord);h=Va(p);d=h.params;e=h.defaults;l=h.stricted;p=h.firstRestricted;h.message&&(q=h.message);s=aa;h=yb();aa&&p&&G(p,q);aa&&l&&za(l,q);aa=s;return u.finishFunctionDeclaration(a,d,e,h)}function zb(){if(L.type===H.Keyword)switch(L.value){case "const":case "let":var a=L.value,d,e=new ia;ka(a);d=va(a);Ka();return e.finishVariableDeclaration(d,a);case "function":return Ja();default:return na()}if(L.type!==H.EOF)return na()}function Db(){var a,d,e,h=[];for(a=0;a<z.tokens.length;++a)d=
z.tokens[a],e={type:d.type,value:d.value},d.regex&&(e.regex={pattern:d.regex.pattern,flags:d.regex.flags}),z.range&&(e.range=d.range),z.loc&&(e.loc=d.loc),h.push(e);z.tokens=h}var H,Pa,Nb,N,eb,jb,Q,mb,D,aa,p,X,V,T,L,M,z;H={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Pa={};Pa[H.BooleanLiteral]="Boolean";Pa[H.EOF]="<end>";Pa[H.Identifier]="Identifier";Pa[H.Keyword]="Keyword";Pa[H.NullLiteral]="Null";Pa[H.NumericLiteral]=
"Numeric";Pa[H.Punctuator]="Punctuator";Pa[H.StringLiteral]="String";Pa[H.RegularExpression]="RegularExpression";Nb="( { [ in typeof instanceof new return case delete throw void = += -= *= /= %= <<= >>= >>>= &= |= ^= , + - * / % ++ -- << >> >>> & | ^ ! ~ && || ? : === == >= <= < > != !==".split(" ");N={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",ArrowFunctionExpression:"ArrowFunctionExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",
CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",
LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",
VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"};eb={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};jb={Data:1,Get:2,Set:4};Q={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",
UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",
StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",
StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",
StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};mb={NonAsciiIdentifierStart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
ha.prototype=ia.prototype={processComment:function(){var a,d,e,h=z.bottomRightStack,l,p,q=h[h.length-1];if(!(this.type===N.Program&&0<this.body.length)){if(0<z.trailingComments.length){e=[];for(l=z.trailingComments.length-1;0<=l;--l)p=z.trailingComments[l],p.range[0]>=this.range[1]&&(e.unshift(p),z.trailingComments.splice(l,1));z.trailingComments=[]}else q&&q.trailingComments&&q.trailingComments[0].range[0]>=this.range[1]&&(e=q.trailingComments,delete q.trailingComments);if(q)for(;q&&q.range[0]>=
this.range[0];)a=q,q=h.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<z.leadingComments.length)for(d=[],l=z.leadingComments.length-1;0<=l;--l)p=z.leadingComments[l],p.range[1]<=this.range[0]&&(d.unshift(p),z.leadingComments.splice(l,1));d&&0<d.length&&(this.leadingComments=d);e&&0<e.length&&(this.trailingComments=e);h.push(this)}},finish:function(){z.range&&(this.range[1]=
p);z.loc&&(this.loc.end=new db,z.source&&(this.loc.source=z.source));z.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=N.ArrayExpression;this.elements=a;this.finish();return this},finishArrowFunctionExpression:function(a,d,e,h){this.type=N.ArrowFunctionExpression;this.id=null;this.params=a;this.defaults=d;this.body=e;this.rest=null;this.generator=!1;this.expression=h;this.finish();return this},finishAssignmentExpression:function(a,d,e){this.type=N.AssignmentExpression;
this.operator=a;this.left=d;this.right=e;this.finish();return this},finishBinaryExpression:function(a,d,e){this.type="||"===a||"&&"===a?N.LogicalExpression:N.BinaryExpression;this.operator=a;this.left=d;this.right=e;this.finish();return this},finishBlockStatement:function(a){this.type=N.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=N.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,d){this.type=N.CallExpression;
this.callee=a;this.arguments=d;this.finish();return this},finishCatchClause:function(a,d){this.type=N.CatchClause;this.param=a;this.body=d;this.finish();return this},finishConditionalExpression:function(a,d,e){this.type=N.ConditionalExpression;this.test=a;this.consequent=d;this.alternate=e;this.finish();return this},finishContinueStatement:function(a){this.type=N.ContinueStatement;this.label=a;this.finish();return this},finishDebuggerStatement:function(){this.type=N.DebuggerStatement;this.finish();
return this},finishDoWhileStatement:function(a,d){this.type=N.DoWhileStatement;this.body=a;this.test=d;this.finish();return this},finishEmptyStatement:function(){this.type=N.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=N.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,d,e,h){this.type=N.ForStatement;this.init=a;this.test=d;this.update=e;this.body=h;this.finish();return this},finishForInStatement:function(a,
d,e){this.type=N.ForInStatement;this.left=a;this.right=d;this.body=e;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,d,e,h){this.type=N.FunctionDeclaration;this.id=a;this.params=d;this.defaults=e;this.body=h;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,d,e,h){this.type=N.FunctionExpression;this.id=a;this.params=d;this.defaults=e;this.body=h;this.rest=null;this.expression=this.generator=!1;this.finish();
return this},finishIdentifier:function(a){this.type=N.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,d,e){this.type=N.IfStatement;this.test=a;this.consequent=d;this.alternate=e;this.finish();return this},finishLabeledStatement:function(a,d){this.type=N.LabeledStatement;this.label=a;this.body=d;this.finish();return this},finishLiteral:function(a){this.type=N.Literal;this.value=a.value;this.raw=D.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},
finishMemberExpression:function(a,d,e){this.type=N.MemberExpression;this.computed="["===a;this.object=d;this.property=e;this.finish();return this},finishNewExpression:function(a,d){this.type=N.NewExpression;this.callee=a;this.arguments=d;this.finish();return this},finishObjectExpression:function(a){this.type=N.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,d){this.type=N.UpdateExpression;this.operator=a;this.argument=d;this.prefix=!1;this.finish();
return this},finishProgram:function(a){this.type=N.Program;this.body=a;this.finish();return this},finishProperty:function(a,d,e,h,l){this.type=N.Property;this.key=d;this.value=e;this.kind=a;this.method=h;this.shorthand=l;this.finish();return this},finishReturnStatement:function(a){this.type=N.ReturnStatement;this.argument=a;this.finish();return this},finishSequenceExpression:function(a){this.type=N.SequenceExpression;this.expressions=a;this.finish();return this},finishSwitchCase:function(a,d){this.type=
N.SwitchCase;this.test=a;this.consequent=d;this.finish();return this},finishSwitchStatement:function(a,d){this.type=N.SwitchStatement;this.discriminant=a;this.cases=d;this.finish();return this},finishThisExpression:function(){this.type=N.ThisExpression;this.finish();return this},finishThrowStatement:function(a){this.type=N.ThrowStatement;this.argument=a;this.finish();return this},finishTryStatement:function(a,d,e,h){this.type=N.TryStatement;this.block=a;this.guardedHandlers=d;this.handlers=e;this.finalizer=
h;this.finish();return this},finishUnaryExpression:function(a,d){this.type="++"===a||"--"===a?N.UpdateExpression:N.UnaryExpression;this.operator=a;this.argument=d;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,d){this.type=N.VariableDeclaration;this.declarations=a;this.kind=d;this.finish();return this},finishVariableDeclarator:function(a,d){this.type=N.VariableDeclarator;this.id=a;this.init=d;this.finish();return this},finishWhileStatement:function(a,d){this.type=N.WhileStatement;
this.test=a;this.body=d;this.finish();return this},finishWithStatement:function(a,d){this.type=N.WithStatement;this.object=a;this.body=d;this.finish();return this}};s.version="2.0.0";s.tokenize=function(a,e){var h,l;h=String;"string"===typeof a||a instanceof String||(a=h(a));D=a;p=0;X=0<D.length?1:0;V=0;T=D.length;L=null;M={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};z={};e=e||{};e.tokens=!0;z.tokens=[];z.tokenize=!0;z.openParenToken=-1;z.openCurlyToken=
-1;z.range="boolean"===typeof e.range&&e.range;z.loc="boolean"===typeof e.loc&&e.loc;"boolean"===typeof e.comment&&e.comment&&(z.comments=[]);"boolean"===typeof e.tolerant&&e.tolerant&&(z.errors=[]);try{u();if(L.type===H.EOF)return z.tokens;for(d();L.type!==H.EOF;)try{d()}catch(q){if(z.errors){z.errors.push(q);break}else throw q;}Db();l=z.tokens;"undefined"!==typeof z.comments&&(l.comments=z.comments);"undefined"!==typeof z.errors&&(l.errors=z.errors)}catch(s){throw s;}finally{z={}}return l};s.parse=
function(a,d){var e,h;h=String;"string"===typeof a||a instanceof String||(a=h(a));D=a;p=0;X=0<D.length?1:0;V=0;T=D.length;L=null;M={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};z={};"undefined"!==typeof d&&(z.range="boolean"===typeof d.range&&d.range,z.loc="boolean"===typeof d.loc&&d.loc,z.attachComment="boolean"===typeof d.attachComment&&d.attachComment,z.loc&&null!==d.source&&void 0!==d.source&&(z.source=h(d.source)),"boolean"===typeof d.tokens&&
d.tokens&&(z.tokens=[]),"boolean"===typeof d.comment&&d.comment&&(z.comments=[]),"boolean"===typeof d.tolerant&&d.tolerant&&(z.errors=[]),z.attachComment&&(z.range=!0,z.comments=[],z.bottomRightStack=[],z.trailingComments=[],z.leadingComments=[]));try{var l;W();u();l=new ia;aa=!1;var q;h=[];for(var s,t,w;p<T;){s=L;if(s.type!==H.StringLiteral)break;q=zb();h.push(q);if(q.expression.type!==N.Literal)break;t=D.slice(s.start+1,s.end-1);"use strict"===t?(aa=!0,w&&za(w,Q.StrictOctalLiteral)):!w&&s.octal&&
(w=s)}for(;p<T;){q=zb();if("undefined"===typeof q)break;h.push(q)}e=l.finishProgram(h);"undefined"!==typeof z.comments&&(e.comments=z.comments);"undefined"!==typeof z.tokens&&(Db(),e.tokens=z.tokens);"undefined"!==typeof z.errors&&(e.errors=z.errors)}catch(x){throw x;}finally{z={}}return e};s.Syntax=function(){var a,d={};"function"===typeof Object.create&&(d=Object.create(null));for(a in N)N.hasOwnProperty(a)&&(d[a]=N[a]);"function"===typeof Object.freeze&&Object.freeze(d);return d}()});var saveAs=saveAs||function(s){if(!("undefined"===typeof s||"undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var I=function(){return s.URL||s.webkitURL||s},w=s.document.createElementNS("http://www.w3.org/1999/xhtml","a"),x="download"in w,ba=/constructor/i.test(s.HTMLElement)||s.safari,ca=/CriOS\/[\d]+/.test(navigator.userAgent),Z=function(e){(s.setImmediate||s.setTimeout)(function(){throw e;},0)},da=function(e){setTimeout(function(){"string"===typeof e?I().revokeObjectURL(e):
e.remove()},4E4)},pa=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},fa=function(e,l,W){W||(e=pa(e));var U=this,P="application/octet-stream"===e.type,F,K=function(){for(var e=["writestart","progress","write","writeend"],e=[].concat(e),l=e.length;l--;){var q=U["on"+e[l]];if("function"===typeof q)try{q.call(U,U)}catch(h){Z(h)}}};W=function(){if((ca||P&&ba)&&s.FileReader){var l=new FileReader;
l.onloadend=function(){var e=ca?l.result:l.result.replace(/^data:[^;]*;/,"data:attachment/file;");s.open(e,"_blank")||(s.location.href=e);U.readyState=U.DONE;K()};l.readAsDataURL(e);U.readyState=U.INIT}else F||(F=I().createObjectURL(e)),P?s.location.href=F:s.open(F,"_blank")||(s.location.href=F),U.readyState=U.DONE,K(),da(F)};U.readyState=U.INIT;x?(F=I().createObjectURL(e),setTimeout(function(){w.href=F;w.download=l;var e=new MouseEvent("click");w.dispatchEvent(e);K();da(F);U.readyState=U.DONE})):
W()},l=fa.prototype;if("undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob)return function(e,l,s){l=l||e.name||"download";s||(e=pa(e));return navigator.msSaveOrOpenBlob(e,l)};l.abort=function(){};l.readyState=l.INIT=0;l.WRITING=1;l.DONE=2;l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null;return function(e,l,s){return new fa(e,l||e.name||"download",s)}}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);
"undefined"!==typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!==typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs});var gui=function(){var s=null;return gui={init:function(I,w){s=new UIL.Gui({parent:I,css:"left:0px; right: auto; ",size:240,color:"no",h:22,close:!1});w.withFps&&s.add("fps",{height:30}).show();this.add(w)},add:function(I){var w=I.base,x=I.function,ba;for(ba in w)if(I[ba])s.add(w,ba,I[ba]).onChange(x)},dispose:function(){s.dispose()},resize:function(I){s.setWidth(I-10)}}}();var editor=function(){var s,I,w,x,ba,ca,Z,da,pa,fa,l,e,J,W,U,P,F=[],K,S,y,q,h,$,a,d,u,db,E,Oa,ia,ha,ea=function(){},Za=function(){},ta=!1,ya=!1,B=[],G=[],za=null,O=null,ja=0,ka=0,A=!1,ga=0,Ka=0,$a=!1,ma=null,Ea="#DE5825",ab=!1,hb=!1,Ta=!1,qb=!1,Ga=!1,rb=!1,Aa=!1,Ha=!1,Ua="",ra="",sb="",Ia,Ba,ua="javascript",Fa;return editor={isFullScreen:!1,extraMode:"",init:function(a,d,h,q){a&&(ea=a);document.body.style.cssText='font-family: "Lucida Console", Monaco, monospace; padding:0; margin:0; font-size: 11px; height:100%; background:#222322; color:#dedede; overflow:hidden;';
Ea=h||"#DE5825";P="url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAKCAYAAABrGwT5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAIpJREFUeNpiYKAAMIIITk5OFWyS379/v0NQMwgICQl5YVPw7t27bQQ1g4C0tHQeNkVPnz6dRFAzCCgpKfVgU3jv3r0SgppBQENDYzE28Rs3bsQS1AwCurq6O7GJX7582Z2gZhAwNja+gE387NmzBgQ1g4ClpeVzbOLHjx+XZCQmMdjZ2f3DJg4QYABPYiHCoBQF9AAAAABJRU5ErkJggg==)";s="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position:absolute; background:none; pointer-events:none; top:0;  height:100%;";
I="position:absolute; background:none; pointer-events:none; display:block; left:0px; top:45px; width:100%; background:none; height:calc(100% - 45px);";w="box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;position:absolute; background:none; pointer-events:auto; display:block; border-left:1px solid #3f3f3f; border-right:1px solid #3f3f3f; top:0px; width:10px; height:100%; color: rgba(255, 255, 255, 0.2); cursor: e-resize;";x="position:absolute; top : 0px; left: 0px; width: 100%; font-size: 14px;  font-weight: 500; height: 40px; background: none; border-bottom:1px solid #3f3f3f; line-height: 40px;";
ba="position:absolute; width:30px; height:30px; right:5px; top:5px; border-radius:6px; pointer-events:auto; cursor:pointer; ";ca="padding:0 0; width:70px; height:30px; font-size: 16px; font-weight: 900; letter-spacing: 1px; text-align: center; pointer-events:auto; cursor:pointer; display: inline-block; margin-left:10px; border-radius:6px;line-height: 30px; text-shadow: 1px 1px #000000;";Z="font-size: 13px; pointer-events:auto; cursor: pointer; text-align: left; display: inline-block; width:120px; margin: 3px 3px; padding: 3px 3px; border-radius:6px; text-shadow: 1px 1px #000000;";
hb=d||!1;U=document.createElement("div");U.style.cssText="box-sizing:border-box; -moz-box-sizing:border-box; -webkit-box-sizing:border-box;-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position: absolute; padding-top:10px; border-bottom:none; overflow:hidden;";document.body.appendChild(U);this.makeBigMenu();E=document.createElement("div");E.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position:absolute; right:0; bottom:0;";
document.body.appendChild(E);Oa=document.createElement("div");Oa.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position:absolute; left:0; bottom:0;";document.body.appendChild(Oa);fa=document.createElement("div");fa.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;width:150px; font-size: 10px; position:absolute;  bottom:9px; color:#000000; text-align:left; left:21px";
Oa.appendChild(fa);pa=document.createElement("div");pa.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;width:150px; font-size: 10px; position:absolute;  bottom:10px; color:"+Ea+"; text-align:left; left:20px";Oa.appendChild(pa);J=document.createElement("div");J.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position:absolute; font-size: 14px;  bottom: 24px; color:#888988; text-shadow: 1px 1px #000000; text-align:right; right:50px";
E.appendChild(J);e=document.createElement("div");e.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;width:150px; font-size: 10px; position:absolute;  bottom:9px; color:#000000; text-align:right; right:49px";E.appendChild(e);l=document.createElement("div");l.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;width:150px; font-size: 10px; position:absolute; bottom:10px; color:#787978; text-align:right; right:50px";
E.appendChild(l);da=document.createElement("div");da.style.cssText="position:absolute; width:30px; height:30px; right:10px; bottom:10px; pointer-events:auto; cursor:pointer; ";da.innerHTML=editor.icon("scrIn","#787978",30,30);E.appendChild(da);da.addEventListener("click",editor.toggleFullScreen,!1);da.addEventListener("mouseover",function(){this.innerHTML=editor.icon(editor.isFullScreen?"scrOut":"scrIn",Ea,30,30)},!1);da.addEventListener("mouseout",function(){this.innerHTML=editor.icon(editor.isFullScreen?
"scrOut":"scrIn","#787978",30,30)},!1);u=document.createElement("a");u.href="https://github.com/lo-th";u.target="_blank";u.style.cssText="position:absolute; width:60px; height:30px; left:6px; bottom:13px; pointer-events:auto; cursor:pointer;";u.innerHTML=editor.icon("3TH","#787978");Oa.appendChild(u);db=document.getElementById("3TH");u.addEventListener("mouseover",function(){db.setAttributeNS(null,"fill",Ea)},!1);u.addEventListener("mouseout",function(){db.setAttributeNS(null,"fill","#787978")},!1);
document.addEventListener("fullscreenchange",editor.screenChange,!1);document.addEventListener("webkitfullscreenchange",editor.screenChange,!1);document.addEventListener("mozfullscreenchange",editor.screenChange,!1);document.addEventListener("MSFullscreenChange",editor.screenChange,!1);void 0!==q&&this.setLink(q);hb&&this.show()},addExtraOption:function(a){Za=a;ia=document.createElement("div");ia.style.cssText="position:absolute; width:30px; height:30px; right:10px; bottom:50px; pointer-events:auto; cursor:pointer; ";
ia.innerHTML=editor.icon("shoot","#383938",30,30);E.appendChild(ia);ha=document.createElement("div");ha.style.cssText="position:absolute; width:30px; height:30px; right:10px; bottom:90px; pointer-events:auto; cursor:pointer; ";ha.innerHTML=editor.icon("picker","#383938",30,30);E.appendChild(ha);ia.addEventListener("click",function(){editor.toggleExtraMode("shoot")},!1);ia.addEventListener("mouseover",function(){this.innerHTML=editor.icon("shoot",Ea,30,30)},!1);ia.addEventListener("mouseout",function(){this.innerHTML=
editor.icon("shoot","shoot"===editor.extraMode?"#787978":"#383938",30,30)},!1);ha.addEventListener("click",function(){editor.toggleExtraMode("picker")},!1);ha.addEventListener("mouseover",function(){this.innerHTML=editor.icon("picker",Ea,30,30)},!1);ha.addEventListener("mouseout",function(){this.innerHTML=editor.icon("picker","picker"===editor.extraMode?"#787978":"#383938",30,30)},!1)},toggleExtraMode:function(a){editor.extraMode=a!==editor.extraMode?a:"";ia.innerHTML=editor.icon("shoot","shoot"===
editor.extraMode?"#787978":"#383938",30,30);ha.innerHTML=editor.icon("picker","picker"===editor.extraMode?"#787978":"#383938",30,30);Za(editor.extraMode)},icon:function(a,d,e,h){var l=e=e||40;h=h||40;d=d||"#DEDEDE";h="0 0 "+h+" "+h;var q="";"3TH"===a&&(h="0 0 100 50",e=60,l=30,q="<filter id='f1' x='0' y='0' width='200%' height='200%'><feOffset result='offOut' in='SourceAlpha' dx='1' dy='1' /><feGaussianBlur result='blurOut' in='offOut' stdDeviation='1' /><feBlend in='SourceGraphic' in2='blurOut' mode='normal' /></filter>");
e=["<svg xmlns='http://www.w3.org/2000/svg' version='1.1' xmlns:xlink='http://www.w3.org/1999/xlink' style='pointer-events:none;' preserveAspectRatio='xMinYMax meet' x='0px' y='0px' width='"+e+"px' height='"+l+"px' viewBox='"+h+"'>"+q+"<g>"];switch(a){case "save":e[1]="<path stroke='"+d+"' stroke-width='4' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 26.125 17 L 20 22.95 14.05 17 M 20 9.95 L 20 22.95'/>";e[1]+="<path stroke='"+d+"' stroke-width='2.5' stroke-linejoin='round' stroke-linecap='round' fill='none' d='M 32.6 23 L 32.6 25.5 Q 32.6 28.5 29.6 28.5 L 10.6 28.5 Q 7.6 28.5 7.6 25.5 L 7.6 23'/>";
break;case "scrIn":e[1]="<path fill='rgba(0,0,0,0.5)' stroke='none' d='M 3 20 L 1 20 1 30 11 30 11 28 3 28 3 20 M 11 3 L 11 1 1 1 1 11 3 11 3 3 11 3 M 30 11 L 30 1 20 1 20 3 28 3 28 11 30 11 M 30 20 L 28 20 28 28 20 28 20 30 30 30 30 20 M 24 22 L 24 9 7 9 7 22 24 22 M 22 11 L 22 20 9 20 9 11 22 11 Z'/>";e[1]+="<path fill='"+d+"' stroke='none' d='M 23 21 L 23 8 6 8 6 21 23 21 M 21 10 L 21 19 8 19 8 10 21 10 M 2 19 L 0 19 0 29 10 29 10 27 2 27 2 19 M 10 2 L 10 0 0 0 0 10 2 10 2 2 10 2 M 29 19 L 27 19 27 27 19 27 19 29 29 29 29 19 M 27 10 L 29 10 29 0 19 0 19 2 27 2 27 10 Z'/>";
break;case "scrOut":e[1]="<path fill='rgba(0,0,0,0.5)' stroke='none' d='M 30 1 L 1 1 1 30 30 30 30 1 M 3 3 L 28 3 28 28 3 28 3 3 M 9 17 L 7 17 7 22 12 22 12 20 9 20 9 17 M 12 11 L 12 9 7 9 7 14 9 14 9 11 12 11 M 22 14 L 24 14 24 9 19 9 19 11 22 11 22 14 M 24 17 L 22 17 22 20 19 20 19 22 24 22 24 17 Z'/>";e[1]+="<path fill='"+d+"' stroke='none' d='M 29 0 L 0 0 0 29 29 29 29 0 M 27 27 L 2 27 2 2 27 2 27 27 M 8 16 L 6 16 6 21 11 21 11 19 8 19 8 16 M 11 10 L 11 8 6 8 6 13 8 13 8 10 11 10 M 21 16 L 21 19 18 19 18 21 23 21 23 16 21 16 M 21 10 L 21 13 23 13 23 8 18 8 18 10 21 10 Z'/>";
break;case "shoot":e[1]="<path fill='rgba(0,0,0,0.5)' stroke='none' d='M 12.1 11.1 Q 11.9 11.55 10.7 11.9 9.5 12.2 10.4 13.15 12.45 14.3 12 14.8 11.55 15 11.15 15.4 10.15 16.4 10.15 17.85 10.15 19.3 11.15 20.3 12.15 21.3 13.6 21.3 L 17.3 21.3 Q 21.1 21.1 21.45 16.25 21.85 14.05 19.7 14.65 17.35 15.5 16.5 14.35 16.6 14.3 16.65 14.2 17.5 13.4 17.5 12.25 17.5 11.05 16.65 10.25 15.85 9.45 14.7 9.45 13.5 9.45 12.7 10.25 12.35 10.6 12.15 11.1 L 12.1 11.1 M 3 18 L 3 24 7 28 13 28 13 26 8 26 5 23 5 18 3 18 M 13 5 L 13 3 7 3 3 7 3 13 5 13 5 8 8 5 13 5 M 28 18 L 26 18 26 23 23 26 18 26 18 28 24 28 28 24 28 18 M 23 5 L 26 8 26 13 28 13 28 7 24 3 18 3 18 5 23 5 M 14.5 25 L 14.5 30 16.5 30 16.5 25 14.5 25 M 1 14.5 L 1 16.5 6 16.5 6 14.5 1 14.5 M 16.5 6 L 16.5 1 14.5 1 14.5 6 16.5 6 M 30 14.5 L 25 14.5 25 16.5 30 16.5 30 14.5 Z'/>";
e[1]+="<path fill='"+d+"' stroke='none' d='M 11.1 10.05 L 11.1 10.1 Q 10.9 10.57 9.7 10.85 8.5 11.2 9.4 12.15 11.48 13.3 10.95 13.75 10.53 14 10.15 14.4 9.15 15.4 9.15 16.85 9.15 18.3 10.15 19.3 11.15 20.3 12.6 20.3 L 16.3 20.3 Q 20.1 20.1 20.45 15.25 20.8625 13 18.7 13.65 16.36 14.5 15.5 13.35 15.57 13.27 15.65 13.2 16.5 12.4 16.5 11.25 16.5 10.05 15.65 9.25 14.85 8.45 13.7 8.45 12.5 8.45 11.7 9.25 11.33 9.61 11.1 10.05 M 2 17 L 2 23 6 27 12 27 12 25 7 25 4 22 4 17 2 17 M 12 4 L 12 2 6 2 2 6 2 12 4 12 4 7 7 4 12 4 M 27 17 L 25 17 25 22 22 25 17 25 17 27 23 27 27 23 27 17 M 22 4 L 25 7 25 12 27 12 27 6 23 2 17 2 17 4 22 4 M 5 15.5 L 5 13.5 0 13.5 0 15.5 5 15.5 M 15.5 24 L 13.5 24 13.5 29 15.5 29 15.5 24 M 15.5 5 L 15.5 0 13.5 0 13.5 5 15.5 5 M 24 13.5 L 24 15.5 29 15.5 29 13.5 24 13.5 Z'/>";
break;case "picker":e[1]="<path fill='rgba(0,0,0,0.5)' stroke='none' d='M 7.15 14.25 L 5.75 12.85 2.95 15.65 4.35 17.05 7.15 14.25 M 5 9 L 1 9 1 11 5 11 5 9 M 4.35 2.95 L 2.95 4.35 5.75 7.15 7.15 5.75 4.35 2.95 M 14.25 7.15 L 17.05 4.35 15.65 2.95 12.85 5.75 14.25 7.15 M 11 5 L 11 1 9 1 9 5 11 5 M 22.9 19.9 L 28 17 10 10 17 28 19.9 22.9 26 29 29 26 22.9 19.9 M 19 20 L 17 24 13 13 24 17 20 19 27 26 26 27 19 20 Z'/>";e[1]+="<path fill='"+d+"' stroke='none' d='M 3.35 16.05 L 6.15 13.25 4.75 11.85 1.95 14.65 3.35 16.05 M 4 10 L 4 8 0 8 0 10 4 10 M 3.35 1.95 L 1.95 3.35 4.75 6.15 6.15 4.75 3.35 1.95 M 8 4 L 10 4 10 0 8 0 8 4 M 16.05 3.35 L 14.65 1.95 11.85 4.75 13.25 6.15 16.05 3.35 M 21.9 18.9 L 27 16 9 9 16 27 18.9 21.9 25 28 28 25 21.9 18.9 M 18 19 L 16 23 12 12 23 16 19 18 26 25 25 26 18 19 Z'/>";
break;case "3TH":e[1]="<path id='3TH' filter='url(#f1)' fill='"+d+"' stroke='none' stroke-width='0' d='M 83.7 48.3 L 94 48.3 94 32.95 Q 94 26.65 89.5 22.1 85.05 17.7 78.65 17.7 L 78.55 17.7 Q 78.35 17.7 78.15 17.7 L 73.6 17.7 73.6 8 63.4 8 63.4 17.7 49.7 17.7 49.7 8 39.5 8 39.5 17.7 34.05 17.7",e[1]+="Q 34.35 16.35 34.35 14.8 L 34.35 14.7 Q 34.35 12.45 33.65 10.45 32.7 7.7 30.55 5.55 30.15 5.1 29.6 4.7 26.1 1.7 21.25 1.7 18.3 1.7 15.8 2.85 13.75 3.75 12 5.55 8.3 9.35 8.2 14.6 8.2 14.7 8.2 14.8 L 18.4 14.8 18.4 14.7",
e[1]+="Q 18.4 13.55 19.2 12.75 20.05 11.9 21.15 11.9 L 21.35 11.9 Q 22.5 11.9 23.35 12.75 24.05 13.55 24.15 14.7 L 24.15 14.8 Q 24.15 15.95 23.35 16.85 22.5 17.6 21.35 17.7",e[1]+="L 18.4 17.7 18.4 27.9 21.6 27.9 Q 23.45 28 24.9 29.35 25.5 30.05 25.9 30.85 26.3 31.8 26.3 32.95 26.3 35.1 24.9 36.55 23.45 38 21.35 38.1 L 21.25 38.1 Q 19.1 38.1 17.65 36.55 16.1 35.1 16.1 32.95 16.1 32.85 16.1 32.75 L 6 32.75",e[1]+="Q 6 32.85 6 32.95 6 39.3 10.45 43.75 12.8 46.15 15.8 47.25 18.3 48.3 21.25 48.3 L 21.35 48.3 Q 26 48.2 29.6 45.8 30.95 44.9 32.1 43.75 36.5 39.3 36.5 32.95 36.5 31.9 36.4 30.85 36.2 29.35 35.8 27.9 L 39.5 27.9 39.5 32.75 Q 39.5 32.85 39.5 32.95 39.5 39.3 44.05 43.75 48.45 48.3 54.85 48.3 L 60.45 48.3 60.45 38.1 54.75 38.1",
e[1]+="Q 52.7 38.1 51.15 36.55 49.7 35.1 49.7 32.95 L 49.7 27.9 54.75 27.9 Q 54.85 27.9 54.95 27.9 L 63.4 27.9 63.4 48.3 73.6 48.3 73.6 32.95 Q 73.6 30.85 75.05 29.35 76.3 28.2 77.85 27.9 78.15 27.9 78.55 27.9 L 78.65 27.9 Q 80.85 27.9 82.25 29.35 83.7 30.85 83.7 32.95 L 83.7 48.3 Z'/>"}e[2]="</g></svg>";return e.join("\n")},setMode:function(a){ua=a;Ga&&q.setOption("mode","text/"+ua)},addUI:function(){S=document.createElement("div");S.style.cssText=s;S.style.right="0";$=document.createElement("div");
$.style.cssText=w;$.name="right";$.addEventListener("mouseover",editor.mid_over,!1);$.addEventListener("mouseout",editor.mid_out,!1);$.addEventListener("mousedown",editor.mid_down,!1);document.body.appendChild(S);document.body.appendChild($);gui.init(S,ma);qb=Aa=!0},removeUI:function(){Aa&&(gui.dispose(),$.removeEventListener("mouseover",editor.mid_over),$.removeEventListener("mouseout",editor.mid_out),$.removeEventListener("mousedown",editor.mid_down),document.body.removeChild($),document.body.removeChild(S),
qb=Aa=!1)},addCodeEditor:function(){K=document.createElement("div");K.style.cssText=s;K.style.left="0";document.body.appendChild(K);h=document.createElement("div");h.style.cssText=w;document.body.appendChild(h);h.name="left";h.addEventListener("mouseover",editor.mid_over,!1);h.addEventListener("mouseout",editor.mid_out,!1);h.addEventListener("mousedown",editor.mid_down,!1);y=document.createElement("div");y.style.cssText=I;K.appendChild(y);a=document.createElement("div");a.style.cssText=x;K.appendChild(a);
Fa=document.createElement("div");Fa.style.cssText=ba;Fa.innerHTML=editor.icon("save",Ea,30);K.appendChild(Fa);Fa.addEventListener("mouseover",editor.save_over,!1);Fa.addEventListener("mouseout",editor.save_out,!1);Fa.addEventListener("click",editor.save,!1);a.innerHTML="&nbsp;&bull; "+ra+".js";q=CodeMirror(y,{value:Ua,mode:"text/"+ua,theme:"monokai",lineNumbers:!0,matchBrackets:!0,indentWithTabs:!1,styleActiveLine:!0,tabSize:4,indentUnit:4,highlightSelectionMatches:{showToken:/\w/}});q.on("change",
function(){editor.onChange()});q.on("focus",function(){ya=!0;view.needFocus()});q.on("blur",function(){ya=!1});q.on("drop",function(){ta?ta=!1:q.setValue("")});q.on("dragstart",function(){ta=!0});Ga=!0},removeCodeEditor:function(){y.removeChild(q.getWrapperElement());q=null;h.removeEventListener("mouseover",editor.mid_over);h.removeEventListener("mouseout",editor.mid_out);h.removeEventListener("mousedown",editor.mid_down);Fa.removeEventListener("mouseover",editor.save_over);Fa.removeEventListener("mouseout",
editor.save_out);Fa.removeEventListener("click",editor.save);K.removeChild(a);K.removeChild(y);K.removeChild(Fa);document.body.removeChild(h);document.body.removeChild(K);Ga=!1},uiReset:function(){var a=Aa?!0:!1;editor.hideUI();Ha&&(qb=a);editor.Bdesative(F[2]);Ha=!1;ma=null},setOption:function(a){ma=a;Ha=!0;this.Bdefault(F[2]);qb&&this.showUI()},hideUI:function(){Aa&&this.removeUI();Ta=!1;Ka=ga;ga=0;this.Bdefault(F[2]);this.resize()},showUI:function(){Ha&&(Aa||this.addUI(),Ta=!0,ga=Ka?Ka:310,this.Bactive(F[2]),
this.resize())},hide:function(){Ga&&this.removeCodeEditor();hb=!1;ka=ja;ja=0;this.Bdefault(F[1]);this.resize()},show:function(){Ga||this.addCodeEditor();hb=!0;ja=ka?ka:Math.floor(0.4*window.innerWidth);this.resize()},resizeMenu:function(a){U.style.width=a+"px"},resize:function(a){a&&(A&&(ja=a.clientX+10,ja=100>ja?100:ja),$a&&(ga=window.innerWidth-a.clientX+10,ga=100>ga?100:ga));view&&view.setLeft(ja,ga);null!==O&&(O.s[0].left=ja+70+"px",O.needZone());Oa.style.left=ja+"px";E.style.right=ga+"px";U.style.left=
ja+"px";d.style.right=ga+"px";Aa&&($.style.right=ga-10+"px",S.style.width=ga-10+"px",gui.resize(ga));Ga&&(h.style.left=ja-10+"px",K.style.width=ja-10+"px",q.refresh())},log:function(a){pa.textContent=a;fa.textContent=a},tell:function(a){l.textContent=a;e.textContent=a},makeBigMenu:function(){for(var a=["DEMO","CODE","UI","PAUSE"],d,e,h=0;h<a.length;h++)e=a[h],d=document.createElement("div"),d.style.cssText=ca,d.addEventListener("click",editor["click"+e],!1),d.style.color=Ea,d.name=e,"PAUSE"===e&&
(e="&#10074;&#10074;",d.style.width="30px"),"UI"===e&&(d.style.width="30px"),d.innerHTML=e,U.appendChild(d),F.push(d);W=document.createElement("div");W.style.cssText="padding: 10px 40px; width:100%; display: block; background-position: bottom; background-repeat: repeat-x;";U.appendChild(W);for(h=F.length;h--;)F[h].addEventListener("mouseover",editor.Bover,!1),F[h].addEventListener("mouseout",editor.Bout,!1)},clickDEMO:function(a){a.preventDefault();ab?editor.hideBigMenu():editor.showBigMenu()},clickCODE:function(a){a.preventDefault();
hb?editor.hide():editor.show()},clickPAUSE:function(a){a.preventDefault();rb?(this.innerHTML="&#10074;&#10074;",rb=!1):(this.innerHTML="&#9654;",rb=!0);view.pause=rb},clickUI:function(a){a.preventDefault();Ta?editor.hideUI():editor.showUI()},showBigMenu:function(){U.style.background="rgba(21,21,21,0.75)";U.style.borderBottom="1px solid #3f3f3f";W.style.backgroundImage=P;ab=!0;for(var a=demos.length,d,e=0;e<a;e++)d=demos[e],d!==ra?editor.addButtonMenu(demos[e],!1):editor.addButtonMenu(demos[e],!0)},
hideBigMenu:function(){U.style.background="none";U.style.borderBottom="none";W.style.backgroundImage="none";ab=!1;for(var a=W.childNodes.length,d;a--;)d=W.childNodes[a],d.name!==ra&&(d.removeEventListener("click",editor.demoSelect),d.removeEventListener("mouseover",editor.MBover),d.removeEventListener("mouseout",editor.MBout)),W.removeChild(d);editor.Bdefault(F[0])},addButtonMenu:function(a,d){var e=document.createElement("div");e.style.cssText=Z;e.innerHTML="&bull; "+a.charAt(0).toUpperCase()+a.substring(1).toLowerCase();
e.name=a;d?(e.style.color="#3f3f3f",e.style.pointerEvents="none"):(e.addEventListener("click",editor.demoSelect,!1),e.addEventListener("mouseover",editor.MBover,!1),e.addEventListener("mouseout",editor.MBout,!1));W.appendChild(e)},demoSelect:function(a){a.preventDefault();editor.hideBigMenu();editor.load("demos/"+a.target.name+".js")},MBover:function(a){a.preventDefault();a.target.style.color=Ea},MBout:function(a){a.preventDefault();a.target.style.color="#dedede"},Bover:function(a){a.preventDefault();
a.target.style.background=Ea;a.target.style.color="#000000";a.target.style.textShadow="1px 1px "+Ea},Bout:function(a){a.preventDefault();var d=0;"CODE"===a.target.name&&hb&&(d=1);"DEMO"===a.target.name&&ab&&(d=1);"UI"===a.target.name&&Ta&&(d=1);d?editor.Bactive(a.target):editor.Bdefault(a.target)},Bdefault:function(a){a.style.background="none";a.style.color=Ea;a.style.textShadow="1px 1px #000000";a.style.pointerEvents="auto"},Bactive:function(a){a.style.background="#3f3f3f";a.style.color="#999999";
a.style.textShadow="1px 1px #333333"},Bdesative:function(a){a.style.background="none";a.style.color="#3f3f3f";a.style.pointerEvents="none"},mid_over:function(a){a.preventDefault();this.style.background=Ea},mid_out:function(a){a.preventDefault();a=a.target.name;"left"!==a||A||(this.style.background="none");"right"!==a||$a||(this.style.background="none")},mid_down:function(a){a.preventDefault();a=a.target.name;"left"===a&&(A=!0);"right"===a&&($a=!0);document.addEventListener("mouseup",editor.mid_up,
!1);document.addEventListener("mousemove",editor.resize,!1)},mid_up:function(a){$a=A=!1;document.removeEventListener("mouseup",editor.mid_up,!1);document.removeEventListener("mousemove",editor.resize,!1)},save_over:function(a){a.preventDefault();Fa.innerHTML=editor.icon("save","#000",30);Fa.style.background=Ea},save_out:function(a){a.preventDefault();Fa.innerHTML=editor.icon("save",Ea,30);Fa.style.background="none"},save:function(a){a.preventDefault();a=new Blob([Ua],{type:"text/plain"});saveAs(a,
ra+".js")},load:function(a){ra=a.substring(a.indexOf("/")+1,a.indexOf("."));var d=new XMLHttpRequest;d.overrideMimeType("text/plain; charset=x-user-defined");d.open("GET",a,!0);d.onload=function(){editor.uiReset();Ga?q.setValue(d.responseText):(Ua=d.responseText,editor.inject())};d.send()},unFocus:function(){Ga&&q.getInputField().blur();view.haveFocus()},getFocus:function(){return ya},validate:function(a){return q.operation(function(){for(;0<B.length;)q.removeLineClass(B.shift(),"background","errorLine");
for(var a=G.length;a--;)q.removeLineWidget(G[a]);G.length=0;var d=Ua;try{for(var e=esprima.parse(d,{tolerant:!0}).errors,a=e.length;a--;){var h=e[a],l=document.createElement("div");l.className="esprima-error";l.textContent=h.message.replace(/Line [0-9]+: /,"");var s=h.lineNumber-1;B.push(s);q.addLineClass(s,"background","errorLine");var u=q.addLineWidget(s,l);G.push(u)}}catch(w){l=document.createElement("div"),l.className="esprima-error",l.textContent=w.message.replace(/Line [0-9]+: /,""),s=w.lineNumber-
1,B.push(s),q.addLineClass(s,"background","errorLine"),u=q.addLineWidget(s,l),G.push(u)}return 0===B.length})},onChange:function(){clearTimeout(za);Ua=q.getValue();this.validate()&&(za=setTimeout(function(){editor.inject()},0))},inject:function(){var d=!0;location.hash.substr(1)===ra&&(d=!1);location.hash=ra;var e=document.createElement("script");e.language="javascript";e.type="text/javascript";e.text=Ua;document.getElementsByTagName("BODY").item(0).appendChild(e);Ga&&(a.innerHTML="&nbsp;&bull; "+
ra+".js");J.innerHTML=ra.charAt(0).toUpperCase()+ra.substring(1).toLowerCase();ea(ra,d)},setLink:function(a){sb=a;this.addGithubLink()},addGithubLink:function(){d=document.createElement("div");d.style.cssText="-o-user-select:none; -ms-user-select:none; -khtml-user-select:none; -webkit-user-select:none; -moz-user-select: none;position:absolute; right:0; top:0; width:1px; height:1px; pointer-events:none;";d.innerHTML="<svg width='60' height='60' viewBox='0 0 250 250' style='fill:rgba(255,255,255,0.05); color:rgba(0,0,0,0.3); position: absolute; top: 0; border: 0; right: 0;'>\n<path d='M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z' id='octo' onmouseover='editor.Gover();' onmouseout='editor.Gout();' onmousedown='editor.Gdown();' style='cursor:pointer; pointer-events:auto;'></path>\n<path d='M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2' fill='currentColor' style='transform-origin: 130px 106px; pointer-events:none;' id='octo-arm'></path>\n<path d='M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z' fill='currentColor' id='octo-body' style='pointer-events:none;'></path></svg>";
document.body.appendChild(d);Ia=document.getElementById("octo");Ba=document.getElementById("octo-arm")},Gover:function(){Ia.setAttribute("fill",Ea);Ba.style.webkitAnimationName="octocat-wave";Ba.style.webkitAnimationDuration="560ms"},Gout:function(){Ia.setAttribute("fill","rgba(255,255,255,0.05)");Ba.style.webkitAnimationName="none"},Gdown:function(){sb&&window.location.assign("https://github.com/lo-th/"+sb)},joyMove:function(a){user.key[0]=a[0];user.key[1]=a[1]},addJoystick:function(a){a=a||{};user.setSameAxis(void 0!==
a.sameAxis?a.sameAxis:!1);O=UIL.add(user,"axeL",{type:"joystick",target:document.body,pos:{left:ja+70+"px",top:"auto",bottom:"10px"},name:"MOVE",w:150,multiplicator:1,precision:2,fontColor:"#308AFF",mode:1}).onChange(editor.joyMove).listen()},removeJoystick:function(){O.clear();O=null},screenChange:function(){editor.isFullScreen=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?!0:!1;da.innerHTML=editor.icon(editor.isFullScreen?
"scrOut":"scrIn","#787978",30,30)},toggleFullScreen:function(){if(editor.isFullScreen)"exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document?document.webkitExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"msExitFullscreen"in document&&document.msExitFullscreen();else if("fullscreenEnabled"in document||"webkitFullscreenEnabled"in document||"mozFullScreenEnabled"in document||"msFullscreenEnabled"in document)if(document.fullscreenEnabled||
document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){var a=document.body;"requestFullscreen"in a?a.requestFullscreen():"webkitRequestFullscreen"in a?a.webkitRequestFullscreen():"mozRequestFullScreen"in a?a.mozRequestFullScreen():"msRequestFullscreen"in a&&a.msRequestFullscreen()}}}}();
